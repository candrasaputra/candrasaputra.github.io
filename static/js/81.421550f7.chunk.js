(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[81],{1537:function(t,e,n){"use strict";n.r(e);var a=n(24),r=n(9),o=n.n(r),c=n(19),i=n(12),s=n(0),u=n.n(s),l=n(31),d=n.n(l),p=n(1598),f=n.n(p),m=n(380),b=n(67),O=n(27),y=n(37),j=n(26),x=n(1583),_=n.n(x),v=n(20),h=n.n(v),C=n(80),g=n(50),S=n(48),E=n(189),T=n(284),D=n(205),L=n(1573),M="/images/icons/money_in.png",w="/images/icons/money_out.png",R="/images/icons/transactions.svg",I="/api/rdl-transaction-stats",k="/api/rdl-transactions",F="/api/rdl-transaction-report-requests",A=function(t){return"/rdl-transactions/".concat(t)},N=["RDL_DISBURSEMENT","RDL_PAYMENT"],P=function(t){var e=t.totalMoneyIn,n=t.totalMoneyOut,a=t.totalTransactions,r=t.t,o=t.isLoading,c=[{text:r("totalMoneyIn"),icon:M,amount:e&&Object(L.d)(e),currency:"IDR"},{text:r("totalMoneyOut"),icon:w,amount:n&&Object(L.d)(n),currency:"IDR"},{text:r("totalTransactions"),icon:R,amount:a}];return u.a.createElement(T.a,null,c.map((function(t,e){return u.a.createElement(D.a,{md:4,key:"col-".concat(e)},u.a.createElement(C.Z,{key:"stats-".concat(e),text:t.text,icon:t.icon,amount:t.amount,currency:t.currency,isLoading:o}))})))},B=n(3),U=n(1575),H=n.n(U),q=n(288),V=n.n(q),W=function(t){var e=V()(null===t||void 0===t?void 0:t.toLowerCase()).replace(/_/g," ");return u.a.createElement(H.a,{text:e,variant:"success"})},G=function(t){return[{dataField:"status",text:t("status"),formatter:W,headerStyle:{width:"10%"}},{dataField:"created",text:t("createdDate")},{dataField:"id",text:t("id")},{dataField:"transaction_type",text:t("type")},{dataField:"external_id",text:t("externalId")},{dataField:"amount",text:t("amount")},{dataField:"investor_id",text:t("investorId")}]},J=function(t){return{width:"5%",items:[{field:"external_id",text:t("copyExternalId"),textPressed:t("commonWords:valueCopied"),action:"copy"},{field:"investor_id",text:t("copyInvestorId"),textPressed:t("commonWords:valueCopied"),action:"copy"},{field:"id",text:t("copyId"),textPressed:t("commonWords:valueCopied"),action:"copy"}]}},Q=[{children:[{type:"RDL_DISBURSEMENT",label:"RDL Disbursement"},{type:"RDL_PAYMENT",label:"RDL Payment"}]}],Y=n(473);e.default=Object(b.o)(Object(m.a)(["rdlTransactions","commonComponents"])((function(t){var e=t.t,n=t.dateFormat,r=t.apiCall,l=r.axiosGet,p=r.axiosPost,m=t.business,b=t.user.email,x=t.history,v=t.environment,T=Object(s.useState)({totalMoneyIn:0,totalMoneyOut:0,totalTransactions:0}),D=Object(i.a)(T,2),M=D[0],w=D[1],R=Object(s.useState)(!1),U=Object(i.a)(R,2),H=U[0],q=U[1],V=Object(s.useState)(""),W=Object(i.a)(V,2),Z=W[0],z=W[1],X=Object(s.useState)([]),$=Object(i.a)(X,2),K=$[0],tt=$[1],et=Object(s.useState)(!1),nt=Object(i.a)(et,2),at=nt[0],rt=nt[1],ot=Object(s.useState)(!1),ct=Object(i.a)(ot,2),it=ct[0],st=ct[1],ut=Object(s.useState)(!1),lt=Object(i.a)(ut,2),dt=lt[0],pt=lt[1],ft=Object(s.useState)(!1),mt=Object(i.a)(ft,2),bt=mt[0],Ot=mt[1],yt=Object(s.useState)(N),jt=Object(i.a)(yt,2),xt=jt[0],_t=jt[1],vt=Object(s.useState)(new Date(S.c.LAST_1_MONTH)),ht=Object(i.a)(vt,2),Ct=ht[0],gt=ht[1],St=Object(s.useState)(new Date(S.c.TODAY)),Et=Object(i.a)(St,2),Tt=Et[0],Dt=Et[1],Lt=Object(s.useState)(""),Mt=Object(i.a)(Lt,2),wt=Mt[0],Rt=Mt[1],It=Object(s.useState)(null),kt=Object(i.a)(It,2),Ft=kt[0],At=kt[1],Nt=Object(s.useState)(!1),Pt=Object(i.a)(Nt,2),Bt=Pt[0],Ut=Pt[1],Ht=Object(s.useState)({title:"",subtitle:"",type:"",showModal:!1}),qt=Object(i.a)(Ht,2),Vt=qt[0],Wt=qt[1],Gt=function(){var t=Object(c.a)(o.a.mark((function t(){var e,n,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return st(!0),e=x.location.state&&x.location.state.isFromDetailsPage,t.next=4,f.a.getItem("LAST_RDL_TRANSACTIONS");case 4:if(n=t.sent,!e||Object(O.isNull)(n)){t.next=20;break}return a=JSON.parse(n),tt(a.rdlData),tt(a.rdlData),rt(a.hasNext),gt(a.dateStart),Dt(a.dateEnd),_t(a.types),Rt(a.searchQuery),st(!1),t.next=17,f.a.removeItem("LAST_RDL_TRANSACTIONS");case 17:x.replace({pathname:x.location.pathname,state:{}}),t.next=22;break;case 20:Qt(),Yt(!1);case 22:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(s.useEffect)((function(){Gt()}),[v]),Object(s.useEffect)((function(){bt&&(Qt(),Yt(!1),Ot(!1))}),[xt,Ct,Tt]),Object(s.useEffect)((function(){clearTimeout(Ft),At(setTimeout((function(){bt&&(!wt||wt.length>2)&&(Qt(),Yt(!1),Ot(!1))}),500))}),[wt]);var Jt,Qt=function(){var t=Object(c.a)(o.a.mark((function t(){var n,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return q(!0),n={account_type:"CASH",transaction_types:xt,from:Object(E.c)(Ct,"start"),to:Object(E.c)(Tt,"end")},wt&&(n.search_query=wt.trim()),t.next=5,l(I,n);case 5:if(a=t.sent,q(!1),!a.error_code){t.next=12;break}if(a.error_code!==Y.a.REQUEST_ABORTED){t.next=10;break}return t.abrupt("return");case 10:return z(Object(g.f)(a.error_code,e)),t.abrupt("return");case 12:w({totalMoneyIn:a.total_money_in,totalMoneyOut:a.total_money_out,totalTransactions:a.total_transactions});case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Yt=function(){var t=Object(c.a)(o.a.mark((function t(n){var r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n||st(!0),r={account_type:"CASH",transaction_types:xt,from:Object(E.c)(Ct,"start"),to:Object(E.c)(Tt,"end"),last_created:n?Object(O.last)(K).created:void 0},wt&&(r.search_query=wt.trim()),t.next=5,l(k,r);case 5:if(c=t.sent,st(!1),!c.error_code){t.next=12;break}if(c.error_code!==Y.a.REQUEST_ABORTED){t.next=10;break}return t.abrupt("return");case 10:return z(Object(g.f)(c.error_code,e)),t.abrupt("return");case 12:rt(c.has_next),n?(tt([].concat(Object(a.a)(K),Object(a.a)(c.docs))),pt(!1)):tt(c.docs);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Zt=function(){var t=Object(c.a)(o.a.mark((function t(){var n,a,r,c,s,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ut(!0),n={account_type:"CASH",transaction_types:xt,from:Object(E.c)(Ct,"start"),to:Object(E.c)(Tt,"end"),user_offset:d()().utcOffset(),export_type:"CSV"},wt&&(n.search_query=wt.trim()),t.next=5,p(F,{},n);case 5:if(a=t.sent,Ut(!1),!a.error_code){t.next=16;break}t.t0=a.error_code,t.next="EXPORT_CSV_COUNT_LIMIT_ERROR"===t.t0?11:14;break;case 11:return r=a.message.split(" "),c=Object(i.a)(r,2),s=c[0],u=c[1],zt(e("commonComponents:exportFailed"),e("exportFailedInfo",{exportCsvLimit:s,currentExportCsvCount:u}),"danger"),t.abrupt("return");case 14:return zt(e("commonComponents:exportFailed"),null,"danger"),t.abrupt("return");case 16:zt(e("commonComponents:exportStarted"),e("commonComponents:exportSuccessInfo",{email:b}),"success"),window.dataLayer.push({businessId:m.id,event:"export-rdl-transactions-report",label:"Export CSV - RDL Transactions"});case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),zt=function(t,e,n,a){Wt({title:t,subtitle:e,type:n,showModal:!0,additionalContent:a})},Xt={isClickable:!0,tableHeaderColumns:G(e),tableContentRows:(Jt=K,Jt.map((function(t){return Object(B.a)(Object(B.a)({},t),{},{created:d()(t.created).format(S.a.DATE_WITHOUT_SECONDS),amount:t.amount&&Object(L.d)(t.amount)})}))),onClickLoadMore:function(){pt(!0),Yt(!0)},withLoadMore:at,loadMoreText:e("commonComponents:tableMore"),isLoadingMore:dt,isLoading:it,isError:!Object(O.isEmpty)(Z),isEmpty:Object(O.isEmpty)(K),loadingText:e("loadingRDL"),errorContent:u.a.createElement(C.t,{text:Z}),emptyContent:u.a.createElement(C.r,{caption:e("emptyRDL"),subtitle:e("emptyRDLSubtitle")}),actionButtonConfig:J(e),onDetailsClicked:function(t){return function(t){x.replace({pathname:x.location.pathname,state:{isFromDetailsPage:!0}}),x.push({pathname:A(t.id),search:"?transaction_type=".concat(t.transaction_type)})}(t)}},$t=function(t,e,n,a){var r=e.length;return[u.a.createElement(C.q,{displayText:"".concat(t("transactionType")," (").concat(r,")"),children:[u.a.createElement(C.w,{selectedFilters:e,filterGroups:Q,withCheckAll:!0,onChecked:n,onCheckAll:a})]})]}(e,xt,(function(t){var e=Object(a.a)(xt);xt.includes(t)?e=e.filter((function(e){return e!==t})):e.push(t),_t(e),Ot(!0)}),(function(){var t=Object(O.isEmpty)(xt)?N:[];_t(t),Ot(!0)})),Kt={start:Ct,end:Tt,inputFormat:n.date_time_picker,outputFormat:S.a.GMT_MS_Z,onChange:function(t,e){switch(Ot(!0),t){case"start":gt(new Date(e));break;case"end":Dt(new Date(e))}},customCss:"filter-item"},te={value:wt,onChange:function(t){t.preventDefault(),Rt(t.target.value),Ot(!0)},tooltip:e("searchTooltip"),placeholder:e("search"),position:"inline",customCss:"filter-item"},ee=[u.a.createElement(h.a,{iconLeft:u.a.createElement(y.a,{icon:j.p}),onClick:Zt,isLoading:Bt,size:"sm"},"CSV")];return u.a.createElement(u.a.Fragment,null,u.a.createElement(P,{totalMoneyIn:M.totalMoneyIn,totalMoneyOut:M.totalMoneyOut,totalTransactions:M.totalTransactions,isLoading:H,t:e}),u.a.createElement(_.a,{stickyHeader:!0,filters:$t,rightButtons:ee,dateFilterConfig:Kt,tableConfig:Xt,searchBarConfig:te}),u.a.createElement(C.j,Object.assign({},Vt,{handleClose:function(){Wt({title:"",subtitle:"",type:"",showModal:!1})}})))})))},1573:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return r})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return i})),n.d(e,"e",(function(){return s}));var a=function(t,e){return"IDR"!==e&&e?t.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"):t.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")},r=function(t){return t.toLocaleString("en-US").replace(/,/g,".")},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.toLocaleString("en-US",{minimumFractionDigits:e?2:0})},c=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=o(t,a),c="IDR"===e?r.replace(/,/g,"."):r,i=n?"".concat(e," "):"",s="".concat(i).concat(c);return s},i=function(t,e,n){var a=e?c(t,e):o(t),r=a.split("-").join(""),i="".concat((null!=n?n:t>0)?"+ ":"- "," ").concat(r);return 0===t&&(i=a),i},s=function(t){return"".concat((100*t).toFixed(2),"%")}},1575:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n(0)),r=i(n(2)),o=i(n(6)),c=i(n(1576));function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n(1577);var u=function(t){var e,n=t.text,r=t.iconLeft,i=t.customCss,u=t.variant,l=(0,o.default)((s(e={"status-pill":!0},"status-pill-".concat(u),u),s(e,i,i),e));return a.default.createElement(c.default,{text:n,iconLeft:r,customCss:l})};u.propTypes={text:r.default.string,iconLeft:r.default.any,variant:r.default.oneOf(["success","danger","warning","first-level","second-level"]),customCss:r.default.string};var l=u;e.default=l},1576:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),t.exports=n(467)},1577:function(t,e,n){}}]);