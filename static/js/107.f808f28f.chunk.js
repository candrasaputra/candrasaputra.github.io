(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[107],{1542:function(e,t,a){"use strict";a.r(t);var r=a(9),c=a.n(r),n=a(19),l=a(12),s=a(0),i=a.n(s),o=a(380),d=a(27),u=a(468),m=a(167),b=a(189),p=a(80),f=a(1565),h=Object(o.a)("fraudGuard")((function(e){var t,a=e.isAllowList,r=e.listEventHistory,c=e.isLoading,n=e.t,l=r.email,s=r.timestamp,o=""===l&&""===s,d=n(a?"cardAllowList":"cardBlockList"),u=i.a.createElement("p",{className:"text-md font-weight-bold mb-0"},d);if(c)t=n("fetchingEventHistory");else{var m=i.a.createElement(f.a,{i18nKey:"fraudListEventHistory"},"This list was last modified by"," ",i.a.createElement("span",{className:"font-weight-bold"},{email:l})," on"," ",i.a.createElement("span",{className:"font-weight-bold"},{timestamp:s}),".");t=o?n("fraudListEventHistoryEmpty"):m}var b=n(a?"cardAllowListDescription":"cardBlockListDescription"),h=i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{className:"color-charcoal"},t),i.a.createElement("p",{className:"mt-2 mb-0"},b),i.a.createElement("p",null,n("addedFromDetails")));return i.a.createElement(p.z,{title:u,children:h})})),j=a(37),O=a(26),w=a(476),E=a(475),g=a(290),y=a.n(g),v=Object(o.a)("fraudGuard")((function(e){var t=e.list,a=e.isLoading,r=e.errorMessage,c=e.openDeleteModal,n=e.allowedToEdit,l=e.t,s=[{dataField:"cardNumberValue",text:l("creditCardNumber"),headerStyle:{width:"20%"}},{dataField:"countryValue",text:l("country"),headerStyle:{width:"20%"}},{dataField:"bankValue",text:l("bank"),headerStyle:{width:"25%"}},{dataField:"typeValue",text:l("type"),headerStyle:{width:"10%"}},{dataField:"formattedDate",text:l("dateAdded"),headerStyle:{width:"20%"}},{dataField:"deleteButton",text:"",headerStyle:{width:"5%"}}],o=t.map((function(e){var t=e.masked_card_number,a=e.bin_data,r=e.updated,l=a.country,s=a.country_code,o=a.bank,d=a.card_processor,u=a.card_type,m=Object(E.b)(d),f=Object(E.a)(d),h=m&&i.a.createElement("img",{className:"card-brand-logo mr-3",src:"/images/card-brands-logos/".concat(f,".png"),alt:f}),g=t&&Object(w.b)(t),y=i.a.createElement("div",{className:"d-flex align-items-center color-inherit"},h,g),v=Object(E.b)(s),_=Object(E.b)(l),x=v&&i.a.createElement("img",{className:"card-country-icon mr-3",src:"https://country-flags-images.s3.amazonaws.com/flags/".concat(s.toLowerCase(),".svg"),alt:s}),L=_&&l.toLowerCase(),k=_?i.a.createElement("div",{className:"d-flex align-items-center color-inherit text-capitalize"},x,L):"-",C=Object(E.b)(o)?o:"-",N=Object(E.b)(u),D=N&&u.toLowerCase();return{cardNumberValue:y,countryValue:k,bankValue:C,typeValue:N?i.a.createElement("span",{className:"text-capitalize"},D):"-",formattedDate:Object(b.h)(r),deleteButton:n?i.a.createElement(p.h,{withTooltip:!1,icon:i.a.createElement(j.a,{icon:O.K}),onClick:function(){return c(t)},customCss:"btn-no-bg table-icon-button"}):null}})),u=i.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},i.a.createElement("p",{className:"color-charcoal"},l("addListFromDetailsInstruction")));return i.a.createElement(p.z,{isLoading:a,loadingText:l("loadingYourList"),isError:!Object(d.isEmpty)(r),errorText:r,isEmpty:Object(d.isEmpty)(t),emptySubtitle:l("emptyFraudListCaption"),title:u},i.a.createElement(y.a,{noBorder:!0,tableHeaderColumns:s,tableContentRows:o,customCssRow:"fraud-list-table-row"}))})),_=Object(o.a)(["fraudGuard","commonWords"])((function(e){var t=e.toBeDeletedCcn,a=e.isAllowList,r=e.isModalOpen,c=e.closeDeleteModal,n=e.deleteData,l=e.isDeletingData,s=e.t,o=s(a?"deleteCardAllow":"deleteCardBlock"),d=s(a?"deleteCardAllowInstruction":"deleteCardBlockInstruction"),u=t&&Object(w.b)(t),m=i.a.createElement("div",{className:"confirmation-modal-additional-content text-left mt-2"},i.a.createElement("div",{className:"d-flex text-left mb-4"},i.a.createElement("span",{className:"color-charcoal mr-2"},s("cardNumber"),": "),i.a.createElement("span",{className:"font-weight-bolder"},u)),i.a.createElement("p",{className:"text-left color-charcoal mb-0"},d));return i.a.createElement(p.j,{type:"danger",title:o,showModal:r,handleClose:c,handleConfirm:n,withCancel:!0,isButtonLoading:l,buttonText:s("commonWords:delete"),buttonType:"destructive",buttonCustomCss:"min-width-120",additionalContent:m})}));t.default=Object(o.a)(["fraudGuard","creditCardErrorMessages","errorMessages"])((function(e){var t=e.location,a=e.history,r=e.apiCall,o=e.user,f=e.environment,j=e.t,O=t.pathname.split("/"),w="credit_card_number_allow_list"===O[O.length-1],E=o.can_administer,g=o.can_manage_tech_settings,y=E&&g,x=Object(s.useState)(!1),L=Object(l.a)(x,2),k=L[0],C=L[1],N=Object(s.useState)({email:"",timestamp:""}),D=Object(l.a)(N,2),S=D[0],F=D[1],M=Object(s.useState)(!1),B=Object(l.a)(M,2),A=B[0],T=B[1],V=Object(s.useState)({blockList:[],allowList:[]}),G=Object(l.a)(V,2),H=G[0],z=G[1],I=Object(s.useState)(!1),R=Object(l.a)(I,2),J=R[0],K=R[1],W=Object(s.useState)(""),Y=Object(l.a)(W,2),q=Y[0],P=Y[1],Q=Object(s.useState)(!1),U=Object(l.a)(Q,2),X=U[0],Z=U[1],$=Object(s.useState)(""),ee=Object(l.a)($,2),te=ee[0],ae=ee[1],re=Object(s.useState)(!1),ce=Object(l.a)(re,2),ne=ce[0],le=ce[1],se=Object(s.useState)({title:"",description:""}),ie=Object(l.a)(se,2),oe=ie[0],de=ie[1],ue=Object(s.useState)(""),me=Object(l.a)(ue,2),be=me[0],pe=me[1];Object(s.useEffect)((function(){C(!0),fe(),je()}),[]),Object(s.useEffect)((function(){de({title:"",description:""})}),[X]),Object(s.useEffect)((function(){k&&Ee()}),[f]);var fe=function(){var e=Object(n.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),e.prev=1,e.next=4,r.axiosGet(m.d.ccSettingsLogger);case 4:if(!(t=e.sent).error_code){e.next=7;break}throw t;case 7:he(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),P(Object(u.b)(e.t0.error_code,j));case 13:T(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),he=function(e){var t=e.card_blocked_list,a=e.card_allowed_list,r=w?a:t;F({email:Object(d.isEmpty)(r)?"":r.last_update_history_item.email,timestamp:Object(d.isEmpty)(r)?"":Object(b.h)(r.last_update_history_item.timestamp)})},je=function(){var e=Object(n.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(!0),e.prev=1,e.next=4,r.axiosGet(m.d.customFraudRules);case 4:if(!(t=e.sent).error_code){e.next=7;break}throw t;case 7:Oe(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),P(Object(u.b)(e.t0.error_code,j));case 13:K(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Oe=function(e){var t=e.blocked_list.card_data,a=e.allowed_list.card_data;z({blockList:t,allowList:a})},we=function(){var e=Object(n.a)(c.a.mark((function e(){var t,a,n,l,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le(!0),ve.forEach((function(e){e.masked_card_number===te&&(t=e.id)})),a={is_block_list:!w,id:t},n={},l={},e.prev=5,e.next=8,r.axiosDelete(m.d.fraudCard,n,a,l);case 8:if(!(s=e.sent).error_code){e.next=11;break}throw s;case 11:e.next=19;break;case 13:return e.prev=13,e.t0=e.catch(5),de({title:Object(u.c)(e.t0.error_code,j),description:Object(u.b)(e.t0.error_code,j)}),pe(!0),le(!1),e.abrupt("return");case 19:fe(),je(),le(!1),Z(!1),de({title:"",description:""});case 24:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(){return e.apply(this,arguments)}}(),Ee=function(){a.push({pathname:m.e.fraudGuard,state:{selectedTabIndex:1}})},ge=H.blockList,ye=H.allowList,ve=w?ye:ge,_e=i.a.createElement(h,{isAllowList:w,listEventHistory:S,isLoading:A}),xe=i.a.createElement(v,{list:ve,isLoading:J,errorMessage:q,openDeleteModal:function(e){ae(e),Z(!0)},allowedToEdit:y}),Le=i.a.createElement(_,{toBeDeletedCcn:te,isAllowList:w,isModalOpen:X,closeDeleteModal:function(){return Z(!1)},deleteData:we,isDeletingData:ne}),ke=i.a.createElement(p.j,{type:"danger",title:oe.title,subtitle:oe.description,showModal:be,handleClose:function(){return pe(!1)}});return i.a.createElement(i.a.Fragment,null,i.a.createElement(p.o,{goBack:Ee,title:j("fraudList")}),_e,xe,Le,ke)}))}}]);