(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[95],{1521:function(e,t,n){"use strict";n.r(t);var a=n(81),r=n(9),o=n.n(r),c=n(24),i=n(19),s=n(12),u=n(0),l=n.n(u),m=n(380),p=n(67),b=n(289),d=n.n(b),h=n(491),O=n.n(h),f=n(541),E=n(50),v=n(255),k=n(27),C=n(80),S=(n(1867),Object(m.a)(["loginVerification"])((function(e){var t=e.t,n=e.isLoading,a=e.code,r=e.setCode,o=e.onSubmit,c=e.onClickAlternativeMethod,i=e.errorMessage,s=e.entity,u=l.a.createElement("p",{className:"mb-0 color-primary clickable-text",onClick:c},t("haveTrouble"));return l.a.createElement(C.G,{description:t("authenticatorDescription"),code:a,setCode:r,onSubmit:o,isLoading:n,bottomContent:u,errorMessage:i,entity:s})}))),g=n(94),j=n(20),T=n.n(j),_=n(478),w=n.n(_),N=Object(m.a)(["loginVerification","commonWords"])((function(e){var t=e.t,n=e.options,a=e.selectedMethod,r=e.onSelectMethod,o=e.onSubmitMethod,c=e.bottomContent,i=e.entity,s=Object(g.a)().width<768;return l.a.createElement(C.W,{title:t("alternativeMethodTitle"),customCss:"".concat(s?"text-center":""),entity:i},n.map((function(e,t){return function(e,t){var n=e.value===a;return l.a.createElement("div",{key:t,className:"mfa-option-container ".concat(n?"is-active":""),onClick:function(){return r(e.value)}},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"option-radio-container"},l.a.createElement(w.a,{options:[e],value:a,onChange:function(e){return r(e.target.value)},name:"".concat(e.value,"-method")})),l.a.createElement("div",{className:"option-description-container mx-3"},l.a.createElement("p",{className:"m-0 font-weight-bold"},e.name),l.a.createElement("p",{className:"m-0 text-sm color-charcoal"},e.desc))),l.a.createElement("div",{className:"option-icon-container flex-end"},l.a.createElement("img",{src:e.icon,alt:"".concat(e.value,"-icon")})))}(e,t)})),l.a.createElement(T.a,{onClick:o,variant:"primary",customCss:"action-button my-3",block:!0},t("commonWords:done")),l.a.createElement("div",{className:"text-center"},c))})),y=Object(m.a)(["loginVerification"])((function(e){var t=e.t,n=e.isLoading,a=e.backupCode,r=e.setBackupCode,o=e.onSubmitBackupCode,c=e.errorMessage,i=e.bottomContent,s=e.entity;return l.a.createElement(C.G,{description:t("backupCodeDescription"),bottomContent:i,code:a,setCode:r,onSubmit:o,isLoading:n,errorMessage:c,inputTypeMobile:"alphanumeric",entity:s})})),P=n(1565),x=Object(m.a)(["inputOTPCard","loginVerification","errorMessages"])((function(e){var t=e.t,n=e.title,a=e.countTime,r=e.onOTPRequest,o=e.otpRequestErrorMessage,c=e.phoneNumber,i=e.otpToken,s=e.setOtpToken,m=e.isAuthenticatingOTP,p=e.authenticationErrorMessage,b=e.onSubmitOTP,d=e.onClickRequestAssistance,h=e.isAlternativeMethod,O=e.entity;Object(u.useEffect)((function(){h&&r()}),[]);var f=Object(g.a)().width<768,v=l.a.createElement(l.a.Fragment,null,o&&l.a.createElement("p",{className:"m-0 sms-otp-input-card-error-message"},o),l.a.createElement("div",{className:"count-down-section mt-5 ".concat(f?"mb-3":"mb-1")},l.a.createElement("span",{className:"color-ash-dark"},t("didntReceiveOTP")),f&&l.a.createElement("br",null),0===a?l.a.createElement("span",{className:"color-primary clickable-text",onClick:r},t("requestNewOTP")):l.a.createElement("span",{className:"color-ash-dark clickable-text"},t("requestNewOTPIn",{count:a>9?a:"0"+a}))),l.a.createElement(P.a,{i18nKey:"needHelp"},l.a.createElement("p",{className:"mb-0 color-ash-dark"},"Need help?"," ",l.a.createElement("span",{className:"color-primary clickable-text",onClick:d},"Request assistance")))),k=l.a.createElement("div",{className:"mb-5"},l.a.createElement("span",null,t("toLoginEnterOTP")),l.a.createElement("span",{className:"font-weight-bold"},Object(E.g)(c)));return l.a.createElement(C.G,{title:n,code:i,setCode:s,isLoading:m,description:k,errorMessage:p,onSubmit:b,bottomContent:v,entity:O})})),A=n(499),M=Object(m.a)(["loginVerification"])((function(e){var t=e.t,n=e.isLoading,a=e.isAuthenticatingOTP,r=e.authenticatorCode,o=e.setAuthenticatorCode,c=e.phoneOTPCode,i=e.setPhoneOTPCode,s=e.backupCode,u=e.setBackupCode,m=e.onSubmitAuthenticator,p=e.onSubmitBackupCode,b=e.onSubmitPhoneOTP,d=e.onClickAlternativeMethod,h=e.onSelectAlternativeMethod,O=e.onSubmitAlternativeMethod,f=e.selectedAlternativeMethod,E=e.authenticatorError,v=e.phoneOTPError,C=e.backupCodeError,g=e.currentPage,j=e.alternativeMethods,T=e.onClickRequestAssistance,_=e.otpCountTime,w=e.onOTPRequest,P=e.phoneNumber,M=e.entity,I=l.a.createElement("span",{className:"color-primary font-weight-bold clickable-text",onClick:d},t("haveTrouble")),R=l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"color-charcoal"},t("requestAssistanceTitle")),l.a.createElement("span",{onClick:T,className:"color-primary font-weight-bold clickable-text"},t("requestAssistance")));switch(g){case A.b.alternative_choice:return l.a.createElement(N,{options:j,selectedMethod:f,onSelectMethod:h,onSubmitMethod:O,bottomContent:R,entity:M});case A.b.backup_code:return l.a.createElement(y,{backupCode:s,setBackupCode:u,onSubmitBackupCode:p,errorMessage:C,isLoading:n,bottomContent:R,entity:M});case A.b.phone_number:return l.a.createElement(x,{title:t("phoneNumberTitle"),phoneNumber:P,countTime:_,otpToken:c,setOtpToken:i,onSubmitOTP:b,authenticationErrorMessage:v,isAuthenticatingOTP:a,onOTPRequest:w,onClickRequestAssistance:T,isAlternativeMethod:!0,entity:M});case A.b.authenticator:default:return l.a.createElement(S,{code:r,setCode:o,onSubmit:m,isLoading:n,bottomContent:I,errorMessage:E,onClickAlternativeMethod:Object(k.isEmpty)(j)?T:d,entity:M})}})),I=Object(m.a)(["loginVerification"])((function(e){var t=e.t,n=e.onClickHome,a=e.entity;return l.a.createElement(C.W,{title:t("wereLookingIntoIt"),entity:a},l.a.createElement("div",null,l.a.createElement("p",{className:"color-charcoal"},t("assistanceDescription")),l.a.createElement(P.a,{i18nKey:"assistanceAction"},l.a.createElement("p",{className:"color-charcoal"},"For quick assistance,"," ",l.a.createElement("span",{onClick:function(){window.$zopim.livechat.window.show()},className:"text-primary clickable-text"},"click here")," ","to chat with us."))),l.a.createElement(T.a,{block:!0,variant:"primary",customCss:"action-button mt-3",onClick:n},t("Home")))}));t.default=Object(p.o)(Object(m.a)(["loginVerification","errorMessages","commonWords"])((function(e){var t=e.t,n=e.location.state,r=n.mfaType,m=n.email,p=n.password,b=n.canvasHash,h=n.isPhoneNumberVerified,k=n.userId,C=n.from,S=e.apiCall,g=S.axiosGet,j=S.axiosPost,T=S.axiosPatch,_=e.history,w=e.setEnvironment,N=e.cookies,y=e.entity,P=Object(A.a)(t),R=Object(u.useState)(""),L=Object(s.a)(R,2),q=L[0],D=L[1],W=Object(u.useState)(""),B=Object(s.a)(W,2),H=B[0],V=B[1],G=Object(u.useState)(0),U=Object(s.a)(G,2),J=U[0],K=U[1],F=Object(u.useState)(!1),X=Object(s.a)(F,2),Z=X[0],z=X[1],Q=Object(u.useState)(!1),Y=Object(s.a)(Q,2),$=Y[0],ee=Y[1],te=Object(u.useState)(""),ne=Object(s.a)(te,2),ae=ne[0],re=ne[1],oe=Object(u.useState)(""),ce=Object(s.a)(oe,2),ie=ce[0],se=ce[1],ue=Object(u.useState)(A.b.authenticator),le=Object(s.a)(ue,2),me=le[0],pe=le[1],be=Object(u.useState)(""),de=Object(s.a)(be,2),he=de[0],Oe=de[1],fe=Object(u.useState)([]),Ee=Object(s.a)(fe,2),ve=Ee[0],ke=Ee[1],Ce=Object(u.useState)(""),Se=Object(s.a)(Ce,2),ge=Se[0],je=Se[1],Te=Object(u.useState)(""),_e=Object(s.a)(Te,2),we=_e[0],Ne=_e[1],ye=Object(u.useState)(""),Pe=Object(s.a)(ye,2),xe=Pe[0],Ae=Pe[1],Me=Object(u.useState)(""),Ie=Object(s.a)(Me,2),Re=Ie[0],Le=Ie[1],qe=Object(u.useState)(!1),De=Object(s.a)(qe,2),We=De[0],Be=De[1],He=Object(u.useState)(!1),Ve=Object(s.a)(He,2),Ge=Ve[0],Ue=Ve[1];Object(u.useEffect)((function(){Je()}),[]),Object(u.useEffect)((function(){r!==A.h.phone_number&&me!==A.b.phone_number||0===J&&Fe()}),[]),Object(f.a)((function(){0!==J&&K(J-1)}),1e3);var Je=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,Ke();case 3:e.sent&&t.push(P.backup_code),h&&t.push(P.phone_number),d()(t)||(ke((function(e){return[].concat(Object(c.a)(e),t)})),je(t[0].value));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(A.d.CHECK_USER_BACKUP_CODE(k));case 2:return t=e.sent,e.abrupt("return",t.is_exist);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(i.a)(o.a.mark((function e(){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z){e.next=2;break}return e.abrupt("return");case 2:return z(!0),re(""),e.next=6,j(A.d.SMS_OTP_LOGIN,{email:m},{},{"x-confirmation-password":p});case 6:if(n=e.sent,z(!1),!n.error_code){e.next=12;break}return a=Object(E.f)(n.error_code,t,{action:O()(t("requestNewOTP"))}),re(a),e.abrupt("return");case 12:D(n.phone_number),K(A.c);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(i.a)(o.a.mark((function e(){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee(!0),se(""),e.next=4,j(A.d.AUTHORIZE_OTP_LOGIN,{email:m,password:p,canvas_hash:b,otp_token:H});case 4:if(n=e.sent,V(""),!n.error_code){e.next=11;break}return a=Object(E.f)(n.error_code,t,{action:O()(t("commonWords:submit"))}),se(a),ee(!1),e.abrupt("return");case 11:$e(n);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ze=function(){Oe(""),pe(A.b.alternative_choice)},ze=function(){pe(ge)},Qe=function(){var e=Object(i.a)(o.a.mark((function e(){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ue(!0),n={email:m,password:p,canvas_hash:b,auth_token:he},Oe(""),e.next=5,j(A.d.AUTHORIZE_AUTHENTICATOR_LOGIN,n);case 5:if(a=e.sent,Ue(!1),!a.error_code){e.next=11;break}return r=Object(E.f)(a.error_code,t,{action:O()(t("commonWords:submit"))}),Ae(r),e.abrupt("return");case 11:$e(a);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ye=function(){var e=Object(i.a)(o.a.mark((function e(){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ue(!0),n={email:m,password:p,canvas_hash:b,backup_code:we},Ne(""),e.next=5,T(A.d.MFA_BACKUP_CODE,n);case 5:if(a=e.sent,Ue(!1),!a.error_code){e.next=11;break}return r=Object(E.f)(a.error_code,t,{action:O()(t("commonWords:submit"))}),Le(r),e.abrupt("return");case 11:$e(a);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$e=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.user.is_password_expired?(localStorage.setItem("is_password_expired","true"),_.push(A.i.EXPIRED_PASSWORD)):et(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),et=function(e){var t=e.user.is_password_expired,n=e.business.email.split("@")[1],a=A.g.includes(n);if(a&&tt("businessId",e.business.id),t)localStorage.setItem("is_password_expired","true"),_.push(A.i.EXPIRED_PASSWORD);else{var r="LIVE"===e.business.go_live_status||"TIER_1"===e.business.go_live_status?"PRODUCTION":"DEVELOPMENT";w(r),N.set(A.e,r,{path:"/",maxAge:v.ONE_DAY_IN_SECONDS}),N.set(A.f,a,{path:"/"}),localStorage.setItem("user",JSON.stringify(e.user)),localStorage.setItem("business",JSON.stringify(e.business)),N.set("SHOW_POST_LOGIN",!0),localStorage.setItem("WHITELIST_REMINDED_BUSINESSES",JSON.stringify([])),_.push(C)}},tt=function(e,t){window.dataLayer=window.dataLayer||[],window.dataLayer.push(Object(a.a)({},e,t))},nt=function(){Be(!0),at()},at=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(A.d.REQUEST_ASSISTANCE,{email:m});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),rt=function(){_.push(A.i.LOGIN)};return We?l.a.createElement(I,{onClickHome:rt,entity:y}):function(e){switch(e){case A.h.phone_number:return l.a.createElement(x,{countTime:J,onOTPRequest:Fe,otpRequestErrorMessage:ae,phoneNumber:q,otpToken:H,setOtpToken:V,isAuthenticatingOTP:$,authenticationErrorMessage:ie,onSubmitOTP:Xe,onClickRequestAssistance:nt,entity:y});case A.h.authenticator:default:return l.a.createElement(M,{currentPage:me,authenticatorCode:he,setAuthenticatorCode:Oe,onSubmitAuthenticator:Qe,phoneOTPCode:H,setPhoneOTPCode:V,onSubmitPhoneOTP:Xe,backupCode:we,setBackupCode:Ne,onSubmitBackupCode:Ye,onClickAlternativeMethod:Ze,alternativeMethods:ve,onSelectAlternativeMethod:function(e){return je(e)},onSubmitAlternativeMethod:ze,selectedAlternativeMethod:ge,onClickRequestAssistance:nt,isLoading:Ge,authenticatorError:xe,phoneOTPError:ie,backupCodeError:Re,otpCountTime:J,onOTPRequest:Fe,isAuthenticatingOTP:$,phoneNumber:q,entity:y})}}(r)})))},1867:function(e,t,n){}}]);