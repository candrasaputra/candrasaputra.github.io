(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[80],{1532:function(t,e,a){"use strict";a.r(e);var r=a(9),n=a.n(r),i=a(19),c=a(3),s=a(12),o=a(0),l=a.n(o),d=a(380),u=a(27),m=a(26),b=a(167),_=a(48),p=a(468),f=a(189),j=a(293),O=a(80),h=a(479),y=a.n(h),E=Object(d.a)("fraudGuard")((function(t){var e=t.setActiveTab,a=t.activeTab,r=t.t,n=[{title:r("summary")},{title:r("list")}];return l.a.createElement(y.a,{tabs:n,changeActiveTab:e,activeTab:a,customCss:"page-tab-container"})})),v=a(1573),g=a(476),x=a(475),L={CHARGED:"CHARGED",SETTLING:"CHARGED",SETTLED:"SETTLED",FAILED:"FAILED",REFUNDED:"REFUNDED"},k={ip_block_list:"IP Block List",bin_block_list:"BIN Block List",credit_card_number_block_list:"Credit Card Number Block List",country_block_list:"Country Block List",ip_allow_list:"IP Allow List",bin_allow_list:"BIN Allow List",credit_card_number_allow_list:"Credit Card Number Allow List",country_allow_list:"Country Allow List"},C=a(290),w=a.n(C),S=a(1575),D=a.n(S),F=a(288),T=a.n(F),A=Object(d.a)(["fraudGuard","commonComponents"])((function(t){var e=t.creditCardTransactions,a=t.onDetailsClicked,r=t.onClickLoadMore,n=t.withLoadMore,i=t.isLoading,c=t.loadingText,s=t.errorMessage,o=t.emptyCaption,d=t.emptySubtitle,m=t.dataFromDepositService,_=t.t,p=i.transactions,j=i.refetch,h=[{dataField:"statusLabelText",text:_("status"),formatter:function(t){return t===b.t.SETTLED?l.a.createElement(D.a,{variant:"success",text:T()(b.t.SETTLED.toLowerCase())}):t===b.t.CHARGED||t===b.t.SETTLING?l.a.createElement(D.a,{variant:"success",text:T()(b.t.CHARGED.toLowerCase())}):t===b.t.REFUNDED?l.a.createElement(D.a,{text:T()(b.t.REFUNDED.toLowerCase())}):l.a.createElement(D.a,{variant:"danger",text:T()(b.t.FAILED.toLowerCase())})},headerStyle:{width:"15%"}},{dataField:"formattedNetAmount",text:_("amount"),headerStyle:{width:"15%"}},{dataField:"riskScoreValue",text:_("risk"),headerStyle:{width:"10%"}},{dataField:"externalId",text:_("reference"),type:"text",headerStyle:{width:"30%"}},{dataField:"cardNumberValue",text:_("card"),headerStyle:{width:"15%"}},{dataField:"formattedCreatedDate",text:_("dateCreated"),type:"text",headerStyle:{width:"20%"}}],y=e.map((function(t){var e,a=t.id,r=t.currency,n=t.net_amount,i=t.risk_level,c=t.masked_card_number,s=t.card_brand,o=t.external_id,d=t.created,u=t.status,_=t.dashboard_status,p=t.authorized_amount,j=t.capture_amount,O=m?u:_,h=O===b.t.FAILED,y=L[O];e=m?n:h?p:j;var E=Object(v.b)(e,r),k=function(t){var e=b.p[t],a=e===b.p.normal,r=e===b.p.medium;return{riskScoreLabelColor:a?"risk-score-green":r?"risk-score-orange":"risk-score-red",riskLevelAssessed:e}}(i),C=l.a.createElement("div",{className:"d-flex align-items-center justify-content-center ".concat(k.riskScoreLabelColor)},k.riskLevelAssessed),w=Object(x.b)(s),S=Object(x.a)(s),D=w&&l.a.createElement("img",{className:"card-brand-logo mr-3",src:"/images/card-brands-logos/".concat(S,".png"),alt:S}),F=c&&Object(g.a)(c);return{id:a,statusLabelText:y,formattedNetAmount:E,riskScoreValue:C,cardNumberValue:l.a.createElement("div",{className:"d-flex align-items-center color-inherit"},D,F),externalId:o,formattedCreatedDate:Object(f.h)(d)}})),E=l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:"text-md font-weight-bold"},_("activity")),l.a.createElement("p",{className:"mb-0 pb-4 border-bottom"},_("fraudGuardSummaryDescription")));return l.a.createElement(O.z,{isLoading:p,loadingText:c,isError:!Object(u.isEmpty)(s),errorText:s,isEmpty:Object(u.isEmpty)(e),emptyCaption:o,emptySubtitle:d},E,l.a.createElement(w.a,{noBorder:!0,isClickable:!0,tableHeaderColumns:h,tableContentRows:y,onDetailsClicked:a,onClickLoadMore:r,withLoadMore:n,isLoadingMore:j,loadMoreText:_("commonComponents:tableMore")}))})),G=Object(d.a)("fraudGuard")((function(t){var e=t.list,a=t.isAllowList,r=t.isLoading,n=t.errorMessage,i=t.onDetailsClicked,c=t.t,s=[{dataField:"nameValue",text:c("name"),headerStyle:{width:"30%"}},{dataField:"itemsCount",text:c("items"),headerStyle:{width:"15%"}},{dataField:"lastUpdated",text:c("lastUpdated"),headerStyle:{width:"55%"}}],o=e.map((function(t){var e=t.name,a=t.items_count,r=t.last_updated;return{name:e,nameValue:k[e],itemsCount:a,lastUpdated:r}})),d=c(a?"allowList":"blockList"),m=c(a?"allowListDescription":"blockListDescription"),b=c(a?"loadingAllowFraudList":"loadingBlockFraudList"),_=l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:"text-md font-weight-bold"},d),l.a.createElement("p",{className:"mb-0 pb-4 border-bottom"},m));return l.a.createElement(O.z,{isLoading:r,loadingText:b,isError:!Object(u.isEmpty)(n),errorText:n},_,l.a.createElement(w.a,{noBorder:!0,isClickable:!0,tableHeaderColumns:s,tableContentRows:o,onDetailsClicked:i}))})),N=_.c.TODAY,M=_.c.LAST_1_WEEK;e.default=Object(d.a)(["fraudGuard","creditCardErrorMessages","errorMessages"])((function(t){var e=t.business,a=t.history,r=t.location,d=t.apiCall,_=t.environment,h=t.t,y=e.id,v=e.environment,g=e.country_of_operation,x=r.state?r.state.selectedTabIndex:0,L="Indonesia"===g,k=Object(j.c)(_,v),C=Object(o.useState)(0),w=Object(s.a)(C,2),S=w[0],D=w[1],F=Object(o.useState)([]),T=Object(s.a)(F,2),I=T[0],R=T[1],B=Object(o.useState)({transactions:!1,refetch:!1}),U=Object(s.a)(B,2),H=U[0],P=U[1],V=Object(o.useState)(""),z=Object(s.a)(V,2),J=z[0],K=z[1],W=Object(o.useState)(0),Y=Object(s.a)(W,2),$=Y[0],q=Y[1],Q=Object(o.useState)(!1),X=Object(s.a)(Q,2),Z=X[0],tt=X[1],et=Object(o.useState)(""),at=Object(s.a)(et,2),rt=at[0],nt=at[1],it=Object(o.useState)([]),ct=Object(s.a)(it,2),st=ct[0],ot=ct[1],lt=Object(o.useState)([]),dt=Object(s.a)(lt,2),ut=dt[0],mt=dt[1],bt=Object(o.useState)(!1),_t=Object(s.a)(bt,2),pt=_t[0],ft=_t[1],jt=Object(o.useState)(""),Ot=Object(s.a)(jt,2),ht=Ot[0],yt=Ot[1],Et=Object(o.useState)(!1),vt=Object(s.a)(Et,2),gt=vt[0],xt=vt[1];Object(o.useEffect)((function(){D(x),Lt(),Ct()}),[_]);var Lt=function(){P((function(t){return Object(c.a)(Object(c.a)({},t),{},{transactions:!0})}));var t={environment:k,name:"cardsT4Migration"},e={key:y};Object(j.a)(t,e,(function(t){var e=!t&&L;xt(e),kt(e)}))},kt=function(){var t=Object(i.a)(n.a.mark((function t(e){var a,r,i,s,o=arguments;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>1&&void 0!==o[1]&&o[1],r={from:M,to:N,last_id:a?J:void 0,is_high_risk_transaction:!0,offset:$},nt(""),!a&&P((function(t){return Object(c.a)(Object(c.a)({},t),{},{transactions:!0})})),t.prev=4,s=e?b.d.ccCharge:b.d.ccChargeFromCcService,t.next=8,d.axiosGet(s,r);case 8:if(!(i=t.sent).error_code){t.next=11;break}throw i;case 11:t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(4),nt(Object(p.b)(t.t0.error_code,h)),P((function(t){return Object(c.a)(Object(c.a)({},t),{},{transactions:!1})})),t.abrupt("return");case 18:e&&K(i.has_next&&Object(u.last)(i.docs).id),q(i.has_next&&$+b.i),tt(i.has_next),a?(R((function(t){return t.concat(i.docs)})),P((function(t){return Object(c.a)(Object(c.a)({},t),{},{refetch:!1})}))):R(i.docs),P((function(t){return Object(c.a)(Object(c.a)({},t),{},{transactions:!1})}));case 23:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e){return t.apply(this,arguments)}}(),Ct=function(){var t=Object(i.a)(n.a.mark((function t(){var e,a,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ft(!0),t.prev=1,t.next=4,d.axiosGet(b.d.customFraudRules);case 4:if(e=t.sent,a=e.blocked_list,r=e.allowed_list,!e.error_code){t.next=8;break}throw e;case 8:St(a,r),wt(),t.next=17;break;case 12:return t.prev=12,t.t0=t.catch(1),yt(Object(p.b)(t.t0.error_code,h)),ft(!1),t.abrupt("return");case 17:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(){return t.apply(this,arguments)}}(),wt=function(){var t=Object(i.a)(n.a.mark((function t(){var e;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.axiosGet(b.d.ccSettingsLogger);case 3:if(!(e=t.sent).error_code){t.next=6;break}throw e;case 6:Dt(e),t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),yt(Object(p.b)(t.t0.error_code,h)),t.abrupt("return");case 13:ft(!1);case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),St=function(t,e){var a=t.ip,r=t.bin,n=t.card_data,i=t.bin_country,c=e.ip,s=e.bin,o=e.card_data,l=e.bin_country;ot([{name:"ip_block_list",items_count:a.length},{name:"bin_block_list",items_count:r.length},{name:"credit_card_number_block_list",items_count:n.length},{name:"country_block_list",items_count:i.length}]),mt([{name:"ip_allow_list",items_count:c.length},{name:"bin_allow_list",items_count:s.length},{name:"credit_card_number_allow_list",items_count:o.length},{name:"country_allow_list",items_count:l.length}])},Dt=function(t){var e=t.ip_blocked_list,a=t.ip_allowed_list,r=t.bin_blocked_list,n=t.bin_allowed_list,i=t.card_blocked_list,s=t.card_allowed_list,o=t.bin_country_blocked_list,l=t.bin_country_allowed_list;ot((function(t){return[Object(c.a)(Object(c.a)({},t[0]),{},{last_updated:Object(u.isEmpty)(e)?"-":Object(f.h)(e.last_update_history_item.timestamp),last_updated_by:Object(u.isEmpty)(e)?"-":e.last_update_history_item.email}),Object(c.a)(Object(c.a)({},t[1]),{},{last_updated:Object(u.isEmpty)(r)?"-":Object(f.h)(r.last_update_history_item.timestamp),last_updated_by:Object(u.isEmpty)(r)?"-":r.last_update_history_item.email}),Object(c.a)(Object(c.a)({},t[2]),{},{last_updated:Object(u.isEmpty)(i)?"-":Object(f.h)(i.last_update_history_item.timestamp),last_updated_by:Object(u.isEmpty)(i)?"-":i.last_update_history_item.email}),Object(c.a)(Object(c.a)({},t[3]),{},{last_updated:Object(u.isEmpty)(o)?"-":Object(f.h)(o.last_update_history_item.timestamp),last_updated_by:Object(u.isEmpty)(o)?"-":o.last_update_history_item.email})]})),mt((function(t){return[Object(c.a)(Object(c.a)({},t[0]),{},{last_updated:Object(u.isEmpty)(a)?"-":Object(f.h)(a.last_update_history_item.timestamp),last_updated_by:Object(u.isEmpty)(a)?"-":a.last_update_history_item.email}),Object(c.a)(Object(c.a)({},t[1]),{},{last_updated:Object(u.isEmpty)(n)?"-":Object(f.h)(n.last_update_history_item.timestamp),last_updated_by:Object(u.isEmpty)(n)?"-":n.last_update_history_item.email}),Object(c.a)(Object(c.a)({},t[2]),{},{last_updated:Object(u.isEmpty)(s)?"-":Object(f.h)(s.last_update_history_item.timestamp),last_updated_by:Object(u.isEmpty)(s)?"-":s.last_update_history_item.email}),Object(c.a)(Object(c.a)({},t[3]),{},{last_updated:Object(u.isEmpty)(l)?"-":Object(f.h)(l.last_update_history_item.timestamp),last_updated_by:Object(u.isEmpty)(l)?"-":l.last_update_history_item.email})]}))},Ft=function(t){var e=t.name;a.push({pathname:b.e.fraudGuardList(e)})},Tt=l.a.createElement(A,{creditCardTransactions:I,onDetailsClicked:function(t){var e=t.id;a.push({pathname:b.e.ccChargeDetails(e),state:{isFromFraudGuard:!0}})},onClickLoadMore:function(){P((function(t){return Object(c.a)(Object(c.a)({},t),{},{refetch:!0})})),kt(gt,!0)},withLoadMore:Z,isLoading:H,loadingText:h("loadingFraudGuardSummary"),errorMessage:rt,emptyCaption:h("emptyFraudGuardSummaryCaption"),emptySubtitle:h("emptyFraudGuardSummarySubtitle"),dataFromDepositService:gt}),At=l.a.createElement(G,{list:ut,isAllowList:!0,isLoading:pt,errorMessage:ht,onDetailsClicked:Ft}),Gt=l.a.createElement(G,{list:st,isAllowList:!1,isLoading:pt,errorMessage:ht,onDetailsClicked:Ft}),Nt=l.a.createElement(l.a.Fragment,null,l.a.createElement(O.E,{infoPanel:!0,icon:m.z,text:h("fraudGuardListInfo"),bordered:!0,customCss:"mt-4"}),At,Gt);return l.a.createElement(l.a.Fragment,null,l.a.createElement(E,{setActiveTab:D,activeTab:S}),0===S&&Tt,1===S&&Nt)}))},1573:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"d",(function(){return n})),a.d(e,"b",(function(){return c})),a.d(e,"c",(function(){return s})),a.d(e,"e",(function(){return o}));var r=function(t,e){return"IDR"!==e&&e?t.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"):t.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")},n=function(t){return t.toLocaleString("en-US").replace(/,/g,".")},i=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.toLocaleString("en-US",{minimumFractionDigits:e?2:0})},c=function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=i(t,r),c="IDR"===e?n.replace(/,/g,"."):n,s=a?"".concat(e," "):"",o="".concat(s).concat(c);return o},s=function(t,e,a){var r=e?c(t,e):i(t),n=r.split("-").join(""),s="".concat((null!=a?a:t>0)?"+ ":"- "," ").concat(n);return 0===t&&(s=r),s},o=function(t){return"".concat((100*t).toFixed(2),"%")}},1575:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=s(a(0)),n=s(a(2)),i=s(a(6)),c=s(a(1576));function s(t){return t&&t.__esModule?t:{default:t}}function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a(1577);var l=function(t){var e,a=t.text,n=t.iconLeft,s=t.customCss,l=t.variant,d=(0,i.default)((o(e={"status-pill":!0},"status-pill-".concat(l),l),o(e,s,s),e));return r.default.createElement(c.default,{text:a,iconLeft:n,customCss:d})};l.propTypes={text:n.default.string,iconLeft:n.default.any,variant:n.default.oneOf(["success","danger","warning","first-level","second-level"]),customCss:n.default.string};var d=l;e.default=d},1576:function(t,e,a){Object.defineProperty(e,"__esModule",{value:!0}),t.exports=a(467)},1577:function(t,e,a){}}]);