(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[64],{1483:function(e,t,a){"use strict";a.r(t);var r=a(81),n=a(9),c=a.n(n),o=a(3),i=a(19),s=a(12),l=a(0),u=a.n(l),d=a(31),m=a.n(d),b=a(380),f=a(27),p=a(1598),h=a.n(p),O=a(468),C=a(189),j=a(293),E=a(473),S=a(48),g=a(167),x=[g.t.SETTLED,g.t.SETTLING,g.t.CHARGED,g.t.PENDING,g.t.REFUNDED,g.t.FAILED],D=[g.b.VISA,g.b.MASTERCARD,g.a.AMERICAN_EXPRESS,g.a.AMEX,g.b.DISCOVER,g.b.JCB,g.b.VISA_ELECTRON,g.b.DANKORT,g.b.MAESTRO,g.b.GPN,g.b.BCA,g.b.UNKNOWN],T=[{title:"Status",children:[{type:"SETTLED",label:"Settled",group:"status"},{type:"CHARGED",label:"Charged",group:"status"},{type:"REFUNDED",label:"Refunded",group:"status"},{type:"FAILED",label:"Failed",group:"status"}]}],w=[{title:"Scheme",children:[{type:"VISA",label:"Visa",group:"scheme"},{type:"MASTERCARD",label:"Mastercard",group:"scheme"},{type:"AMERICAN-EXPRESS",label:"Amex",group:"scheme"},{type:"DISCOVER",label:"Discover",group:"scheme"},{type:"JCB",label:"JCB",group:"scheme"},{type:"VISA-ELECTRON",label:"Visa Electron",group:"scheme"},{type:"DANKORT",label:"Dankort",group:"scheme"},{type:"MAESTRO",label:"Maestro",group:"scheme"},{type:"GPN",label:"GPN",group:"scheme"},{type:"BCA",label:"BCA",group:"scheme"},{type:"UNKNOWN",label:"Unknown",group:"scheme"}]}],y=[{title:"Details",children:[{type:"INSTALLMENT",label:"Installment",group:"chargeDetails"},{type:"PROMOTION",label:"Promotion",group:"chargeDetails"}]}],v=function(e){return{width:"5%",items:[{field:"externalId",text:e("commonWords:copyReference"),textPressed:e("commonWords:valueCopied"),action:"copy"}]}},_=function(e){return[{dataField:"statusLabelValue",text:e("status"),type:"text",headerStyle:{width:"15%"}},{dataField:"formattedAmount",text:e("amount"),type:"text",headerStyle:{width:"20%"}},{dataField:"externalId",text:e("reference"),type:"text",headerStyle:{width:"30%"}},{dataField:"cardNumberValue",text:e("card"),type:"text",headerStyle:{width:"15%"}},{dataField:"formattedCreatedDate",text:e("dateCreated"),type:"text",headerStyle:{width:"20%"}}]},F=a(80),k=a(479),N=a.n(k),A=Object(b.a)("creditCard")((function(e){var t=e.setActiveTab,a=e.activeTab,r=e.isFacilitator,n=e.t,c=[{title:n("charges")},{title:n("cards")},{title:n("3dsecure")},{title:n("authorizations")},{title:n("refunds")}];return r||c.push({title:n("settlements")}),u.a.createElement(N.a,{tabs:c,changeActiveTab:t,activeTab:a,scrollable:!0,customCss:"page-tab-container"})})),L=a(1583),R=a.n(L),I=a(151),M=a.n(I),P=a(1573),G=a(476),V=a(475),U=a(1575),Q=a.n(U),H=a(288),z=a.n(H),B=function(e,t,a){var r,n=e.id,c=e.status,o=e.created,i=e.external_id,s=e.net_amount,l=e.currency,d=e.card_brand,m=e.masked_card_number,b=e.failure_reason,f=e.authorized_amount,p=e.captured_amount,h=(e.vat_amount,e.fee_amount,e.dashboard_status),O=t?c:h,j=O===g.t.FAILED,E=function(e,t,a){switch(e){case g.t.SETTLED:return u.a.createElement(Q.a,{variant:"success",text:z()(g.t.SETTLED.toLowerCase())});case g.t.CHARGED:case g.t.PENDING:case g.t.SETTLING:return u.a.createElement(Q.a,{variant:"success",text:z()(g.t.CHARGED.toLowerCase())});case g.t.REFUNDED:return u.a.createElement(Q.a,{text:z()(g.t.REFUNDED.toLowerCase())});default:return u.a.createElement(M.a,{placement:"right",content:a("".concat(t,"_TITLE"))},u.a.createElement("span",null,u.a.createElement(Q.a,{variant:"danger",text:z()(g.t.FAILED.toLowerCase())})))}}(g.t[O],b,a),S=Object(C.h)(o);r=t?s:j?f:p;var x=Object(P.b)(r,l),D=m&&Object(G.a)(m),T=Object(V.b)(d),w=Object(V.a)(d),y=T&&u.a.createElement("img",{className:"card-brand-logo mr-3",src:"/images/card-brands-logos/".concat(w,".png"),alt:w});return{id:n,statusLabelValue:E,formattedCreatedDate:S,externalId:i,formattedAmount:x,cardNumberValue:u.a.createElement("div",{className:"d-flex align-items-center color-inherit"},y,D)}},q=a(24),J=a(37),W=a(26),Y=a(20),Z=a.n(Y),X=(a(2062),function(e){var t=e.creditCardTransactions,a=e.dataFromDepositService,r=e.onDetailsClicked,n=e.onClickLoadMore,c=e.withLoadMore,o=e.isLoading,i=e.errorMessage,s=e.searchQuery,l=e.handleSearch,d=e.fromDateTime,m=e.toDateTime,b=e.dateFormat,p=e.handleChangeDate,h=e.isFilterOpen,O=e.groupFilterItems,C=(e.appliedGroupFilterItems,e.updateFilter),j=e.applyFilter,E=e.clearAllFilter,g=e.toggleFilter,x=e.onExportCSVClicked,D=e.isExporting,k=e.canUseAutoReconciliation,N=e.openAutoReconciliationModal,A=e.t,L={value:s,onChange:l,tooltip:A("searchbarTooltip"),tooltipPlacement:"bottom",placeholder:A("searchbarPlaceholder"),position:"inline",customCss:"filter-item"},I={start:new Date(d),end:new Date(m),inputFormat:b.date_time_picker,outputFormat:S.a.GMT_MS_Z,onChange:p,customCss:"filter-item"},M={isClickable:!0,tableHeaderColumns:_(A),tableContentRows:t&&t.length?t.map((function(e){return B(e,a,A)})):[],onClickLoadMore:n,withLoadMore:c,loadMoreText:A("commonComponents:tableMore"),isLoadingMore:o.refetch,isLoading:o.transactions,isError:!Object(f.isEmpty)(i),isEmpty:Object(f.isEmpty)(t),loadingText:A("loadingPayment"),errorContent:u.a.createElement(F.t,{text:i}),emptyContent:u.a.createElement(F.r,{caption:A("emptyPaymentCaption"),subtitle:A("emptyPaymentSubtitle")}),onDetailsClicked:r,actionButtonConfig:v(A),rowClasses:"table-row-vertical-align-middle table-clickable-row"},P=function(e,t,a,r,n,c,o,i){var s=Object.keys(t).reduce((function(e,a){return e.concat(t[a])}),[]),l=[].concat(Object(q.a)(T),Object(q.a)(w),Object(q.a)(y)),d=u.a.createElement(F.x,{selectedFilters:s,filterGroups:l,onChecked:r,onApplyFilter:n,onCheckAll:c,withCheckAll:!0,handleToggleFilter:o,withGrouping:!0,expandType:"horizontal"});return[u.a.createElement(F.q,{displayText:"Filter",children:[d],customCss:{padding:"px-2 pt-2 pb-0"},customHandleToggle:o,customDropdownOpen:e,onClickEvent:!0,onMouseEvent:!1})]}(h,O,0,C,j,E,g),G=function(e,t,a,r){var n=u.a.createElement(Z.a,{customCss:"offset-xl-1 align-self-end",iconLeft:u.a.createElement(J.a,{icon:W.p}),size:"sm",onClick:function(){e()},isLoading:t},"CSV");return[a&&u.a.createElement(Z.a,{customCss:"offset-xl-1 align-self-end",size:"sm",onClick:r},"Reconciliation"),n]}(x,D,k,N);return u.a.createElement(R.a,{filters:P,stickyHeader:!0,searchBarConfig:L,dateFilterConfig:I,tableConfig:M,rightButtons:G})});X.defaultProps={dateFormat:{},isLoading:{}};var K=Object(b.a)(["creditCard","commonComponents"])(X),$=a(49),ee=a.n($),te=Object(b.a)(["creditCard","commonWords"])((function(e){var t=e.showModal,a=e.handleClose,r=e.handleSubmit,n=e.handleChangeDate,c=e.handleClearUpload,o=e.handleFileChange,i=e.reportUpload,l=e.reportUploadError,d=e.reportFromDate,m=e.reportToDate,b=e.dateFormat,p=e.isLoading,h=e.t,O=u.a.createElement(u.a.Fragment,null,u.a.createElement("label",{className:"text-body-2 font-weight-bold mt-2"},h("uploadYourReport")),u.a.createElement(F.v,{name:"reconciliationReport",accept:".csv",customCss:"cb-file-uploader ".concat(i.name&&!l?"cb-file-uploaded":""," ").concat(l?"cb-file-upload-error":""),content:function(e){var t=e?"/images/icons/file-icon-blue.svg":"/images/icons/file-icon-grey.svg";return u.a.createElement("div",{className:"file-upload-content-section"},u.a.createElement("div",{className:"clear-file-section"},u.a.createElement(Z.a,{onClick:c,variant:"secondary",customCss:"cb-close-button",isDisabled:Object(f.isEmpty)(i)},u.a.createElement("div",{className:"cb-close-button-text"},u.a.createElement("img",{src:"/images/icons/x-icon.svg",alt:"x-icon"}),u.a.createElement("span",{className:"color-ash-dark"},h("commonWords:clear"))))),!l&&u.a.createElement("div",{className:"bd-file-icon-container"},u.a.createElement("img",{src:t,alt:"bd-file-icon",className:"bd-file-icon"})),e?u.a.createElement("p",{className:"font-weight-bold m-0"},e):u.a.createElement("p",{className:"font-weight-bold m-0 text-center"},h("reportUploaderInstruction")))}(i.name),uploadFunction:function(e){return Object(s.a)(e,1)[0]},onFileChange:function(e){e&&o(e)}})),C=u.a.createElement(u.a.Fragment,null,u.a.createElement("label",{className:"text-body-2 font-weight-bold mt-4"},h("dateRange")),u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement(F.m,{date:!0,onChange:function(e){return n("reportFromDate",e)},value:new Date(d),inputFormat:b.date_time_picker,outputFormat:S.a.GMT_MS_Z,noShadow:!0,customCss:"w-40",max:new Date(m)}),u.a.createElement("div",{class:"date-divider px-2"},"-"),u.a.createElement(F.m,{date:!0,onChange:function(e){return n("reportToDate",e)},value:new Date(m),inputFormat:b.date_time_picker,outputFormat:S.a.GMT_MS_Z,noShadow:!0,customCss:"w-40",min:new Date(d)}))),j=u.a.createElement("div",{className:"text-left"},u.a.createElement(F.gb,null,O,C)),E=u.a.createElement(Z.a,{size:"md",type:"submit",isDisabled:Object(f.isEmpty)(i),isLoading:p,onClick:r},h("commonWords:submit"));return u.a.createElement(ee.a,{showModal:t,handleClose:a,title:h("reconciliation"),children:j,footer:E,size:"sm"})})),ae=[g.x.SETTLED,g.x.PENDING],re=[{children:[{type:"SETTLED",label:"Settled"},{type:"PENDING",label:"Pending"}]}],ne=function(e){switch(e){case g.x.PENDING:return u.a.createElement(Q.a,{text:z()(g.x.PENDING.toLowerCase())});default:return u.a.createElement(Q.a,{variant:"success",text:z()(g.x.SETTLED.toLowerCase())})}},ce=function(e,t){var a=e.id,r=e.external_id,n=e.currency,c=e.card_brand,o=e.masked_card_number,i=e.captured_amount,s=e.vat_amount,l=e.fee_amount,d=e.total_refund_amount,m=e.total_refund_fee_amount,b=e.settlement_status,f=e.settlement_date,p=function(e){switch(e){case g.x.PENDING:return u.a.createElement(Q.a,{text:z()(g.x.PENDING.toLowerCase())});default:return u.a.createElement(Q.a,{variant:"success",text:z()(g.x.SETTLED.toLowerCase())})}}(g.x[b]),h=Object(C.h)(f),O=i-((l||0)+(s||0))-((d||0)-(m||0)),j=Object(P.b)(O,n),E=o&&Object(G.a)(o),S=Object(V.b)(c),x=Object(V.a)(c),D=S&&u.a.createElement("img",{className:"card-brand-logo mr-3",src:"/images/card-brands-logos/".concat(x,".png"),alt:x});return{id:a,statusLabelValue:p,formattedCreatedDate:h,externalId:r,formattedAmount:j,cardNumberValue:u.a.createElement("div",{className:"d-flex align-items-center color-inherit"},D,E)}},oe=function(e){var t=e.t,a=e.fromDateTime,r=e.toDateTime,n=e.dateFormat,c=e.handleChangeDate,o=e.creditCardSettlements,i=e.onClickLoadMore,s=e.withLoadMore,l=e.isLoading,d=e.errorMessage,m=e.onDetailsClicked,b=e.statusFilter,p=e.updateStatusFilter,h=e.onCheckAllStatusFilter,O=e.statusFilterGroups,j=e.searchQuery,E=e.handleSearch,x=e.dataFromDepositService,D=!x&&{value:j,onChange:E,tooltip:t("searchbarTooltip"),placeholder:t("searchbarPlaceholder"),position:"inline",customCss:"filter-item"},T={start:new Date(a),end:new Date(r),inputFormat:n.date_time_picker,outputFormat:S.a.GMT_MS_Z,onChange:c,customCss:"filter-item"},w=o.map((function(e){return x?function(e){var t=e.id,a=e.status,r=e.settlement_date,n=e.total_gross_amount,c=e.total_fee_amount,o=e.total_refunded_amount,i=e.total_settled_amount,s=g.x[a],l=Object(C.h)(r),d=Object(P.c)(n,"IDR"),m=Object(P.c)(c,"IDR",!1),b=Object(P.c)(o,"IDR",!1),f=Object(P.c)(i,"IDR"),p=n>0?"color-success":"",h=c>0?"color-danger":"",O=o>0?"color-danger":"",j=i>0?"color-success":"";return{id:t,statusLabelText:s,formattedSettlementDate:l,totalGrossValue:u.a.createElement("span",{className:p},d),totalFeesValue:u.a.createElement("span",{className:h},m),totalRefundValue:u.a.createElement("span",{className:O},b),totalSettledValue:u.a.createElement("span",{className:j},f)}}(e):ce(e)})),y={isClickable:!0,tableHeaderColumns:x?function(e){return[{dataField:"statusLabelText",text:e("status"),formatter:ne,headerStyle:{width:"20%"}},{dataField:"formattedSettlementDate",text:e("settlementDate"),type:"text",headerStyle:{width:"20%"}},{dataField:"totalGrossValue",text:e("grossInRupiah"),headerStyle:{width:"15%"}},{dataField:"totalFeesValue",text:e("feesInRupiah"),headerStyle:{width:"15%"}},{dataField:"totalRefundValue",text:e("refundsInRupiah"),headerStyle:{width:"15%"}},{dataField:"totalSettledValue",text:e("settledInRupiah"),headerStyle:{width:"15%"}}]}(t):function(e){return[{dataField:"statusLabelValue",text:e("status"),headerStyle:{width:"15%"}},{dataField:"formattedAmount",text:e("amount"),headerStyle:{width:"20%"}},{dataField:"externalId",text:e("reference"),headerStyle:{width:"30%"}},{dataField:"cardNumberValue",text:e("card"),headerStyle:{width:"15%"}},{dataField:"formattedCreatedDate",text:e("dateCreated"),headerStyle:{width:"20%"}}]}(t),tableContentRows:(null===o||void 0===o?void 0:o.length)?w:[],onClickLoadMore:i,withLoadMore:s,loadMoreText:t("commonComponents:tableMore"),isLoadingMore:l.refetch,isLoading:l.settlements,isError:!Object(f.isEmpty)(d),isEmpty:Object(f.isEmpty)(o),loadingText:t("loadingSettlement"),errorContent:u.a.createElement(F.t,{text:d}),emptyContent:u.a.createElement(F.r,{caption:t("emptySettlementCaption"),subtitle:t("emptySettlementSubtitle")}),onDetailsClicked:m,rowClasses:"table-row-vertical-align-middle table-clickable-row"},v=function(e,t,a,r,n){var c=u.a.createElement(F.w,{selectedFilters:e,onChecked:t,onCheckAll:a,filterGroups:r,withCheckAll:!0,withGrouping:!1});return[u.a.createElement(F.q,{displayText:n("status"),children:[c]})]}(b,p,h,O,t);return u.a.createElement(R.a,{filters:v,stickyHeader:!0,searchBarConfig:D,dateFilterConfig:T,tableConfig:y})};oe.defaultProps={dateFormat:{},isLoading:{}};var ie=Object(b.a)(["creditCard","commonComponents"])(oe),se=S.c.TODAY,le=S.c.LAST_1_MONTH,ue=Object(b.a)(["creditCard","creditCardErrorMessages","errorMessages"])((function(e){var t=e.business,a=e.history,r=e.apiCall,n=e.environment,d=e.t,b=e.dateFormat,p=t.id,S=t.environment,x="Indonesia"===t.country_of_operation,D=Object(j.c)(n,S),T=Object(l.useState)([]),w=Object(s.a)(T,2),y=w[0],v=w[1],_=Object(l.useState)({settlements:!1,refetch:!1}),F=Object(s.a)(_,2),k=F[0],N=F[1],A=Object(l.useState)(ae),L=Object(s.a)(A,2),R=L[0],I=L[1],M=Object(l.useState)(le),P=Object(s.a)(M,2),G=P[0],V=P[1],U=Object(l.useState)(se),Q=Object(s.a)(U,2),H=Q[0],z=Q[1],B=Object(l.useState)(""),J=Object(s.a)(B,2),W=J[0],Y=J[1],Z=Object(l.useState)(null),X=Object(s.a)(Z,2),K=X[0],$=X[1],ee=Object(l.useState)(""),te=Object(s.a)(ee,2),ne=te[0],ce=te[1],oe=Object(l.useState)(0),ue=Object(s.a)(oe,2),de=ue[0],me=ue[1],be=Object(l.useState)(""),fe=Object(s.a)(be,2),pe=fe[0],he=fe[1],Oe=Object(l.useState)(!1),Ce=Object(s.a)(Oe,2),je=Ce[0],Ee=Ce[1],Se=Object(l.useState)(!1),ge=Object(s.a)(Se,2),xe=ge[0],De=ge[1],Te=Object(l.useState)(!1),we=Object(s.a)(Te,2),ye=we[0],ve=we[1];Object(l.useEffect)((function(){_e()}),[n]),Object(l.useEffect)((function(){xe&&ke(R,G,H,W,ye),De(!1)}),[R,G,H]),Object(l.useEffect)((function(){clearTimeout(K),$(setTimeout((function(){(!W||W.length>2)&&xe&&ke(R,G,H,W,ye)}),500)),De(!1)}),[W]);var _e=function(){N((function(e){return Object(o.a)(Object(o.a)({},e),{},{settlements:!0})}));var e={environment:D,name:"cardsT4Migration"},t={key:p};Object(j.a)(e,t,(function(e){var t=!e&&x;ve(t),Fe(t)}))},Fe=function(){var e=Object(i.a)(c.a.mark((function e(t){var r,n,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.location.state&&a.location.state.isFromDetailsPage,n=a.location.state&&a.location.state.isFromSettlementsTab,e.next=4,h.a.getItem("LAST_CC_SETTLEMENT_TRANSACTIONS");case 4:if(i=e.sent,!r&&!n||Object(f.isNull)(i)){e.next=21;break}return s=JSON.parse(i),ce(s.lastId),me(s.offsetForPagination),Ee(s.hasNext),Y(s.searchQuery),I(s.statusFilter),V(m()(s.fromDateTime).utc().format()),z(m()(s.toDateTime).utc().format()),v(s.creditCardSettlements),N((function(e){return Object(o.a)(Object(o.a)({},e),{},{settlements:!1})})),a.replace({pathname:a.location.pathname,state:{}}),e.next=19,h.a.removeItem("LAST_CC_SETTLEMENT_TRANSACTIONS");case 19:e.next=22;break;case 21:ke(R,G,H,W,t);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(i.a)(c.a.mark((function e(t,a,n,i,s){var l,u,m,b,p,h,C,j=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=j.length>5&&void 0!==j[5]&&j[5],u=ae.filter((function(e){return!t.includes(e)})),m={filter_status:u||ae,from:a,to:n,last_id:l?ne:void 0},i&&(delete m.from,delete m.to,m.search_query=i),b=Object(o.a)(Object(o.a)({},m),{},{offset:de}),he(""),!l&&N((function(e){return Object(o.a)(Object(o.a)({},e),{},{settlements:!0})})),e.prev=7,h=s?g.d.ccSettlement:g.d.ccSettlementFromCcService,C=s?m:b,e.next=12,r.axiosGet(h,C);case 12:if(!(p=e.sent).error_code){e.next=15;break}throw p;case 15:e.next=24;break;case 17:if(e.prev=17,e.t0=e.catch(7),e.t0.error_code!==E.a.REQUEST_ABORTED){e.next=21;break}return e.abrupt("return");case 21:return he(Object(O.b)(e.t0.error_code,d)),N((function(e){return Object(o.a)(Object(o.a)({},e),{},{settlements:!1})})),e.abrupt("return");case 24:s&&ce(p.has_next&&Object(f.last)(p.docs).id),me(p.has_next&&de+g.i),Ee(p.has_next),l?(v((function(e){return e.concat(p.docs)})),N((function(e){return Object(o.a)(Object(o.a)({},e),{},{refetch:!1})}))):v(p.docs),N((function(e){return Object(o.a)(Object(o.a)({},e),{},{settlements:!1})}));case 29:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(t,a,r,n,c){return e.apply(this,arguments)}}(),Ne=function(){h.a.setItem("LAST_CC_SETTLEMENT_TRANSACTIONS",JSON.stringify({lastId:ne,offsetForPagination:de,hasNext:je,statusFilter:R,fromDateTime:G,toDateTime:H,creditCardSettlements:y,searchQuery:W}))};return u.a.createElement(ie,{fromDateTime:G,toDateTime:H,dateFormat:b,handleChangeDate:function(e,t){switch(Y(""),me(0),e){case"start":V(new Date(Object(C.l)(t,"from")));break;case"end":z(new Date(Object(C.l)(t,"to")))}De(!0)},creditCardSettlements:y,onClickLoadMore:function(){N((function(e){return Object(o.a)(Object(o.a)({},e),{},{refetch:!0})})),ke(R,G,H,W,ye,!0)},withLoadMore:je,isLoading:k,errorMessage:pe,onDetailsClicked:ye?function(e){var t=e.id;Ne(),a.replace({pathname:a.location.pathname,state:{isFromDetailsPage:!0}}),a.push({pathname:g.e.ccSettlementDetails(t)})}:function(e){var t=e.id;Ne(),a.push({pathname:g.e.ccChargeDetails(t),state:{isFromSettlementsTab:!0}})},statusFilter:R,updateStatusFilter:function(e){var t=R.includes(e),a=Object(q.a)(R);t?a=a.filter((function(t){return t!==e})):a.push(e),me(0),I(a),De(!0)},onCheckAllStatusFilter:function(){var e=Object(q.a)(R);e=0===e.length?ae:[],me(0),I(e),De(!0)},statusFilterGroups:re,searchQuery:W,handleSearch:function(e){e.preventDefault(),me(0),Y(e.target.value),De(!0)},dataFromDepositService:ye})})),de=function(e){return[{dataField:"cardNumberValue",text:e("card"),type:"text",headerStyle:{width:"25%"}},{dataField:"countryValue",text:e("country"),headerStyle:{width:"20%"}},{dataField:"expDateValue",text:e("expDate"),type:"text",headerStyle:{width:"15%"}},{dataField:"cardTypeValue",text:e("type"),headerStyle:{width:"15%"}},{dataField:"formattedCreatedDate",text:e("dateCreated"),type:"text",headerStyle:{width:"25%"}}]},me=function(e){var t=e.searchQuery,a=e.handleSearch,r=e.t,n=e.fromDateTime,c=e.toDateTime,o=e.dateFormat,i=e.handleChangeDate,s=e.creditCardTokens,l=e.onClickLoadMore,d=e.withLoadMore,m=e.isLoading,b=e.errorMessage,p=e.onDetailsClicked,h=e.onExportCSVClicked,O=e.isExporting,j={isClickable:!0,tableHeaderColumns:de(r),tableContentRows:s&&s.length?s.map((function(e){return function(e){var t=e.card_brand,a=e.card_expiration_month,r=e.card_expiration_year,n=e.card_type,c=e.country,o=e.country_code,i=e.created,s=e.id,l=e.masked_card_number,d=l&&Object(G.a)(l),m=Object(V.b)(t),b=Object(V.a)(t),f=m&&u.a.createElement("img",{className:"card-brand-logo mr-3",src:"/images/card-brands-logos/".concat(b,".png"),alt:b}),p=u.a.createElement("div",{className:"d-flex align-items-center color-inherit"},f,d),h=Object(C.h)(i),O=Object(V.b)(o),j=Object(V.b)(c),E=O&&u.a.createElement("img",{className:"card-country-icon mr-3",src:"https://country-flags-images.s3.amazonaws.com/flags/".concat(o.toLowerCase(),".svg"),alt:c}),S=c&&c.toLowerCase(),g=j?u.a.createElement("div",{className:"d-flex align-items-center"},E,u.a.createElement("span",{className:"text-capitalize"},S)):"-",x=n&&n.toLowerCase(),D=u.a.createElement("span",{className:"text-capitalize"},x),T=r&&r.slice(-2);return{id:s,cardNumberValue:p,formattedCreatedDate:h,countryValue:g,expDateValue:a&&r?a+" / "+T:"-",cardTypeValue:D}}(e)})):[],onClickLoadMore:l,withLoadMore:d,loadMoreText:r("commonComponents:tableMore"),isLoadingMore:m.refetch,isLoading:m.tokens,isError:!Object(f.isEmpty)(b),isEmpty:Object(f.isEmpty)(s),loadingText:r("loadingToken"),errorContent:u.a.createElement(F.t,{text:b}),emptyContent:u.a.createElement(F.r,{caption:r("emptyTokenCaption"),subtitle:r("emptyPaymentSubtitle")}),onDetailsClicked:p,rowClasses:"table-row-vertical-align-middle table-clickable-row"},E={start:new Date(n),end:new Date(c),inputFormat:o.date_time_picker,outputFormat:S.a.GMT_MS_Z,onChange:i,customCss:"filter-item"},g={value:t,onChange:a,tooltip:r("tokenSearchbarTooltip"),tooltipPlacement:"bottom",placeholder:r("searchbarPlaceholder"),position:"inline",customCss:"filter-item"},x=u.a.createElement(Z.a,{customCss:"offset-xl-1 align-self-end",iconLeft:u.a.createElement(J.a,{icon:W.p}),size:"sm",onClick:function(){h()},isLoading:O},"CSV");return u.a.createElement(R.a,{stickyHeader:!0,searchBarConfig:g,dateFilterConfig:E,tableConfig:j,rightButtons:[x]})};me.defaultProps={dateFormat:{},isLoading:{}};var be=Object(b.a)(["creditCard","commonComponents"])(me),fe=S.c.TODAY,pe=S.c.LAST_1_MONTH,he=Object(b.a)(["creditCard","creditCardErrorMessages","errorMessages","commonComponents"])((function(e){var t=e.user,a=e.history,r=e.apiCall,n=e.environment,d=e.t,b=e.dateFormat,p=t.email,j=Object(l.useState)([]),S=Object(s.a)(j,2),x=S[0],D=S[1],T=Object(l.useState)({tokens:!1,refetch:!1}),w=Object(s.a)(T,2),y=w[0],v=w[1],_=Object(l.useState)(pe),k=Object(s.a)(_,2),N=k[0],A=k[1],L=Object(l.useState)(fe),R=Object(s.a)(L,2),I=R[0],M=R[1],P=Object(l.useState)(""),G=Object(s.a)(P,2),V=G[0],U=G[1],Q=Object(l.useState)(null),H=Object(s.a)(Q,2),z=H[0],B=H[1],q=Object(l.useState)(""),J=Object(s.a)(q,2),W=J[0],Y=J[1],Z=Object(l.useState)(""),X=Object(s.a)(Z,2),K=X[0],$=X[1],ee=Object(l.useState)(!1),te=Object(s.a)(ee,2),ae=te[0],re=te[1],ne=Object(l.useState)(!1),ce=Object(s.a)(ne,2),oe=ce[0],ie=ce[1],se=Object(l.useState)(!1),le=Object(s.a)(se,2),ue=le[0],de=le[1],me=Object(l.useState)(!1),he=Object(s.a)(me,2),Oe=he[0],Ce=he[1],je=Object(l.useState)({title:"",description:""}),Ee=Object(s.a)(je,2),Se=Ee[0],ge=Ee[1],xe=Object(l.useState)(!1),De=Object(s.a)(xe,2),Te=De[0],we=De[1];Object(l.useEffect)((function(){ye()}),[n]),Object(l.useEffect)((function(){Te&&ve(N,I,V),we(!1)}),[N,I]),Object(l.useEffect)((function(){clearTimeout(z),B(setTimeout((function(){null!==z&&(!V||V.length>2)&&Te&&ve(N,I,V)}),500)),we(!1)}),[V]);var ye=function(){var e=Object(i.a)(c.a.mark((function e(){var t,r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.location.state&&a.location.state.isFromDetailsPage,v((function(e){return Object(o.a)(Object(o.a)({},e),{},{tokens:!0})})),e.next=4,h.a.getItem("LAST_CC_TOKENS_TRANSACTIONS");case 4:if(r=e.sent,!t||Object(f.isNull)(r)){e.next=19;break}return n=JSON.parse(r),Y(n.lastId),re(n.hasNext),U(n.searchQuery),A(m()(n.fromDateTime).utc().format()),M(m()(n.toDateTime).utc().format()),D(n.creditCardTokens),v((function(e){return Object(o.a)(Object(o.a)({},e),{},{tokens:!1})})),a.replace({pathname:a.location.pathname,state:{}}),e.next=17,h.a.removeItem("LAST_CC_TOKENS_TRANSACTIONS");case 17:e.next=20;break;case 19:ve(N,I,V);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=Object(i.a)(c.a.mark((function e(t,a,n){var i,s,l,u=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>3&&void 0!==u[3]&&u[3],s={from:t,to:a,last_id:i?W:void 0},n&&(delete s.from,delete s.to,s.search_query=n),$(""),!i&&v((function(e){return Object(o.a)(Object(o.a)({},e),{},{tokens:!0})})),e.prev=5,e.next=8,r.axiosGet(g.d.ccToken,s);case 8:if(!(l=e.sent).error_code){e.next=11;break}throw l;case 11:e.next=20;break;case 13:if(e.prev=13,e.t0=e.catch(5),e.t0.error_code!==E.a.REQUEST_ABORTED){e.next=17;break}return e.abrupt("return");case 17:return $(Object(O.b)(e.t0.error_code,d)),v((function(e){return Object(o.a)(Object(o.a)({},e),{},{tokens:!1})})),e.abrupt("return");case 20:Y(l.has_next&&Object(f.last)(l.docs).id),re(l.has_next),i?(D((function(e){return e.concat(l.docs)})),v((function(e){return Object(o.a)(Object(o.a)({},e),{},{refetch:!1})}))):D(l.docs),v((function(e){return Object(o.a)(Object(o.a)({},e),{},{tokens:!1})}));case 24:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,a,r){return e.apply(this,arguments)}}(),_e=function(){h.a.setItem("LAST_CC_TOKENS_TRANSACTIONS",JSON.stringify({lastId:W,hasNext:ae,searchQuery:V,fromDateTime:N,toDateTime:I,creditCardTokens:x}))},Fe=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de(!1),Ce(!0),ge({title:"",description:""}),t={from:N,to:I,user_offset:m()().utcOffset()},V&&(t.search_query=V.trim()),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"export-credit-card-report",label:"Export CSV - Credit Cards"}),e.prev=7,e.next=10,r.axiosPost(g.d.ccTokenReport,t);case 10:if(a=e.sent,de(!0),!a.error_code){e.next=14;break}throw a;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(7),ge({title:Object(O.c)(e.t0.error_code,d),description:Object(O.b)(e.t0.error_code,d)}),de(!1);case 20:Ce(!1),ie(!0);case 22:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(){return e.apply(this,arguments)}}(),ke=ue?u.a.createElement(F.j,{type:"success",handleClose:function(){ie(!1)},title:d("commonComponents:exportStarted"),subtitle:d("commonComponents:exportSuccessInfo",{email:p}),showModal:oe}):u.a.createElement(F.j,{type:"danger",title:Se.title,subtitle:Se.description,handleClose:function(){ie(!1)},showModal:oe});return u.a.createElement(u.a.Fragment,null,u.a.createElement(be,{searchQuery:V,handleSearch:function(e){e.preventDefault(),U(e.target.value),we(!0)},fromDateTime:N,toDateTime:I,dateFormat:b,handleChangeDate:function(e,t){switch(U(""),e){case"start":A(new Date(Object(C.l)(t,"from")));break;case"end":M(new Date(Object(C.l)(t,"to")))}we(!0)},creditCardTokens:x,onClickLoadMore:function(){v((function(e){return Object(o.a)(Object(o.a)({},e),{},{refetch:!0})})),ve(N,I,V,!0)},withLoadMore:ae,isLoading:y,errorMessage:K,onDetailsClicked:function(e){var t=e.id;_e(),a.replace({pathname:a.location.pathname,state:{isFromDetailsPage:!0}}),a.push({pathname:g.e.ccTokenDetails(t)})},onExportCSVClicked:Fe,isExporting:Oe}),ke)})),Oe=[g.r.USED,g.r.VERIFIED,g.r.FAILED],Ce=[{children:[{type:"VERIFIED",label:"Verified"},{type:"FAILED",label:"Failed"}]}],je=function(e){switch(e){case g.r.VERIFIED:case g.r.USED:return u.a.createElement(Q.a,{variant:"success",text:z()(g.r.VERIFIED.toLowerCase())});default:return u.a.createElement(Q.a,{variant:"danger",text:z()(g.r.FAILED.toLowerCase())})}},Ee=function(e){return[{dataField:"statusLabelText",text:e("status"),formatter:je,headerStyle:{width:"15%"}},{dataField:"formattedAmount",text:e("amount"),type:"text",headerStyle:{width:"20%"}},{dataField:"eciCode",text:e("eciCode"),type:"text",headerStyle:{width:"10%"}},{dataField:"cardNumberValue",text:e("card"),headerStyle:{width:"15%"}},{dataField:"countryValue",text:e("country"),headerStyle:{width:"20%"}},{dataField:"formattedCreatedDate",text:e("dateCreated"),type:"text",headerStyle:{width:"20%"}}]},Se=function(e){var t=e.searchQuery,a=e.handleSearch,r=e.t,n=e.fromDateTime,c=e.toDateTime,o=e.dateFormat,i=e.handleChangeDate,s=e.creditCardAuthentications,l=e.onClickLoadMore,d=e.withLoadMore,m=e.isLoading,b=e.errorMessage,p=e.onDetailsClicked,h=e.statusFilter,O=e.updateStatusFilter,j=e.onCheckAllStatusFilter,E=e.statusFilterGroups,x=e.onExportCSVClicked,D=e.isExporting,T={value:t,onChange:a,tooltip:r("authenticationSearchbarTooltip"),tooltipPlacement:"bottom",placeholder:r("searchbarPlaceholder"),position:"inline",customCss:"filter-item"},w={start:new Date(n),end:new Date(c),inputFormat:o.date_time_picker,outputFormat:S.a.GMT_MS_Z,onChange:i,customCss:"filter-item"},y={isClickable:!0,tableHeaderColumns:Ee(r),tableContentRows:s&&s.length?s.map((function(e){return function(e){var t=e.id,a=e.status,r=e.created,n=e.eci_raw,c=e.card_brand,o=e.card_expiration_month,i=e.card_expiration_year,s=e.country,l=e.country_code,d=e.masked_card_number,m=e.amount,b=e.currency,f=g.r[a],p=Object(C.h)(r),h=n||"-",O=m?Object(P.b)(m,b):"-",j=d&&Object(G.a)(d),E=Object(V.b)(c),S=Object(V.a)(c),x=E&&u.a.createElement("img",{className:"card-brand-logo mr-3",src:"/images/card-brands-logos/".concat(S,".png"),alt:S}),D=d?u.a.createElement("div",{className:"d-flex align-items-center color-inherit"},x,j):"-",T=Object(V.b)(l),w=Object(V.b)(s),y=T&&u.a.createElement("img",{className:"card-country-icon mr-3",src:"https://country-flags-images.s3.amazonaws.com/flags/".concat(l.toLowerCase(),".svg"),alt:s}),v=s&&s.toLowerCase(),_=w?u.a.createElement("div",{className:"d-flex align-items-center text-capitalize color-inherit"},y,v):"-",F=i&&i.slice(-2);return{id:t,statusLabelText:f,formattedAmount:O,eciCode:h,cardNumberValue:D,countryValue:_,expDateValue:o&&i?o+" / "+F:"-",formattedCreatedDate:p}}(e)})):[],onClickLoadMore:l,withLoadMore:d,loadMoreText:r("commonComponents:tableMore"),isLoadingMore:m.refetch,isLoading:m.authentications,isError:!Object(f.isEmpty)(b),isEmpty:Object(f.isEmpty)(s),loadingText:r("loadingAuthentication"),errorContent:u.a.createElement(F.t,{text:b}),emptyContent:u.a.createElement(F.r,{caption:r("emptyAuthenticationCaption"),subtitle:r("emptyPaymentSubtitle")}),onDetailsClicked:p,rowClasses:"table-row-vertical-align-middle table-clickable-row"},v=function(e,t,a,r,n){var c=u.a.createElement(F.w,{selectedFilters:e,onChecked:t,onCheckAll:a,filterGroups:r,withCheckAll:!0,withGrouping:!1});return[u.a.createElement(F.q,{displayText:n("status"),children:[c]})]}(h,O,j,E,r),_=u.a.createElement(Z.a,{customCss:"offset-xl-1 align-self-end",iconLeft:u.a.createElement(J.a,{icon:W.p}),size:"sm",onClick:function(){x()},isLoading:D},"CSV");return u.a.createElement(R.a,{filters:v,stickyHeader:!0,searchBarConfig:T,dateFilterConfig:w,tableConfig:y,rightButtons:[_]})};Se.defaultProps={isLoading:{},dateFormat:{}};var ge=Object(b.a)(["creditCard","commonComponents"])(Se),xe=S.c.TODAY,De=S.c.LAST_1_MONTH,Te=Object(b.a)(["creditCard","creditCardErrorMessages","errorMessages","commonComponents"])((function(e){var t=e.user,a=e.history,r=e.apiCall,n=e.environment,d=e.t,b=e.dateFormat,p=t.email,j=Object(l.useState)([]),S=Object(s.a)(j,2),x=S[0],D=S[1],T=Object(l.useState)({authentications:!1,refetch:!1}),w=Object(s.a)(T,2),y=w[0],v=w[1],_=Object(l.useState)(Oe),k=Object(s.a)(_,2),N=k[0],A=k[1],L=Object(l.useState)(De),R=Object(s.a)(L,2),I=R[0],M=R[1],P=Object(l.useState)(xe),G=Object(s.a)(P,2),V=G[0],U=G[1],Q=Object(l.useState)(""),H=Object(s.a)(Q,2),z=H[0],B=H[1],J=Object(l.useState)(null),W=Object(s.a)(J,2),Y=W[0],Z=W[1],X=Object(l.useState)(""),K=Object(s.a)(X,2),$=K[0],ee=K[1],te=Object(l.useState)(""),ae=Object(s.a)(te,2),re=ae[0],ne=ae[1],ce=Object(l.useState)(!1),oe=Object(s.a)(ce,2),ie=oe[0],se=oe[1],le=Object(l.useState)(!1),ue=Object(s.a)(le,2),de=ue[0],me=ue[1],be=Object(l.useState)(!1),fe=Object(s.a)(be,2),pe=fe[0],he=fe[1],je=Object(l.useState)(!1),Ee=Object(s.a)(je,2),Se=Ee[0],Te=Ee[1],we=Object(l.useState)({title:"",description:""}),ye=Object(s.a)(we,2),ve=ye[0],_e=ye[1],Fe=Object(l.useState)(!1),ke=Object(s.a)(Fe,2),Ne=ke[0],Ae=ke[1];Object(l.useEffect)((function(){Le()}),[n]),Object(l.useEffect)((function(){Ne&&Re(N,I,V,z),Ae(!1)}),[N,I,V]),Object(l.useEffect)((function(){clearTimeout(Y),Z(setTimeout((function(){null!==Y&&(!z||z.length>2)&&Ne&&Re(N,I,V,z),Ae(!1)}),500))}),[z]);var Le=function(){var e=Object(i.a)(c.a.mark((function e(){var t,r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.location.state&&a.location.state.isFromDetailsPage,v((function(e){return Object(o.a)(Object(o.a)({},e),{},{authentications:!0})})),e.next=4,h.a.getItem("LAST_CC_AUTHENTICATION_TRANSACTIONS");case 4:if(r=e.sent,!t||Object(f.isNull)(r)){e.next=20;break}return n=JSON.parse(r),ee(n.lastId),se(n.hasNext),B(n.searchQuery),A(n.statusFilter),M(m()(n.fromDateTime).utc().format()),U(m()(n.toDateTime).utc().format()),D(n.creditCardAuthentications),v((function(e){return Object(o.a)(Object(o.a)({},e),{},{authentications:!1})})),a.replace({pathname:a.location.pathname,state:{}}),e.next=18,h.a.removeItem("LAST_CC_AUTHENTICATION_TRANSACTIONS");case 18:e.next=21;break;case 20:Re(N,I,V,z);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=Object(i.a)(c.a.mark((function e(t,a,n,i){var s,l,u,m,b=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=b.length>4&&void 0!==b[4]&&b[4],l=Oe.filter((function(e){return!t.includes(e)})),u={status:l||Oe,from:a,to:n,last_id:s?$:void 0},i&&(delete u.from,delete u.to,u.search_query=i),ne(""),!s&&v((function(e){return Object(o.a)(Object(o.a)({},e),{},{authentications:!0})})),e.prev=6,e.next=9,r.axiosGet(g.d.ccAuthentication,u);case 9:if(!(m=e.sent).error_code){e.next=12;break}throw m;case 12:e.next=21;break;case 14:if(e.prev=14,e.t0=e.catch(6),e.t0.error_code!==E.a.REQUEST_ABORTED){e.next=18;break}return e.abrupt("return");case 18:return ne(Object(O.b)(e.t0.error_code,d)),v((function(e){return Object(o.a)(Object(o.a)({},e),{},{authentications:!1})})),e.abrupt("return");case 21:ee(m.has_next&&Object(f.last)(m.docs).id),se(m.has_next),s?(D((function(e){return e.concat(m.docs)})),v((function(e){return Object(o.a)(Object(o.a)({},e),{},{refetch:!1})}))):D(m.docs),v((function(e){return Object(o.a)(Object(o.a)({},e),{},{authentications:!1})}));case 25:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,a,r,n){return e.apply(this,arguments)}}(),Ie=function(){h.a.setItem("LAST_CC_AUTHENTICATION_TRANSACTIONS",JSON.stringify({lastId:$,hasNext:ie,statusFilter:N,fromDateTime:I,toDateTime:V,creditCardAuthentications:x,searchQuery:z}))},Me=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return he(!1),Te(!0),_e({title:"",description:""}),t=Oe.filter((function(e){return!N.includes(e)})),a={status:t,from:I,to:V,user_offset:m()().utcOffset()},z&&(a.search_query=z.trim()),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"export-credit-card-report",label:"Export CSV - Credit Cards"}),e.prev=8,e.next=11,r.axiosPost(g.d.ccAuthenticationReport,a);case 11:if(!(n=e.sent).error_code){e.next=14;break}throw n;case 14:he(!0),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),_e({title:Object(O.c)(e.t0.error_code,d),description:Object(O.b)(e.t0.error_code,d)}),he(!1);case 21:Te(!1),me(!0);case 23:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(){return e.apply(this,arguments)}}(),Pe=pe?u.a.createElement(F.j,{type:"success",handleClose:function(){me(!1)},title:d("commonComponents:exportStarted"),subtitle:d("commonComponents:exportSuccessInfo",{email:p}),showModal:de}):u.a.createElement(F.j,{type:"danger",title:ve.title,subtitle:ve.description,handleClose:function(){me(!1)},showModal:de});return u.a.createElement(u.a.Fragment,null,u.a.createElement(ge,{searchQuery:z,handleSearch:function(e){e.preventDefault(),B(e.target.value),Ae(!0)},fromDateTime:I,toDateTime:V,dateFormat:b,handleChangeDate:function(e,t){switch(B(""),e){case"start":M(new Date(Object(C.l)(t,"from")));break;case"end":U(new Date(Object(C.l)(t,"to")))}Ae(!0)},creditCardAuthentications:x,onClickLoadMore:function(){v((function(e){return Object(o.a)(Object(o.a)({},e),{},{refetch:!0})})),Re(N,I,V,z,!0)},withLoadMore:ie,isLoading:y,errorMessage:re,onDetailsClicked:function(e){var t=e.id;Ie(),a.replace({pathname:a.location.pathname,state:{isFromDetailsPage:!0}}),a.push({pathname:g.e.ccAuthenticationDetails(t)})},statusFilter:N,updateStatusFilter:function(e){var t=N.includes(e),a=Object(q.a)(N);t?a=a.filter((function(t){return e===g.r.VERIFIED?t!==e&&t!==g.r.USED:t!==e})):e===g.r.VERIFIED?a.push(e,g.r.USED):a.push(e),A(a),Ae(!0)},onCheckAllStatusFilter:function(){var e=Object(q.a)(N);e=0===e.length?Oe:[],A(e),Ae(!0)},statusFilterGroups:Ce,onExportCSVClicked:Me,isExporting:Se}),Pe)})),we=[g.s.SUCCEEDED,g.s.FAILED,g.s.REVERSED],ye=[{children:[{type:"SUCCEEDED",label:"Succeeded"},{type:"FAILED",label:"Failed"},{type:"REVERSED",label:"Reversed"}]}],ve=function(e){return{width:"5%",items:[{field:"externalId",text:e("commonWords:copyReference"),textPressed:e("commonWords:valueCopied"),action:"copy"}]}},_e=function(e){switch(e){case g.s.SUCCEEDED:return u.a.createElement(Q.a,{variant:"success",text:z()(g.s.SUCCEEDED.toLowerCase())});case g.s.REVERSED:return u.a.createElement(Q.a,{text:z()(g.s.REVERSED.toLowerCase())});default:return u.a.createElement(Q.a,{variant:"danger",text:z()(g.s.FAILED.toLowerCase())})}},Fe=function(e){return[{dataField:"statusLabelText",text:e("status"),formatter:_e,headerStyle:{width:"15%"}},{dataField:"formattedAmount",text:e("amount"),type:"text",headerStyle:{width:"20%"}},{dataField:"externalId",text:e("reference"),type:"text",headerStyle:{width:"25%"}},{dataField:"cardNumberValue",text:e("card"),headerStyle:{width:"10%"}},{dataField:"expDateValue",text:e("expDate"),headerStyle:{width:"10%"}},{dataField:"formattedCreatedDate",text:e("dateCreated"),type:"text",headerStyle:{width:"20%"}}]},ke=function(e){var t=e.searchQuery,a=e.handleSearch,r=e.t,n=e.fromDateTime,c=e.toDateTime,o=e.dateFormat,i=e.handleChangeDate,s=e.creditCardAuthorizations,l=e.onClickLoadMore,d=e.withLoadMore,m=e.isLoading,b=e.errorMessage,p=e.onDetailsClicked,h=e.statusFilter,O=e.updateStatusFilter,j=e.onCheckAllStatusFilter,E=e.statusFilterGroups,x=e.onExportCSVClicked,D=e.isExporting,T={value:t,onChange:a,tooltip:r("authorizationSearchbarTooltip"),tooltipPlacement:"bottom",placeholder:r("searchbarPlaceholder"),position:"inline",customCss:"filter-item"},w={start:new Date(n),end:new Date(c),inputFormat:o.date_time_picker,outputFormat:S.a.GMT_MS_Z,onChange:i,customCss:"filter-item"},y={isClickable:!0,tableHeaderColumns:Fe(r),tableContentRows:s&&s.length?s.map((function(e){return function(e){var t=e.id,a=e.status,r=e.created,n=e.amount,c=e.currency,o=e.external_id,i=e.masked_card_data,s=i.account_number,l=i.exp_month,d=i.exp_year,m=e.card_brand,b=g.s[a],f=Object(C.h)(r),p=Object(P.b)(n,c),h=s&&Object(G.a)(s),O=Object(V.b)(m),j=Object(V.a)(m),E=O&&u.a.createElement("img",{className:"card-brand-logo mr-3",src:"/images/card-brands-logos/".concat(j,".png"),alt:j}),S=u.a.createElement("div",{className:"d-flex align-items-center color-inherit"},E,h),x=d&&d.slice(-2);return{id:t,statusLabelText:b,formattedAmount:p,externalId:o,cardNumberValue:S,expDateValue:l&&d?l+" / "+x:"-",formattedCreatedDate:f}}(e)})):[],onClickLoadMore:l,withLoadMore:d,loadMoreText:r("commonComponents:tableMore"),isLoadingMore:m.refetch,isLoading:m.authorizations,isError:!Object(f.isEmpty)(b),isEmpty:Object(f.isEmpty)(s),loadingText:r("loadingAuthorization"),errorContent:u.a.createElement(F.t,{text:b}),emptyContent:u.a.createElement(F.r,{caption:r("emptyAuthorizationCaption"),subtitle:r("emptyPaymentSubtitle")}),onDetailsClicked:p,actionButtonConfig:ve(r),rowClasses:"table-row-vertical-align-middle table-clickable-row"},v=function(e,t,a,r,n){var c=u.a.createElement(F.w,{selectedFilters:e,onChecked:t,onCheckAll:a,filterGroups:r,withCheckAll:!0,withGrouping:!1});return[u.a.createElement(F.q,{displayText:n("status"),children:[c]})]}(h,O,j,E,r),_=u.a.createElement(Z.a,{customCss:"offset-xl-1 align-self-end",iconLeft:u.a.createElement(J.a,{icon:W.p}),size:"sm",onClick:function(){x()},isLoading:D},"CSV");return u.a.createElement(R.a,{filters:v,stickyHeader:!0,searchBarConfig:T,dateFilterConfig:w,tableConfig:y,rightButtons:[_]})};ke.defaultProps={dateFormat:{},isLoading:{}};var Ne=Object(b.a)(["creditCard","commonComponents"])(ke),Ae=S.c.TODAY,Le=S.c.LAST_1_MONTH,Re=Object(b.a)(["creditCard","creditCardErrorMessages","errorMessages","commonComponents"])((function(e){var t=e.user,a=e.history,r=e.apiCall,n=e.environment,d=e.t,b=e.dateFormat,p=t.email,j=Object(l.useState)([]),S=Object(s.a)(j,2),x=S[0],D=S[1],T=Object(l.useState)({authorizations:!1,refetch:!1}),w=Object(s.a)(T,2),y=w[0],v=w[1],_=Object(l.useState)(we),k=Object(s.a)(_,2),N=k[0],A=k[1],L=Object(l.useState)(Le),R=Object(s.a)(L,2),I=R[0],M=R[1],P=Object(l.useState)(Ae),G=Object(s.a)(P,2),V=G[0],U=G[1],Q=Object(l.useState)(""),H=Object(s.a)(Q,2),z=H[0],B=H[1],J=Object(l.useState)(null),W=Object(s.a)(J,2),Y=W[0],Z=W[1],X=Object(l.useState)(""),K=Object(s.a)(X,2),$=K[0],ee=K[1],te=Object(l.useState)(""),ae=Object(s.a)(te,2),re=ae[0],ne=ae[1],ce=Object(l.useState)(!1),oe=Object(s.a)(ce,2),ie=oe[0],se=oe[1],le=Object(l.useState)(!1),ue=Object(s.a)(le,2),de=ue[0],me=ue[1],be=Object(l.useState)(!1),fe=Object(s.a)(be,2),pe=fe[0],he=fe[1],Oe=Object(l.useState)(!1),Ce=Object(s.a)(Oe,2),je=Ce[0],Ee=Ce[1],Se=Object(l.useState)({title:"",description:""}),ge=Object(s.a)(Se,2),xe=ge[0],De=ge[1],Te=Object(l.useState)(!1),ve=Object(s.a)(Te,2),_e=ve[0],Fe=ve[1];Object(l.useEffect)((function(){ke()}),[n]),Object(l.useEffect)((function(){_e&&Re(N,I,V,z),Fe(!1)}),[N,I,V]),Object(l.useEffect)((function(){clearTimeout(Y),Z(setTimeout((function(){null!==Y&&(!z||z.length>2)&&_e&&Re(N,I,V,z)}),400)),Fe(!1)}),[z]);var ke=function(){var e=Object(i.a)(c.a.mark((function e(){var t,r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.location.state&&a.location.state.isFromDetailsPage,v((function(e){return Object(o.a)(Object(o.a)({},e),{},{authorizations:!0})})),e.next=4,h.a.getItem("LAST_CC_AUTHORIZATION_TRANSACTIONS");case 4:r=e.sent,t&&!Object(f.isNull)(r)?(n=JSON.parse(r),ee(n.lastId),se(n.hasNext),B(n.searchQuery),A(n.statusFilter),M(m()(n.fromDateTime).utc().format()),U(m()(n.toDateTime).utc().format()),D(n.creditCardAuthorizations),v((function(e){return Object(o.a)(Object(o.a)({},e),{},{authorizations:!1})})),a.replace({pathname:a.location.pathname,state:{}})):Re(N,I,V,z);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Re=function(){var e=Object(i.a)(c.a.mark((function e(t,a,n,i){var s,l,u,d,m=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=m.length>4&&void 0!==m[4]&&m[4],l=we.filter((function(e){return!t.includes(e)})),u={status:l||we,from:a,to:n,last_id:s?$:void 0},i&&(delete u.from,delete u.to,u.search_query=i),ne(""),!s&&v((function(e){return Object(o.a)(Object(o.a)({},e),{},{authorizations:!0})})),e.prev=6,e.next=9,r.axiosGet(g.d.ccAuthorization,u);case 9:if(!(d=e.sent).error_code){e.next=12;break}throw d;case 12:e.next=21;break;case 14:if(e.prev=14,e.t0=e.catch(6),e.t0.error_code!==E.a.REQUEST_ABORTED){e.next=18;break}return e.abrupt("return");case 18:return ne(e.t0.error_code),v((function(e){return Object(o.a)(Object(o.a)({},e),{},{authorizations:!1})})),e.abrupt("return");case 21:ee(d.has_next&&Object(f.last)(d.docs).id),se(d.has_next),s?(D((function(e){return e.concat(d.docs)})),v((function(e){return Object(o.a)(Object(o.a)({},e),{},{refetch:!1})}))):D(d.docs),v((function(e){return Object(o.a)(Object(o.a)({},e),{},{authorizations:!1})}));case 25:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,a,r,n){return e.apply(this,arguments)}}(),Ie=function(){h.a.setItem("LAST_CC_AUTHORIZATION_TRANSACTIONS",JSON.stringify({lastId:$,hasNext:ie,statusFilter:N,fromDateTime:I,toDateTime:V,creditCardAuthorizations:x,searchQuery:z}))},Me=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return he(!1),Ee(!0),De({title:"",description:""}),t=we.filter((function(e){return!N.includes(e)})),a={status:t,from:I,to:V,user_offset:m()().utcOffset()},z&&(a.search_query=z.trim()),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"export-credit-card-report",label:"Export CSV - Credit Cards"}),e.prev=8,e.next=11,r.axiosPost(g.d.ccAuthorizationReport,a);case 11:if(!(n=e.sent).error_code){e.next=14;break}throw n;case 14:he(!0),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),De({title:Object(O.c)(e.t0.error_code,d),description:Object(O.b)(e.t0.error_code,d)}),he(!1);case 21:Ee(!1),me(!0);case 23:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(){return e.apply(this,arguments)}}(),Pe=pe?u.a.createElement(F.j,{type:"success",handleClose:function(){me(!1)},title:d("commonComponents:exportStarted"),subtitle:d("commonComponents:exportSuccessInfo",{email:p}),showModal:de}):u.a.createElement(F.j,{type:"danger",title:xe.title,subtitle:xe.description,handleClose:function(){me(!1)},showModal:de});return u.a.createElement(u.a.Fragment,null,u.a.createElement(Ne,{searchQuery:z,handleSearch:function(e){e.preventDefault(),B(e.target.value),Fe(!0)},fromDateTime:I,toDateTime:V,dateFormat:b,handleChangeDate:function(e,t){switch(B(""),e){case"start":M(new Date(Object(C.l)(t,"from")));break;case"end":U(new Date(Object(C.l)(t,"to")))}Fe(!0)},creditCardAuthorizations:x,onClickLoadMore:function(){v((function(e){return Object(o.a)(Object(o.a)({},e),{},{refetch:!0})})),Re(N,I,V,z,!0)},withLoadMore:ie,isLoading:y,errorMessage:re,onDetailsClicked:function(e){var t=e.id;Ie(),a.replace({pathname:a.location.pathname,state:{isFromDetailsPage:!0}}),a.push({pathname:g.e.ccAuthorizationDetails(t)})},statusFilter:N,updateStatusFilter:function(e){var t=N.includes(e),a=Object(q.a)(N);t?a=a.filter((function(t){return t!==e})):a.push(e),A(a),Fe(!0)},onCheckAllStatusFilter:function(){var e=Object(q.a)(N);e=0===e.length?we:[],A(e),Fe(!0)},statusFilterGroups:ye,onExportCSVClicked:Me,isExporting:je}),Pe)})),Ie=[g.w.SUCCEEDED,g.w.REQUESTED,g.w.FAILED,g.w.PENDING,g.w.CYBERSOURCE_ERROR,g.w.PROCESSOR_ERROR],Me=[{children:[{type:"REQUESTED",label:"Requested"},{type:"FAILED",label:"Failed"}]}],Pe=function(e){switch(e){case g.w.SUCCEEDED:return u.a.createElement(Q.a,{variant:"success",text:z()(g.w.REQUESTED.toLowerCase())});default:return u.a.createElement(Q.a,{variant:"danger",text:z()(g.w.FAILED.toLowerCase())})}},Ge=function(e){return[{dataField:"statusLabelText",text:e("status"),formatter:Pe,headerStyle:{width:"15%"}},{dataField:"formattedAmount",text:e("amount"),type:"text",headerStyle:{width:"15%"}},{dataField:"chargeId",text:e("chargeId"),type:"text",headerStyle:{width:"25%"}},{dataField:"merchantReferenceCode",text:e("merchantReferenceCode"),headerStyle:{width:"25%"}},{dataField:"formattedCreatedDate",text:e("dateCreated"),type:"text",headerStyle:{width:"20%"}}]},Ve=function(e){var t=e.searchQuery,a=e.handleSearch,r=e.t,n=e.fromDateTime,c=e.toDateTime,o=e.dateFormat,i=e.handleChangeDate,s=e.creditCardRefunds,l=e.onClickLoadMore,d=e.withLoadMore,m=e.isLoading,b=e.errorMessage,p=e.onDetailsClicked,h=e.statusFilter,O=e.updateStatusFilter,j=e.onCheckAllStatusFilter,E=e.statusFilterGroups,x={value:t,onChange:a,tooltip:r("refundSearchbarTooltip"),tooltipPlacement:"bottom",placeholder:r("searchbarPlaceholder"),position:"inline",customCss:"filter-item"},D={start:new Date(n),end:new Date(c),inputFormat:o.date_time_picker,outputFormat:S.a.GMT_MS_Z,onChange:i,customCss:"filter-item"},T={isClickable:!0,tableHeaderColumns:Ge(r),tableContentRows:s&&s.length?s.map((function(e){return function(e){var t=e.id,a=e.status,r=e.amount,n=e.currency,c=e.created,o=e.credit_card_charge_id,i=e.merchant_reference_code,s=g.w[a],l=Object(C.h)(c);return{id:t,statusLabelText:s,formattedAmount:Object(P.b)(r,n),chargeId:o,merchantReferenceCode:i,formattedCreatedDate:l}}(e)})):[],onClickLoadMore:l,withLoadMore:d,loadMoreText:r("commonComponents:tableMore"),isLoadingMore:m.refetch,isLoading:m.refunds,isError:!Object(f.isEmpty)(b),isEmpty:Object(f.isEmpty)(s),loadingText:r("loadingRefund"),errorContent:u.a.createElement(F.t,{text:b}),emptyContent:u.a.createElement(F.r,{caption:r("emptyRefundCaption"),subtitle:r("emptyPaymentSubtitle")}),onDetailsClicked:p,rowClasses:"table-row-vertical-align-middle table-clickable-row"},w=function(e,t,a,r,n){var c=u.a.createElement(F.w,{selectedFilters:e,onChecked:t,onCheckAll:a,filterGroups:r,withCheckAll:!0,withGrouping:!1});return[u.a.createElement(F.q,{displayText:n("status"),children:[c]})]}(h,O,j,E,r);return u.a.createElement(R.a,{filters:w,stickyHeader:!0,searchBarConfig:x,dateFilterConfig:D,tableConfig:T})};Ve.defaultProps={dateFormat:{},isLoading:{}};var Ue=Object(b.a)(["creditCard","commonComponents"])(Ve),Qe=S.c.TODAY,He=S.c.LAST_1_MONTH,ze=Object(b.a)(["creditCard","creditCardErrorMessages","errorMessages","commonComponents"])((function(e){var t=e.history,a=e.apiCall,r=e.environment,n=e.t,d=e.dateFormat,b=Object(l.useState)([]),p=Object(s.a)(b,2),j=p[0],S=p[1],x=Object(l.useState)({refunds:!1,refetch:!1}),D=Object(s.a)(x,2),T=D[0],w=D[1],y=Object(l.useState)(Ie),v=Object(s.a)(y,2),_=v[0],F=v[1],k=Object(l.useState)(He),N=Object(s.a)(k,2),A=N[0],L=N[1],R=Object(l.useState)(Qe),I=Object(s.a)(R,2),M=I[0],P=I[1],G=Object(l.useState)(""),V=Object(s.a)(G,2),U=V[0],Q=V[1],H=Object(l.useState)(null),z=Object(s.a)(H,2),B=z[0],J=z[1],W=Object(l.useState)(""),Y=Object(s.a)(W,2),Z=Y[0],X=Y[1],K=Object(l.useState)(""),$=Object(s.a)(K,2),ee=$[0],te=$[1],ae=Object(l.useState)(!1),re=Object(s.a)(ae,2),ne=re[0],ce=re[1],oe=Object(l.useState)(!1),ie=Object(s.a)(oe,2),se=ie[0],le=ie[1];Object(l.useEffect)((function(){ue()}),[r]),Object(l.useEffect)((function(){se&&de(_,A,M,U),le(!1)}),[_,A,M]),Object(l.useEffect)((function(){clearTimeout(B),J(setTimeout((function(){null!==B&&(!U||U.length>2)&&se&&de(_,A,M,U)}),400)),le(!1)}),[U]);var ue=function(){var e=Object(i.a)(c.a.mark((function e(){var a,r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.location.state&&t.location.state.isFromDetailsPage,w((function(e){return Object(o.a)(Object(o.a)({},e),{},{refunds:!0})})),e.next=4,h.a.getItem("LAST_CC_REFUNDS_TRANSACTIONS");case 4:if(r=e.sent,!a||Object(f.isNull)(r)){e.next=20;break}return n=JSON.parse(r),X(n.lastId),ce(n.hasNext),Q(n.searchQuery),F(n.statusFilter),L(m()(n.fromDateTime).utc().format()),P(m()(n.toDateTime).utc().format()),S(n.creditCardRefunds),w((function(e){return Object(o.a)(Object(o.a)({},e),{},{refunds:!1})})),t.replace({pathname:t.location.pathname,state:{}}),e.next=18,h.a.removeItem("LAST_CC_REFUNDS_TRANSACTIONS");case 18:e.next=21;break;case 20:de(_,A,M,U);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(i.a)(c.a.mark((function e(t,r,i,s){var l,u,d,m,b=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=b.length>4&&void 0!==b[4]&&b[4],u=Ie.filter((function(e){return!t.includes(e)})),d={status:u||Ie,from:r,to:i,last_id:l?Z:void 0},s&&(delete d.from,delete d.to,d.search_query=s),te(""),!l&&w((function(e){return Object(o.a)(Object(o.a)({},e),{},{refunds:!0})})),e.prev=6,e.next=9,a.axiosGet(g.d.ccRefundsData,d);case 9:if(!(m=e.sent).error_code){e.next=12;break}throw m;case 12:e.next=21;break;case 14:if(e.prev=14,e.t0=e.catch(6),e.t0.error_code!==E.a.REQUEST_ABORTED){e.next=18;break}return e.abrupt("return");case 18:return te(Object(O.b)(e.t0.error_code,n)),w((function(e){return Object(o.a)(Object(o.a)({},e),{},{refunds:!1})})),e.abrupt("return");case 21:X(m.has_next&&Object(f.last)(m.docs).id),ce(m.has_next),l?(S((function(e){return e.concat(m.docs)})),w((function(e){return Object(o.a)(Object(o.a)({},e),{},{refetch:!1})}))):S(m.docs),w((function(e){return Object(o.a)(Object(o.a)({},e),{},{refunds:!1})}));case 25:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,a,r,n){return e.apply(this,arguments)}}(),me=function(){h.a.setItem("LAST_CC_REFUNDS_TRANSACTIONS",JSON.stringify({lastId:Z,hasNext:ne,statusFilter:_,fromDateTime:A,toDateTime:M,creditCardRefunds:j,searchQuery:U}))};return u.a.createElement(u.a.Fragment,null,u.a.createElement(Ue,{searchQuery:U,handleSearch:function(e){e.preventDefault(),Q(e.target.value),le(!0)},fromDateTime:A,toDateTime:M,dateFormat:d,handleChangeDate:function(e,t){switch(Q(""),e){case"start":L(new Date(Object(C.l)(t,"from")));break;case"end":P(new Date(Object(C.l)(t,"to")))}le(!0)},creditCardRefunds:j,onClickLoadMore:function(){w((function(e){return Object(o.a)(Object(o.a)({},e),{},{refetch:!0})})),de(_,A,M,U,!0)},withLoadMore:ne,isLoading:T,errorMessage:ee,onDetailsClicked:function(e){var a=e.id;me(),t.replace({pathname:t.location.pathname,state:{isFromDetailsPage:!0}}),t.push({pathname:g.e.ccRefundDetails(a)})},statusFilter:_,updateStatusFilter:function(e){var t=_.includes(e),a=Object(q.a)(_);t?a=a.filter((function(t){return e===g.w.FAILED?t!==e&&t!==g.w.PENDING&&t!==g.w.CYBERSOURCE_ERROR&&t!==g.w.PROCESSOR_ERROR:e===g.w.REQUESTED?t!==e&&t!==g.w.SUCCEEDED:t!==e})):e===g.w.FAILED?a.push(e,g.w.PENDING,g.w.CYBERSOURCE_ERROR,g.w.PROCESSOR_ERROR):e===g.w.REQUESTED?a.push(e,g.w.SUCCEEDED):a.push(e),F(a),le(!0)},onCheckAllStatusFilter:function(){var e=Object(q.a)(_);e=0===e.length?Ie:[],F(e),le(!0)},statusFilterGroups:Me}))})),Be=S.c.TODAY,qe=S.c.LAST_1_MONTH;t.default=Object(b.a)(["creditCard","creditCardErrorMessages","errorMessages","commonComponents","commonWords"])((function(e){var t=e.user,a=e.business,n=e.history,d=e.location,b=e.apiCall,p=e.environment,S=e.dateFormat,T=e.t,w=a.id,y=a.environment,v=a.country_of_operation,_=t.email,k=t.can_administer,N=d.state&&d.state.selectedTabIndex,L=d.state&&d.state.isFromDetailsPage,R="Indonesia"===v,I=Object(j.c)(p,y),M=Object(l.useState)([]),P=Object(s.a)(M,2),G=P[0],V=P[1],U=Object(l.useState)({transactions:!1,refetch:!1}),Q=Object(s.a)(U,2),H=Q[0],z=Q[1],B=Object(l.useState)(!0),q=Object(s.a)(B,2),J=q[0],W=q[1],Y=Object(l.useState)(0),Z=Object(s.a)(Y,2),X=Z[0],$=Z[1],ee=Object(l.useState)({status:x,scheme:D,chargeDetails:[]}),ae=Object(s.a)(ee,2),re=ae[0],ne=ae[1],ce=Object(l.useState)({status:x,scheme:D,chargeDetails:[]}),oe=Object(s.a)(ce,2),ie=oe[0],se=oe[1],le=Object(l.useState)(qe),de=Object(s.a)(le,2),me=de[0],be=de[1],fe=Object(l.useState)(Be),pe=Object(s.a)(fe,2),Oe=pe[0],Ce=pe[1],je=Object(l.useState)(""),Ee=Object(s.a)(je,2),Se=Ee[0],ge=Ee[1],xe=Object(l.useState)(null),De=Object(s.a)(xe,2),we=De[0],ye=De[1],ve=Object(l.useState)(""),_e=Object(s.a)(ve,2),Fe=_e[0],ke=_e[1],Ne=Object(l.useState)(0),Ae=Object(s.a)(Ne,2),Le=Ae[0],Ie=Ae[1],Me=Object(l.useState)(!1),Pe=Object(s.a)(Me,2),Ge=Pe[0],Ve=Pe[1],Ue=Object(l.useState)(""),Qe=Object(s.a)(Ue,2),He=Qe[0],Je=Qe[1],We=Object(l.useState)(!1),Ye=Object(s.a)(We,2),Ze=Ye[0],Xe=Ye[1],Ke=Object(l.useState)(!1),$e=Object(s.a)(Ke,2),et=$e[0],tt=$e[1],at=Object(l.useState)(!1),rt=Object(s.a)(at,2),nt=rt[0],ct=rt[1],ot=Object(l.useState)(!1),it=Object(s.a)(ot,2),st=it[0],lt=it[1],ut=Object(l.useState)({title:"",description:""}),dt=Object(s.a)(ut,2),mt=dt[0],bt=dt[1],ft=Object(l.useState)(!1),pt=Object(s.a)(ft,2),ht=pt[0],Ot=pt[1],Ct=Object(l.useState)(!1),jt=Object(s.a)(Ct,2),Et=jt[0],St=jt[1],gt=Object(l.useState)(!1),xt=Object(s.a)(gt,2),Dt=xt[0],Tt=xt[1],wt=Object(l.useState)({}),yt=Object(s.a)(wt,2),vt=yt[0],_t=yt[1],Ft=Object(l.useState)(""),kt=Object(s.a)(Ft,2),Nt=kt[0],At=kt[1],Lt=Object(l.useState)(qe),Rt=Object(s.a)(Lt,2),It=Rt[0],Mt=Rt[1],Pt=Object(l.useState)(Be),Gt=Object(s.a)(Pt,2),Vt=Gt[0],Ut=Gt[1],Qt=Object(l.useState)(!1),Ht=Object(s.a)(Qt,2),zt=Ht[0],Bt=Ht[1],qt=Object(l.useState)({title:"",description:""}),Jt=Object(s.a)(qt,2),Wt=Jt[0],Yt=Jt[1],Zt=Object(l.useState)(!1),Xt=Object(s.a)(Zt,2),Kt=Xt[0],$t=Xt[1],ea=Object(l.useState)(!1),ta=Object(s.a)(ea,2),aa=ta[0],ra=ta[1],na=Object(l.useState)(!1),ca=Object(s.a)(na,2),oa=ca[0],ia=ca[1];Object(l.useEffect)((function(){da(),ma(),ua(),$(N||0)}),[p]),Object(l.useEffect)((function(){ht&&la(ie,me,Oe,Se,oa),Ot(!1)}),[ie,me,Oe]),Object(l.useEffect)((function(){clearTimeout(we),ye(setTimeout((function(){(!Se||Se.length>2)&&ht&&la(ie,me,Oe,Se,oa)}),500)),Ot(!1)}),[Se]);var sa=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.getItem("LAST_CC_CHARGES_TRANSACTIONS");case 2:if(a=e.sent,!L||Object(f.isNull)(a)){e.next=20;break}return r=JSON.parse(a),ge(r.searchQuery),ne(r.appliedGroupFilterItems),se(r.appliedGroupFilterItems),be(m()(r.fromDateTime).utc().format()),Ce(m()(r.toDateTime).utc().format()),ke(r.lastId),Ie(r.offsetForPagination),Ve(r.hasNext),V(r.creditCardTransactions),z((function(e){return Object(o.a)(Object(o.a)({},e),{},{transactions:!1})})),n.replace({pathname:n.location.pathname,state:{}}),e.next=18,h.a.removeItem("LAST_CC_CHARGES_TRANSACTIONS");case 18:e.next=21;break;case 20:la(ie,me,Oe,Se,t,!1);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),la=function(){var e=Object(i.a)(c.a.mark((function e(t,a,r,n,i){var s,l,u,d,m,p,h,C,j,S,w,y=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=y.length>5&&void 0!==y[5]&&y[5],l=t.status,u=t.scheme,d=t.chargeDetails,m=x.filter((function(e){return!l.includes(e)})),p=D.filter((function(e){return!u.includes(e)})),h=d.includes(g.j.INSTALLMENT),C=d.includes(g.j.PROMOTION),j={filter_status:m||x,card_brands:p||D,is_installment_transaction:h,is_promotion_transaction:C,from:a,to:r,last_id:s?Fe:void 0,offset:Le},n&&(delete j.from,delete j.to,j.search_query=n),Je(""),!s&&z((function(e){return Object(o.a)(Object(o.a)({},e),{},{transactions:!0})})),e.prev=10,w=i?g.d.ccCharge:g.d.ccChargeFromCcService,e.next=14,b.axiosGet(w,j);case 14:if(!(S=e.sent).error_code){e.next=17;break}throw S;case 17:e.next=26;break;case 19:if(e.prev=19,e.t0=e.catch(10),e.t0.error_code!==E.a.REQUEST_ABORTED){e.next=23;break}return e.abrupt("return");case 23:return Je(Object(O.b)(e.t0.error_code,T)),z((function(e){return Object(o.a)(Object(o.a)({},e),{},{transactions:!1})})),e.abrupt("return");case 26:i&&ke(S.has_next&&Object(f.last)(S.docs).id),Ie(S.has_next&&Le+g.i),Ve(S.has_next),s?(V((function(e){return e.concat(S.docs)})),z((function(e){return Object(o.a)(Object(o.a)({},e),{},{refetch:!1})}))):V(S.docs),z((function(e){return Object(o.a)(Object(o.a)({},e),{},{transactions:!1})}));case 31:case"end":return e.stop()}}),e,null,[[10,19]])})));return function(t,a,r,n,c){return e.apply(this,arguments)}}(),ua=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.axiosGet(g.d.ccSettings);case 2:t=e.sent,W(t.is_facilitator);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),da=function(){var e={environment:I,name:"cardsAutoReconciliation"},t={key:w};Object(j.a)(e,t,(function(e){St(e)}))},ma=function(){z((function(e){return Object(o.a)(Object(o.a)({},e),{},{transactions:!0})}));var e={environment:I,name:"cardsT4Migration"},t={key:w};Object(j.a)(e,t,(function(e){var t=!e&&R;ia(t),sa(t)}))},ba=function(){h.a.setItem("LAST_CC_CHARGES_TRANSACTIONS",JSON.stringify({searchQuery:Se,appliedGroupFilterItems:ie,fromDateTime:me,toDateTime:Oe,lastId:Fe,offsetForPagination:Le,hasNext:Ge,creditCardTransactions:G}))},fa=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a,r,n,o,i,s,l,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ct(!1),lt(!0),bt({title:"",description:""}),t=ie.status,a=ie.scheme,r=ie.chargeDetails,n=x.filter((function(e){return!t.includes(e)})),o=D.filter((function(e){return!a.includes(e)})),i=r.includes(g.j.INSTALLMENT),s=r.includes(g.j.PROMOTION),l={filter_status:n,card_brands:o,is_installment_transaction:i,is_promotion_transaction:s,from:me,to:Oe,user_offset:m()().utcOffset()},Se&&(l.search_query=Se.trim()),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"export-credit-card-report",label:"Export CSV - Credit Cards"}),e.prev=12,e.next=15,b.axiosPost(g.d.ccChargeReport,l);case 15:if(!(u=e.sent).error_code){e.next=18;break}throw u;case 18:ct(!0),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(12),bt({title:Object(O.c)(e.t0.error_code,T),description:Object(O.b)(e.t0.error_code,T)}),ct(!1);case 25:lt(!1),tt(!0);case 27:case"end":return e.stop()}}),e,null,[[12,21]])})));return function(){return e.apply(this,arguments)}}(),pa=function(){_t({}),At(""),Tt(!1)},ha=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bt(!0),(t=new FormData).append("file_content",vt),t.append("from",It),t.append("to",Vt),e.prev=5,e.next=8,b.axiosPost(g.d.ccGenerateReconciliationReport,t);case 8:if(!(a=e.sent).error_code){e.next=11;break}throw a;case 11:ra(!0),pa(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(5),Yt({title:Object(O.c)(e.t0.error_code,T),description:Object(O.b)(e.t0.error_code,T,{fileFormatAllowed:"CSV",fileSizeLimit:"100mb"})}),$t(!0);case 19:Bt(!1);case 20:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(){return e.apply(this,arguments)}}(),Oa=nt?u.a.createElement(F.j,{type:"success",handleClose:function(){tt(!1)},title:T("commonComponents:exportStarted"),subtitle:T("commonComponents:exportSuccessInfo",{email:_}),showModal:et}):u.a.createElement(F.j,{type:"danger",title:mt.title,subtitle:mt.description,handleClose:function(){tt(!1)},showModal:et}),Ca=u.a.createElement(F.j,{type:"danger",title:Wt.title,subtitle:Wt.description,showModal:Kt,handleClose:function(){return $t(!1)}}),ja=u.a.createElement("div",{className:"confirmation-modal-additional-content"},u.a.createElement("p",{className:"mb-0"},T("reconciliationReportWillBeSentTo")),u.a.createElement("p",{className:"color-black-400 mb-0"},_),u.a.createElement("p",{className:"mt-4 mb-0"},T("dateRange")),u.a.createElement("p",{className:"color-black-400 mb-0"},Object(C.i)(It)," -"," ",Object(C.i)(Vt))),Ea=u.a.createElement(F.j,{type:"success",title:T("reconciliationRequested"),showModal:aa,handleClose:function(){return ra(!1)},additionalContent:ja,buttonText:T("commonWords:close")}),Sa=u.a.createElement(te,{showModal:Dt,handleClose:pa,handleSubmit:ha,handleChangeDate:function(e,t){switch(e){case"reportFromDate":Mt(new Date(Object(C.l)(t,"from")));break;case"reportToDate":Ut(new Date(Object(C.l)(t,"to")))}},handleClearUpload:function(e){e.stopPropagation(),_t({}),At("")},handleFileChange:function(e){_t(e)},reportUpload:vt,reportUploadError:Nt,reportFromDate:It,reportToDate:Vt,dateFormat:S,isLoading:zt}),ga=J&&k&&Et,xa=u.a.createElement(u.a.Fragment,null,u.a.createElement(K,{creditCardTransactions:G,dataFromDepositService:oa,onDetailsClicked:function(e){var t=e.id;ba(),n.replace({pathname:n.location.pathname,state:{isFromDetailsPage:!0}}),n.push({pathname:g.e.ccChargeDetails(t)})},onClickLoadMore:function(){z((function(e){return Object(o.a)(Object(o.a)({},e),{},{refetch:!0})})),la(ie,me,Oe,Se,oa,!0)},withLoadMore:Ge,isLoading:H,errorMessage:He,searchQuery:Se,handleSearch:function(e){e.preventDefault(),Ie(0),ge(e.target.value),Ot(!0)},fromDateTime:me,toDateTime:Oe,dateFormat:S,handleChangeDate:function(e,t){switch(ge(""),Ie(0),e){case"start":be(new Date(Object(C.l)(t,"from")));break;case"end":Ce(new Date(Object(C.l)(t,"to")))}Ot(!0)},isFilterOpen:Ze,groupFilterItems:re,appliedGroupFilterItems:ie,updateFilter:function(e){var t=e.checked,a=e.types,n=e.group,c=re[n]||[];t?c=c.filter((function(e){return a[0]===g.t.CHARGED?e!==g.t.CHARGED&&e!==g.t.SETTLING&&e!==g.t.PENDING:a[0]===g.a.AMERICAN_EXPRESS?e!==g.a.AMERICAN_EXPRESS&&e!==g.a.AMEX:!a.includes(e)})):(a[0]===g.t.CHARGED?a.push(g.t.SETTLING,g.t.PENDING):a[0]===g.a.AMERICAN_EXPRESS&&a.push(g.a.AMEX),c=c.concat(a)),ne((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(r.a)({},n,c))}))},applyFilter:function(){se(re),Ie(0),Ot(!0)},clearAllFilter:function(){ne({status:[],scheme:[],chargeDetails:[]})},toggleFilter:function(e){e||ne(ie),Xe(e)},onExportCSVClicked:fa,isExporting:st,canUseAutoReconciliation:ga,openAutoReconciliationModal:function(){return Tt(!0)}}),Oa,Sa,Ca,Ea),Da=u.a.createElement(ue,{apiCall:b,history:n,business:a,dateFormat:S}),Ta=u.a.createElement(he,{apiCall:b,history:n,user:t,dateFormat:S}),wa=u.a.createElement(Te,{apiCall:b,history:n,user:t,dateFormat:S}),ya=u.a.createElement(Re,{apiCall:b,history:n,user:t,dateFormat:S}),va=u.a.createElement(ze,{apiCall:b,history:n,user:t,dateFormat:S});return u.a.createElement(u.a.Fragment,null,u.a.createElement(A,{setActiveTab:$,activeTab:X,isFacilitator:J}),0===X&&xa,1===X&&Ta,2===X&&wa,3===X&&ya,4===X&&va,5===X&&Da)}))},1573:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"e",(function(){return s}));var r=function(e,t){return"IDR"!==t&&t?e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"):e.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")},n=function(e){return e.toLocaleString("en-US").replace(/,/g,".")},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.toLocaleString("en-US",{minimumFractionDigits:t?2:0})},o=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=c(e,r),o="IDR"===t?n.replace(/,/g,"."):n,i=a?"".concat(t," "):"",s="".concat(i).concat(o);return s},i=function(e,t,a){var r=t?o(e,t):c(e),n=r.split("-").join(""),i="".concat((null!=a?a:e>0)?"+ ":"- "," ").concat(n);return 0===e&&(i=r),i},s=function(e){return"".concat((100*e).toFixed(2),"%")}},1575:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(a(0)),n=i(a(2)),c=i(a(6)),o=i(a(1576));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(1577);var l=function(e){var t,a=e.text,n=e.iconLeft,i=e.customCss,l=e.variant,u=(0,c.default)((s(t={"status-pill":!0},"status-pill-".concat(l),l),s(t,i,i),t));return r.default.createElement(o.default,{text:a,iconLeft:n,customCss:u})};l.propTypes={text:n.default.string,iconLeft:n.default.any,variant:n.default.oneOf(["success","danger","warning","first-level","second-level"]),customCss:n.default.string};var u=l;t.default=u},1576:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),e.exports=a(467)},1577:function(e,t,a){},2062:function(e,t,a){}}]);