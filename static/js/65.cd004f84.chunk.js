(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[65],{1506:function(e,t,a){"use strict";a.r(t);var n=a(24),r=a(9),c=a.n(r),o=a(3),i=a(19),s=a(12),u=a(0),l=a.n(u),d=a(97),m=a(31),b=a.n(m),f=a(1643),p=a.n(f),h=a(289),O=a.n(h),j=a(296),x=a.n(j),g=a(1585),v=a.n(g),E=a(1565),_=a(380),y=a(37),S=a(26),D=a(1598),C=a.n(D),w="/api/direct_disbursement_report_requests",k="/api/direct_disbursements",L="/api/direct_disbursement_statistics",F="/settings/sending-money",T=function(e){return{width:"5%",items:[{field:"external_id",text:e("commonWords:copyExternalID"),textPressed:e("commonWords:valueCopied"),action:"copy"}]}},M=a(80),I=function(e){return[{children:[{type:"COMPLETED",label:e("completedStatus")},{type:"PENDING",label:e("pendingStatus")},{type:"FAILED",label:e("failedStatus")}]}]},N=["COMPLETED","PENDING","FAILED"],A=a(1575),P=a.n(A),R=a(288),B=a.n(R),Q=function(e){var t=B()(null===e||void 0===e?void 0:e.toLowerCase());switch(e){case"COMPLETED":return l.a.createElement(P.a,{text:t,variant:"success"});case"PENDING":return l.a.createElement(P.a,{text:t,variant:"warning"});case"FAILED":return l.a.createElement(P.a,{text:t,variant:"danger"});default:return}},U=function(e){return[{dataField:"status",text:e("status"),formatter:function(e){return Q(e)},headerStyle:{width:"13%"}},{dataField:"created",text:e("created"),type:"text",headerStyle:{width:"17%"}},{dataField:"account_number",text:e("accountNumber"),type:"text",headerStyle:{width:"10%"}},{dataField:"bank_code",text:e("bankCode"),type:"text",headerStyle:{width:"10%"}},{dataField:"external_id",text:e("externalId"),type:"text",headerStyle:{width:"15%"}},{dataField:"description",text:e("description"),type:"text",headerStyle:{width:"20%"}},{dataField:"amount",text:e("amount"),type:"text",headerStyle:{width:"10%"}}]},Y=a(1573),G=a(48),Z=a(27),q=a(20),z=a.n(q),J=a(1583),W=a.n(J),H=function(e){var t,a=e.statuses,n=e.onCheckedFilter,r=e.onCheckAllFilter,c=e.searchQuery,i=e.updateSearchQuery,s=e.startDate,u=e.endDate,d=e.updateDate,m=e.dateFormat,f=e.onClickLoadMore,p=e.withLoadMore,h=e.errorMessage,O=e.isLoading,j=e.isExporting,x=e.disbursementData,g=e.onDetailsClicked,v=e.onExportReport,E=e.t,_={start:s,end:u,inputFormat:m.date_time_picker,outputFormat:G.a.GMT_MS_Z,onChange:d,customCss:"filter-item"},D={value:c,onChange:i,tooltip:E("searchBarTooltip"),tooltipPlacement:"bottom",placeholder:E("searchBarPlaceholder"),position:"inline",customCss:"filter-item"},C={isClickable:!0,tableHeaderColumns:U(E),tableContentRows:x,mobileTableContent:(t=x,t.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{status:Q(e.status),dateContent:{date:b()(e.created).format(G.a.FULL_DATE)},additionalData:Object(Y.b)(e.amount,"IDR"),secondRowContent:l.a.createElement("div",{className:"d-flex"},l.a.createElement("p",{className:"mb-0 mr-6 text-sm color-charcoal font-weight-bold"},"".concat(e.account_number," | ").concat(e.bank_code)))})}))),withLoadMore:p,onClickLoadMore:f,loadMoreText:E("commonComponents:tableMore"),isLoading:O.transactions,isLoadingMore:O.refetch,isError:!Object(Z.isEmpty)(h),isEmpty:Object(Z.isEmpty)(x),loadingText:E("loadingText"),errorContent:l.a.createElement(M.t,{text:h}),emptyContent:l.a.createElement(M.r,{caption:E("emptyCaption"),subtitle:E("emptySubtitle")}),actionButtonConfig:T(E),onDetailsClicked:function(e){return g(e.id)},rowClasses:"table-row-vertical-align-middle table-clickable-row"},w=function(e,t,a,n){var r="Status (".concat(e.length,")");return[l.a.createElement(M.q,{displayText:r,children:[l.a.createElement(M.w,{withCheckAll:!0,selectedFilters:e,onChecked:t,onCheckAll:a,filterGroups:I(n)})]})]}(a,n,r,E),k=[l.a.createElement(z.a,{iconLeft:l.a.createElement(y.a,{icon:S.p}),onClick:v,isLoading:j,size:"sm"},"CSV")];return l.a.createElement(W.a,{stickyHeader:!0,filters:w,rightButtons:k,dateFilterConfig:_,searchBarConfig:D,tableConfig:C})};H.defaultProps={dateFormat:{date_time_picker:G.a.DD_MM_YY},isLoading:{transactions:!1,refetch:!1},statuses:[]};var V=Object(_.a)(["disbursement","commonComponents"])(H),K=a(284),X=a(205),$=Object(_.a)("disbursement")((function(e){var t=e.t,a=e.isLoading,n=e.data,r=n.total_count,c=n.total_pending_amount,o=n.total_completed_amount,i=n.total_failed_amount;return l.a.createElement(K.a,null,l.a.createElement(X.a,{md:6,lg:3},l.a.createElement(M.Z,{text:t("totalCompleted"),currency:"IDR",amount:o&&Object(Y.d)(o),isLoading:a,icon:"/images/icons/completed-disb.png"})),l.a.createElement(X.a,{md:6,lg:3},l.a.createElement(M.Z,{text:t("totalPending"),currency:"IDR",amount:c&&Object(Y.d)(c),isLoading:a,icon:"/images/icons/pending-disb.png"})),l.a.createElement(X.a,{md:6,lg:3},l.a.createElement(M.Z,{text:t("totalFailed"),currency:"IDR",amount:i&&Object(Y.d)(i),isLoading:a,icon:"/images/icons/failed-disb.png"})),l.a.createElement(X.a,{md:6,lg:3},l.a.createElement(M.Z,{text:t("totalTransactions"),amount:r,isLoading:a,icon:"/images/icons/transactions.png"})))})),ee=a(50),te=a(189),ae=a(473),ne=a(28);t.default=Object(_.a)(["disbursement","errorMessages","commonComponents","commonWords"])((function(e){var t=e.t,a=e.apiCall,r=a.axiosGet,m=a.axiosPost,f=e.user,h=e.history,j=e.environment,g=e.businessSettings,_=e.dateFormat,D=e.entity,T=f.email,I=G.c.TODAY,A=G.c.LAST_1_MONTH,P=G.c.TIMEZONE,R=!g.can_view_disbursement&&D===ne.a.XENDIT&&"PRODUCTION"===j,B=Object(u.useState)(N),Q=Object(s.a)(B,2),U=Q[0],Z=Q[1],q=Object(u.useState)(new Date(I)),z=Object(s.a)(q,2),J=z[0],W=z[1],H=Object(u.useState)(new Date(A)),K=Object(s.a)(H,2),X=K[0],re=K[1],ce=Object(u.useState)(void 0),oe=Object(s.a)(ce,2),ie=oe[0],se=oe[1],ue=Object(u.useState)(void 0),le=Object(s.a)(ue,2),de=le[0],me=le[1],be=Object(u.useState)([]),fe=Object(s.a)(be,2),pe=fe[0],he=fe[1],Oe=Object(u.useState)({}),je=Object(s.a)(Oe,2),xe=je[0],ge=je[1],ve=Object(u.useState)(!1),Ee=Object(s.a)(ve,2),_e=Ee[0],ye=Ee[1],Se=Object(u.useState)({transactions:!1,refetch:!1}),De=Object(s.a)(Se,2),Ce=De[0],we=De[1],ke=Object(u.useState)(!1),Le=Object(s.a)(ke,2),Fe=Le[0],Te=Le[1],Me=Object(u.useState)(""),Ie=Object(s.a)(Me,2),Ne=Ie[0],Ae=Ie[1],Pe=Object(u.useState)(!1),Re=Object(s.a)(Pe,2),Be=Re[0],Qe=Re[1],Ue=Object(u.useState)(!1),Ye=Object(s.a)(Ue,2),Ge=Ye[0],Ze=Ye[1],qe=Object(u.useState)(null),ze=Object(s.a)(qe,2),Je=ze[0],We=ze[1],He=Object(u.useState)(null),Ve=Object(s.a)(He,2),Ke=Ve[0],Xe=Ve[1],$e=Object(u.useState)(!1),et=Object(s.a)($e,2),tt=et[0],at=et[1],nt=Object(u.useState)(!1),rt=Object(s.a)(nt,2),ct=rt[0],ot=rt[1];Object(u.useEffect)((function(){O()(U)||(clearTimeout(Je),We(setTimeout((function(){(!ie||ie.length>2)&&ct&&mt(),ot(!1)}),500)))}),[ie]),Object(u.useEffect)((function(){if(O()(U))return he([]),void ge({total_count:0,total_pending_amount:0,total_completed_amount:0,total_failed_amount:0});ct&&(mt(),ot(!1))}),[X,J,U]),Object(u.useEffect)((function(){it()}),[j]);var it=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.location.state&&h.location.state.isFromDetailsPage,we((function(e){return Object(o.a)(Object(o.a)({},e),{},{transactions:!0})})),e.next=4,C.a.getItem("LAST_DISBURSEMENTS");case 4:if(a=e.sent,!t||x()(a)){e.next=21;break}return n=JSON.parse(a),me(n.lastDisbursementId),Te(n.hasNext),ge(n.disbursementStats),Z(n.statusFilterItems),ft("start",n.startDate),ft("end",n.endDate),we((function(e){return Object(o.a)(Object(o.a)({},e),{},{transactions:!1})})),se(n.searchQuery),he(n.disbursementData),h.replace({pathname:h.location.pathname,state:{}}),e.next=19,C.a.removeItem("LAST_TRANSACTIONS");case 19:e.next=22;break;case 21:mt();case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),st=function(e){ge(e),ye(!1)},ut=function(e,t){var a=e.docs,r=e.has_next,c=function(e){return e.map((function(e){return{id:e.id,status:e.status,created:b()(e.created).format("DD MMM, YYYY hh:mm A"),external_id:e.external_id,account_number:e.account_number,bank_code:e.bank_code,description:e.disbursement_description,amount:Object(Y.d)(e.amount)}}))}(a),i=r?p()(a).id:"",s=t?[].concat(Object(n.a)(pe),Object(n.a)(c)):c;he(s),Te(e.has_next),me(i),we((function(e){return Object(o.a)(Object(o.a)({},e),{},{transactions:!1,refetch:!1})}))},lt=function(){var e=Object(i.a)(c.a.mark((function e(a){var n,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={environment:j,statuses:U,from:Object(te.c)(X,"start"),to:Object(te.c)(J,"end"),last_id:a?de:void 0},ie&&(n.search_query=ie.trim(),delete n.from,delete n.to),Ae(""),!a&&we((function(e){return Object(o.a)(Object(o.a)({},e),{},{transactions:!0})})),e.prev=4,e.next=7,r(k,n);case 7:if(!(i=e.sent).error_code){e.next=10;break}throw i;case 10:e.next=19;break;case 12:if(e.prev=12,e.t0=e.catch(4),we((function(e){return Object(o.a)(Object(o.a)({},e),{},{transactions:!1})})),i.error_code!==ae.a.REQUEST_ABORTED){e.next=17;break}return e.abrupt("return");case 17:return Ae(Object(ee.f)(e.t0.error_code,t)),e.abrupt("return");case 19:ut(i,a);case 20:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),dt=function(){var e=Object(i.a)(c.a.mark((function e(){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ye(!0),Ae(""),a={environment:j,statuses:U,from:Object(te.c)(X,"start"),to:Object(te.c)(J,"end")},ie&&(a.search_query=ie.trim(),delete a.from,delete a.to),e.prev=4,e.next=7,r(L,a);case 7:if(!(n=e.sent).error_code){e.next=10;break}throw n;case 10:e.next=18;break;case 12:if(e.prev=12,e.t0=e.catch(4),n.error_code!==ae.a.REQUEST_ABORTED){e.next=16;break}return e.abrupt("return");case 16:return Ae(Object(ee.f)(e.t0.error_code,t)),e.abrupt("return");case 18:st(n);case 19:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}(),mt=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];lt(e),dt()},bt=function(){var e=Object(i.a)(c.a.mark((function e(){var a,n,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ze(!1),Xe(""),at(!0),a=b()().utcOffset(),n={statuses:U,from:Object(te.c)(X,"start"),to:Object(te.c)(J,"end"),user_offset:a},ie&&(n.search_query=ie.trim()),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"export-disbursement-report",label:"Export CSV - Disbursements"}),e.prev=8,e.next=11,m(w,n);case 11:if(!(r=e.sent).error_code){e.next=14;break}throw r;case 14:e.next=23;break;case 16:return e.prev=16,e.t0=e.catch(8),at(!1),o=Object(ee.f)(e.t0.error_code,t,{action:v()(t("commonWords:export"))}),Xe(o),Qe(!0),e.abrupt("return");case 23:at(!1),Ze(!0),Qe(!0);case 26:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(){return e.apply(this,arguments)}}(),ft=function(e,t){switch(se(""),e){case"start":re(new Date(b()(t).tz(P).format()));break;case"end":W(new Date(b()(t).tz(P).format()));break;default:return}ot(!0)},pt=Ge?l.a.createElement(M.j,{type:"success",handleClose:function(){Qe(!1)},title:t("commonComponents:exportStarted"),subtitle:t("commonComponents:exportSuccessInfo",{email:T}),showModal:Be}):l.a.createElement(M.j,{type:"danger",title:t("exportFailed"),handleClose:function(){Qe(!1)},showModal:Be,subtitle:Ke}),ht=l.a.createElement(M.z,null,l.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},l.a.createElement(y.a,{icon:S.f,size:"2x"}),l.a.createElement("p",{className:"color-charcoal mb-0 ml-4"},l.a.createElement(E.a,{i18nKey:"disbursement:cannotViewDisbursement"},"Enable disbursements for your account in"," ",l.a.createElement(d.Link,{to:F},"your settings.")))));return R?ht:l.a.createElement(l.a.Fragment,null,!O()(pe)&&!ie&&l.a.createElement($,{data:xe,isLoading:_e}),l.a.createElement(V,{statuses:U,onCheckedFilter:function(e){var t=U.includes(e),a=Object(n.a)(U);t?a=a.filter((function(t){return t!==e})):a.push(e),Z(a),ot(!0)},onCheckAllFilter:function(){var e=O()(U)?N:[];Z(e),ot(!0)},searchQuery:ie,updateSearchQuery:function(e){e.preventDefault();var t=e.target.value;se(t),ot(!0)},startDate:X,endDate:J,updateDate:ft,dateFormat:_,onClickLoadMore:function(){we((function(e){return Object(o.a)(Object(o.a)({},e),{},{refetch:!0})})),mt(!0)},withLoadMore:Fe,errorMessage:Ne,isLoading:Ce,isExporting:tt,disbursementData:pe,onDetailsClicked:function(e){C.a.setItem("LAST_DISBURSEMENTS",JSON.stringify({disbursementData:pe,lastDisbursementId:de,hasNext:Fe,disbursementStats:xe,statusFilterItems:U,startDate:X,endDate:J,searchQuery:ie})),h.replace({pathname:h.location.pathname,state:{isFromDetailsPage:!0}}),h.push("/disbursements/".concat(e))},onExportReport:bt}),pt)}))},1573:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"e",(function(){return s}));var n=function(e,t){return"IDR"!==t&&t?e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"):e.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")},r=function(e){return e.toLocaleString("en-US").replace(/,/g,".")},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.toLocaleString("en-US",{minimumFractionDigits:t?2:0})},o=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=c(e,n),o="IDR"===t?r.replace(/,/g,"."):r,i=a?"".concat(t," "):"",s="".concat(i).concat(o);return s},i=function(e,t,a){var n=t?o(e,t):c(e),r=n.split("-").join(""),i="".concat((null!=a?a:e>0)?"+ ":"- "," ").concat(r);return 0===e&&(i=n),i},s=function(e){return"".concat((100*e).toFixed(2),"%")}},1575:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(0)),r=i(a(2)),c=i(a(6)),o=i(a(1576));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(1577);var u=function(e){var t,a=e.text,r=e.iconLeft,i=e.customCss,u=e.variant,l=(0,c.default)((s(t={"status-pill":!0},"status-pill-".concat(u),u),s(t,i,i),t));return n.default.createElement(o.default,{text:a,iconLeft:r,customCss:l})};u.propTypes={text:r.default.string,iconLeft:r.default.any,variant:r.default.oneOf(["success","danger","warning","first-level","second-level"]),customCss:r.default.string};var l=u;t.default=l},1576:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),e.exports=a(467)},1577:function(e,t,a){},1585:function(e,t,a){var n=a(470);e.exports=function(e){return n(e).toLowerCase()}},1643:function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}}}]);