(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[91],{1540:function(e,a,t){"use strict";t.r(a);var s=t(81),n=t(9),r=t.n(n),o=t(19),i=t(12),c=t(0),l=t.n(c),E=t(1565),_=t(380),O=t(97),R=t(67),m=t(26),u=t(289),d=t.n(u),S=t(1585),p=t.n(S),N=t(511),T=t(284),I=t(205),b=t(231),A=t(20),g=t.n(A),f=t(80),L=t(149),h=t.n(L),U=t(50),D=t(255),w={AUTHENTICATION_ERROR:"AUTHENTICATION_ERROR",ORIGIN_NOT_WHITELISTED_ERROR:"ORIGIN_NOT_WHITELISTED_ERROR",USER_BUSINESS_NOT_FOUND_ERROR:"USER_BUSINESS_NOT_FOUND_ERROR",USER_NOT_FOUND_ERROR:"USER_NOT_FOUND_ERROR",USER_LOCKED_ERROR:"USER_LOCKED_ERROR",USER_NO_PASSWORD_ERROR:"USER_NO_PASSWORD_ERROR",API_VALIDATION_ERROR:"API_VALIDATION_ERROR",AUTH_TOKEN_NOT_VALID:"AUTH_TOKEN_NOT_VALID",EMPTY_EMAIL_ERROR:'"email" is not allowed to be empty',EMPTY_PASSWORD_ERROR:'"password" is not allowed to be empty',VALIDATION_EMAIL_ERROR:'"email" must be a valid email'},v={EMAIL_LABEL:"Email",PASSWORD_LABEL:"Password",LOGIN_BUTTON:"LoginButton",REGISTER_BUTTON:"RegisterButton",REGISTER:"Register",HEADER_TITLE:"HeaderTitle",FORGOT_YOUR_PASSWORD:"ForgotYourPassword",FORGOT_PASSWORD:"ForgotPassword",AUTHENTICATION_ERROR:"Authentication",USER_UNLOCK_SUCCESS:"login:userUnlockSuccess",USER_UNLOCK_FAILED:"login:userUnlockFailed",USER_UNLOCK_TOKEN_ALREADY_USED:"login:userUnlockTokenUsed",EMPTY_EMAIL_ERROR:"EmptyEmail",EMPTY_PASSWORD_ERROR:"EmptyPassword",VALIDATION_EMAIL_ERROR:"ValidationEmail",DONT_HAVE_ACCOUNT:"DontHaveAccount",WELCOME_TO_INSTAMONEY:"WelcomeToInstamoney"},P=t(631),x=t(280),M=function(e){return!P.a.some((function(a){return null!==Object(R.j)(e,{path:a.path,exact:!0,strict:!0})}))&&x.a.nonEmailRedirected.some((function(a){return null!==Object(R.j)(e,{path:a.path,exact:!0,strict:!0})}))},y=(t(2173),t(28)),k=t(150),C=t.n(k),j=["xendit.co","instamoney.co"];a.default=Object(R.o)(Object(_.a)(["login","errorMessages"])((function(e){var a=e.canvasHash,t=e.fingerprintHash,n=e.fingerprintData,_=e.apiCall,R=e.history,u=e.location,S=e.cookies,A=e.setEnvironment,L=e.t,P=e.entity,x=e.isMobileView,k=new URLSearchParams(u.search).get("unlock_user"),H=P===y.a.INSTAMONEY,W=Object(c.useState)(""),Y=Object(i.a)(W,2),B=Y[0],V=Y[1],F=Object(c.useState)(""),G=Object(i.a)(F,2),K=G[0],J=G[1],z=Object(c.useState)(""),q=Object(i.a)(z,2),Q=q[0],X=q[1],Z=Object(c.useState)(""),$=Object(i.a)(Z,2),ee=$[0],ae=$[1],te=Object(c.useState)(!1),se=Object(i.a)(te,2),ne=se[0],re=se[1],oe=Object(c.useState)(""),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],Ee=Object(c.useState)(""),_e=Object(i.a)(Ee,2),Oe=_e[0],Re=_e[1],me=Object(c.useState)(""),ue=Object(i.a)(me,2),de=ue[0],Se=ue[1],pe=Object(c.useState)("/"),Ne=Object(i.a)(pe,2),Te=Ne[0],Ie=Ne[1];Object(c.useEffect)((function(){var e=u.state&&M(u.state.from);we(k),u.state&&u.state.is_device_verified&&Se(L("deviceVerifiedMessage")),e&&Ie("".concat(u.state.from).concat(u.state.search))}),[u]),Object(c.useEffect)((function(){Object(U.l)()}),[]);var be=function(e){switch(e.preventDefault(),e.target.name){case"email":V(e.target.value);break;case"password":J(e.target.value);break;default:return}},Ae=function(){var e;return C.a.EMAIL.test(B)||(X(L(v.VALIDATION_EMAIL_ERROR)),e=!0),d()(B)&&(X(L(v.EMPTY_EMAIL_ERROR)),e=!0),d()(K)&&(ae(L(v.EMPTY_PASSWORD_ERROR)),e=!0),e},ge=function(){var e=Object(o.a)(r.a.mark((function e(s){var o,i,c,l,E;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),o={email:B,password:K,canvasHash:a,fingerprintHash:t,fingerprintData:n},le(""),X(""),ae(""),Re(""),Se(""),!Ae()){e.next=10;break}return e.abrupt("return");case 10:return re(!0),e.next=13,_.axiosPostLogin(o);case 13:if(i=e.sent,re(!1),!i.error_code){e.next=18;break}return Le(i),e.abrupt("return");case 18:if(!i.mfa_type){e.next=22;break}return c=i.mfa_type,l=i.is_phone_number_verified,E=i.user_id,R.push("/login_verification",{email:B,password:K,canvasHash:a,fingerprintHash:t,fingerprintData:n,mfaType:c,isPhoneNumberVerified:l,userId:E,from:Te}),e.abrupt("return");case 22:i.user.is_password_expired?(localStorage.setItem("is_password_expired","true"),R.push("/expired_password")):fe(i);case 24:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),fe=function(){var e=Object(o.a)(r.a.mark((function e(a){var t,s,n,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.user.is_password_expired,s=a.business.email.split("@")[1],(n=j.includes(s))&&he("businessId",a.business.id),!t){e.next=9;break}localStorage.setItem("is_password_expired","true"),R.push("/expired_password"),e.next=22;break;case 9:return o="LIVE"===a.business.go_live_status||"TIER_1"===a.business.go_live_status,A(i=o?"PRODUCTION":"DEVELOPMENT"),S.set("environment",i,{path:"/",maxAge:D.ONE_DAY_IN_SECONDS}),S.set("internal",n,{path:"/"}),e.next=16,localStorage.setItem("user",JSON.stringify(a.user));case 16:return e.next=18,localStorage.setItem("business",JSON.stringify(a.business));case 18:return e.next=20,localStorage.setItem("WHITELIST_REMINDED_BUSINESSES",JSON.stringify([]));case 20:S.set("SHOW_POST_LOGIN",!0),R.push(Te);case 22:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Le=function(e){var a=e.error_code;a===w.API_VALIDATION_ERROR?De(e.errors):Ue(a)},he=function(e,a){window.dataLayer=window.dataLayer||[],window.dataLayer.push(Object(s.a)({},e,a))},Ue=function(e){switch(e){case w.AUTHENTICATION_ERROR:case w.USER_NOT_FOUND_ERROR:case w.USER_BUSINESS_NOT_FOUND_ERROR:le(l.a.createElement("p",null,l.a.createElement(E.a,{i18nKey:"login:Authentication"},"The email/password combination is invalid."," ",l.a.createElement(O.Link,{to:"/forgot_password"},"Click here")," to reset your password")));break;default:var a=Object(U.f)(e,L,{action:p()(L("LoginButton"))});le(a)}},De=function(e){e.forEach((function(e){var a=e.messages[0];switch(a){case w.EMPTY_EMAIL_ERROR:X(L(v.EMPTY_EMAIL_ERROR));break;case w.VALIDATION_EMAIL_ERROR:X(L(v.VALIDATION_EMAIL_ERROR));break;case w.EMPTY_PASSWORD_ERROR:ae(L(v.EMPTY_PASSWORD_ERROR));break;default:le(a)}}))},we=function(e){switch(e){case"success":Re(L(v.USER_UNLOCK_SUCCESS));break;case"used_token":Re(L(v.USER_UNLOCK_TOKEN_ALREADY_USED));break;case"invalid_token":Re(L(v.USER_UNLOCK_FAILED))}},ve=function(e){switch(e){case"success":return l.a.createElement(f.E,{icon:m.i,text:Oe,successPanel:!0,smallIcon:!0});case"used_token":return l.a.createElement(f.E,{icon:m.z,text:Oe,infoPanel:!0,smallIcon:!0});case"invalid_token":return l.a.createElement(f.E,{icon:m.v,text:Oe,dangerPanel:!0,smallIcon:!0});default:return null}},Pe=l.a.createElement(f.E,{icon:m.z,text:de,infoPanel:!0,smallIcon:!0}),xe=l.a.createElement(N.a,{className:"login-page-container"},l.a.createElement(T.a,{className:"login-page-row"},l.a.createElement(I.a,{md:6,sm:12},l.a.createElement("div",{className:"d-flex"},l.a.createElement("img",{className:"login-page-logo",src:"/images/xendit-blue-logo.svg",alt:"xendit-logo"}))),l.a.createElement(I.a,{md:6,sm:12},l.a.createElement("p",{className:"text-body-1 color-primary"},L(v.HEADER_TITLE)),Oe&&ve(k),ce&&l.a.createElement(f.u,{message:ce}),de&&Pe,l.a.createElement(f.gb,{method:"POST",onSubmit:ge,onChange:be},l.a.createElement("div",{className:"mb-3"},l.a.createElement(h.a,{label:L(v.EMAIL_LABEL),name:"email",placeholder:"john@company.com",value:B,errorMessage:Q}),l.a.createElement(h.a,{label:L(v.PASSWORD_LABEL),type:"password",name:"password",placeholder:"*******",value:K,errorMessage:ee})),l.a.createElement("div",{className:"d-flex flex-column"},l.a.createElement(g.a,{type:"submit",isLoading:ne,customCss:"login-page-buttons ml-0 mb-3",variant:"success"},L(v.LOGIN_BUTTON)),l.a.createElement(g.a,{onClick:function(){R.push("/register/1")},customCss:"login-page-buttons ml-0 mb-3"},L(v.REGISTER_BUTTON))),l.a.createElement(O.Link,{className:"d-inline-block color-primary text-body-2",to:"/forgot_password"},L(v.FORGOT_YOUR_PASSWORD)))))),Me=l.a.createElement(T.a,{className:"login-im-row m-0"},!x&&l.a.createElement(I.a,{lg:6,className:"login-im-left"}),l.a.createElement(I.a,{xs:12,lg:6,className:"p-4"},l.a.createElement("div",{className:"login-im-register"},l.a.createElement("p",{className:"text-sm mb-0 mr-2"},L(v.DONT_HAVE_ACCOUNT)),l.a.createElement(g.a,{variant:"secondary",onClick:function(){R.push("/register/1")}},L(v.REGISTER))),l.a.createElement("div",{className:"ml-md-5 login-im-right-content max-width-520"},l.a.createElement(b.a,{src:"/images/instamoney/instamoney-logo-square.png",width:150}),l.a.createElement("p",{className:"text-md font-weight-bold my-5"},L(v.WELCOME_TO_INSTAMONEY)),Oe&&ve(k),ce&&l.a.createElement(f.u,{message:ce}),de&&Pe,l.a.createElement(f.gb,{method:"POST",formGroupCss:"mb-0",onSubmit:ge,onChange:be},l.a.createElement(h.a,{label:L(v.EMAIL_LABEL),name:"email",placeholder:"Email",value:B,errorMessage:Q}),l.a.createElement(h.a,{label:L(v.PASSWORD_LABEL),type:"password",name:"password",placeholder:"Password",value:K,errorMessage:ee}),l.a.createElement(g.a,{type:"submit",isLoading:ne,customCss:"w-100 my-3"},L(v.LOGIN_BUTTON))),l.a.createElement(O.Link,{className:"d-inline-block color-primary text-sm font-weight-bold",to:"/forgot_password"},L(v.FORGOT_PASSWORD)))));return H?Me:xe})))},1585:function(e,a,t){var s=t(470);e.exports=function(e){return s(e).toLowerCase()}},2173:function(e,a,t){}}]);