(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[71],{1508:function(e,t,a){"use strict";a.r(t);var n=a(24),r=a(81),c=a(9),s=a.n(c),o=a(19),i=a(3),l=a(12),u=a(0),d=a.n(u),p=a(1565),m=a(380),b=a(27),f=a(1598),E=a.n(f),_=a(1583),T=a.n(_),O=a(26),C=a(48),y=a(28),h=a(80),A=a(50),g=a(20),v=a.n(g),N=a(151),j=a.n(N),D=a(1575),S=a.n(D),x=a(189),R=a(288),k=a.n(R),w=function(e){var t=k()(null===e||void 0===e?void 0:e.toLowerCase());switch(e){case"COMPLETED":return d.a.createElement(S.a,{text:t,variant:"success"});case"PENDING":return d.a.createElement(S.a,{text:t,variant:"warning"});case"FAILED":return d.a.createElement(S.a,{text:t,variant:"danger"});case"CALLBACK_URL_NOT_SET":return d.a.createElement(S.a,{text:"URL not set",variant:"danger"});default:return}},L=function(e,t,a,n){return d.a.createElement(v.a,{isLoading:t.isResending,children:n.t("resend"),onClick:function(e){e.stopPropagation(),n.onResend(t.id,a)},size:"sm"})},I=function(e,t,a){var n,r,c=[{dataField:"status",text:e("status"),formatter:w,headerStyle:{width:"18%"}},{dataField:"created",text:e("dateCreated"),formatter:x.h,headerStyle:{width:"18%"}},{dataField:"product_id",text:e("productId"),type:"text",headerStyle:{width:"18%"}},{dataField:"type",text:e("productType"),formatter:function(t){return e(t)},headerStyle:{width:"18%"}},{dataField:"redelivery_schedule",text:(n=e("redeliverySchedule"),r=e("redeliveryTimeEstimation"),d.a.createElement(d.a.Fragment,null,d.a.createElement("span",{className:"mr-1"},n),d.a.createElement(j.a,{size:"lg",placement:"top",content:r}))),formatter:function(e){return e?Object(x.h)(e):"-"},type:"text",headerStyle:{width:"18%"}}];return a&&c.push({dataField:"",formatter:L,formatExtraData:{t:e,onResend:t},headerStyle:{width:"10%"}}),c},M=a(1681),U=a.n(M),P=["COMPLETED","PENDING","FAILED","CALLBACK_URL_NOT_SET"],F={status:[],productType:[]},B=function(e,t){return[].concat(Object(n.a)(function(e){var t=[{type:"COMPLETED",label:e("completedStatus"),group:"status"},{type:"PENDING",label:e("pendingStatus"),group:"status"},{type:"FAILED",label:e("failedStatus"),group:"status"},{type:"CALLBACK_URL_NOT_SET",label:e("urlNotSetStatus"),group:"status"}];return[{title:Object(b.toUpper)(e("status")),children:t}]}(e)),Object(n.a)(function(e,t){var a=[{type:"DIRECT_DISBURSEMENT",label:e("DIRECT_DISBURSEMENT"),group:"productType"},{type:"CALLBACK_VIRTUAL_ACCOUNT",label:e("CALLBACK_VIRTUAL_ACCOUNT"),group:"productType"},{type:"DIRECT_DEBIT_PAYMENT",label:e("DIRECT_DEBIT_PAYMENT"),group:"productType"},{type:"PAYMENT_METHOD",label:e("PAYMENT_METHOD"),group:"productType"},{type:"INVOICE",label:e("INVOICE"),group:"productType"},{type:"BATCH_DISBURSEMENT",label:e("BATCH_DISBURSEMENT"),group:"productType"},{type:"NPWP_DATA_REQUEST",label:e("NPWP_DATA_REQUEST"),group:"productType"},{type:"CALLBACK_VIRTUAL_ACCOUNT_STATUS",label:e("CALLBACK_VIRTUAL_ACCOUNT_STATUS"),group:"productType"},{type:"CREDIT_CARD_REFUND",label:e("CREDIT_CARD_REFUND"),group:"productType"},{type:"FOREX_CONVERSION",label:e("FOREX_CONVERSION"),group:"productType"},{type:"RECURRING_PAYMENT",label:e("RECURRING_PAYMENT"),group:"productType"},{type:"BANK_ACCOUNT_DATA",label:e("BANK_ACCOUNT_DATA"),group:"productType"},{type:"CARD_PAYMENT",label:e("CARD_PAYMENT"),group:"productType"},{type:"FIXED_PAYMENT_CODE",label:e("FIXED_PAYMENT_CODE"),group:"productType"},{type:"REMITTANCE",label:e("REMITTANCE"),group:"productType"},{type:"ESCROW_VIRTUAL_ACCOUNT_ACTIVATED",label:e("ESCROW_VIRTUAL_ACCOUNT_ACTIVATED"),group:"productType"},{type:"ESCROW_VIRTUAL_ACCOUNT_PAYMENT",label:e("ESCROW_VIRTUAL_ACCOUNT_PAYMENT"),group:"productType"},{type:"LOAN_DISBURSEMENT",label:e("LOAN_DISBURSEMENT"),group:"productType"},{type:"ESCROW_WITHDRAWAL",label:e("ESCROW_WITHDRAWAL"),group:"productType"},{type:"REPAYMENT",label:e("REPAYMENT"),group:"productType"}].filter((function(e){return t&&t.includes(e.type)}));return[{title:Object(b.toUpper)(e("productType")),children:a}]}(e,t)))},H="/api/callback_requests",G=function(e){return"/api/callback_requests/".concat(e)},W="/api/callback_settings",K=(a(384),a(256),a(31)),Y=a.n(K),V=a(211),q=a.n(V),X=(a(1984),function(e,t,a,n){return d.a.createElement("a",{className:"callbacks-resend-mobile",onClick:function(n){n.stopPropagation(),a(e,t)}},n("resend"))}),z=function(e,t,a){var n=a.includes(e.id);return d.a.createElement("div",{className:"d-flex align-items-center"},d.a.createElement(q.a,{onClick:function(a){a.stopPropagation(),t(e,!n)},name:"checkbox-callback-mobile-".concat(e.id),checked:n,customCss:"mr-2"}),w(e.status))},J=function(e,t,a,n,r,c){return e.map((function(e,s){var o=Object(i.a)(Object(i.a)({},e),{},{status:w(e.status),dateContent:{date:Y()(e.created).format(C.a.FULL_DATE)},secondRowContent:d.a.createElement("div",{className:"d-flex"},d.a.createElement("p",{className:"mb-0 mr-6 text-sm color-charcoal font-weight-bold text-overflow-dot"},"".concat(t(e.type)," | ").concat(e.product_id)))});return n&&(o=Object(i.a)(Object(i.a)({},o),{},{action:X(e.id,s,a,t),status:z(e,r,c)})),o}))},Q=function(e,t){var a=new Date(e),n=t.split("T")[1].split(":"),r=parseInt(n[0]),c=parseInt(n[1]);return a.setHours(r),a.setMinutes(c),a.setSeconds(0),a};t.default=Object(m.a)(["callbacks","errorMessages","commonWords","commonComponents"])((function(e){var t=e.t,a=e.user,c=e.business,m=e.history,f=e.apiCall,_=f.axiosGet,g=f.axiosPost,N=e.environment,j=e.dateFormat,D=e.entity,S=(c.id,c.environment,a.can_manage_tech_settings),x=a.can_edit,R=S||D===y.a.INSTAMONEY&&x,k=C.c.LAST_1_MONTH,w=Object(u.useState)([]),L=Object(l.a)(w,2),M=L[0],K=L[1],Y=Object(u.useState)(F),V=Object(l.a)(Y,2),q=V[0],X=V[1],z=Object(u.useState)(F),Z=Object(l.a)(z,2),$=Z[0],ee=Z[1],te=Object(u.useState)(new Date),ae=Object(l.a)(te,2),ne=ae[0],re=ae[1],ce=Object(u.useState)(new Date(k)),se=Object(l.a)(ce,2),oe=se[0],ie=se[1],le=Object(u.useState)(""),ue=Object(l.a)(le,2),de=ue[0],pe=ue[1],me=Object(u.useState)(null),be=Object(l.a)(me,2),fe=be[0],Ee=be[1],_e=Object(u.useState)(""),Te=Object(l.a)(_e,2),Oe=Te[0],Ce=Te[1],ye=Object(u.useState)(!1),he=Object(l.a)(ye,2),Ae=he[0],ge=he[1],ve=Object(u.useState)([]),Ne=Object(l.a)(ve,2),je=Ne[0],De=Ne[1],Se=Object(u.useState)(""),xe=Object(l.a)(Se,2),Re=xe[0],ke=xe[1],we=Object(u.useState)(!1),Le=Object(l.a)(we,2),Ie=Le[0],Me=Le[1],Ue=Object(u.useState)(!1),Pe=Object(l.a)(Ue,2),Fe=Pe[0],Be=Pe[1],He=Object(u.useState)(!1),Ge=Object(l.a)(He,2),We=Ge[0],Ke=Ge[1],Ye=Object(u.useState)(void 0),Ve=Object(l.a)(Ye,2),qe=Ve[0],Xe=Ve[1],ze=Object(u.useState)(!1),Je=Object(l.a)(ze,2),Qe=Je[0],Ze=Je[1],$e=Object(u.useState)(!1),et=Object(l.a)($e,2),tt=et[0],at=et[1],nt=Object(u.useState)({title:"",subtitle:"",type:"",showModal:!1}),rt=Object(l.a)(nt,2),ct=rt[0],st=rt[1],ot=function(e){var t=function(t){return Object(i.a)(Object(i.a)({},t),e)};X(t),ee(t)},it=function(){var e=Object(o.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Me(!0),e.next=3,E.a.getItem("LAST_CALLBACKS_DATA");case 3:if(t=e.sent,!(m.location.state&&m.location.state.isFromDetailsPage)||Object(b.isNull)(t)){e.next=21;break}return a=JSON.parse(t),ot(a.filterItems),De(a.callbacks),ke(a.lastCallbackId),Ke(a.hasNext),ie(new Date(a.startDate)),re(new Date(a.endDate)),pe(a.searchQuery),Xe(a.includedTypes),Me(!1),m.replace({pathname:m.location.pathname,state:{}}),e.next=19,E.a.removeItem("LAST_CALLBACKS_DATA");case 19:e.next=22;break;case 21:ut();case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(u.useEffect)((function(){it()}),[N]),Object(u.useEffect)((function(){clearTimeout(fe),Ee(setTimeout((function(){Qe&&ut(),Ze(!1)}),400))}),[de]),Object(u.useEffect)((function(){Qe&&ut(),Ze(!1)}),[ne,oe,$]),Object(u.useEffect)((function(){Fe&&!Qe&&ut()}),[Fe]);var lt=function(e,t,a){st({title:e,subtitle:t,type:a,showModal:!0})},ut=function(){var e=Object(o.a)(s.a.mark((function e(){var a,r,c,o,i,l,u,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Me(!0),Ce(""),e.prev=2,r={statuses:Object(b.isEmpty)($.status)?P:$.status,from:oe,to:ne,callback_types:Object(b.isEmpty)($.productType)?qe:$.productType,last_id:Re||void 0,search_query:de||void 0},e.next=6,_(H,r);case 6:if(!(a=e.sent).error_code){e.next=9;break}throw a;case 9:if(!Object(b.isUndefined)(qe)&&!Object(b.isEmpty)(qe)){e.next=18;break}return e.next=12,_(W);case 12:if(!(c=e.sent).error_code){e.next=15;break}throw c;case 15:o=c.callback_urls,i=Object(b.map)(Object(b.keys)(o),(function(e){return e.toUpperCase()})),Xe(i);case 18:e.next=25;break;case 20:return e.prev=20,e.t0=e.catch(2),Me(!1),Ce(Object(A.f)(e.t0.error_code,t)),e.abrupt("return");case 25:u=(l=a).docs,d=l.has_next,De([].concat(Object(n.a)(je),Object(n.a)(u.map((function(e){return{created:e.created,status:e.status,product_id:e.request_payload.id,type:e.callback_type,id:e.id,isResending:!1,redelivery_schedule:e.redelivery_schedule}}))))),Ke(d),ke(u.length>0&&Object(b.last)(u).id),Me(!1);case 30:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(){return e.apply(this,arguments)}}(),dt=function(){var e=Object(o.a)(s.a.mark((function e(a,r){var c,o,i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(n.a)(je),o=c[r].status,c[r].status="PENDING",c[r].isResending=!0,De(c),e.prev=5,e.next=8,g(G(a));case 8:if(!(i=e.sent).error_code){e.next=11;break}throw i;case 11:e.next=21;break;case 13:return e.prev=13,e.t0=e.catch(5),lt(t("commonWords:failed"),Object(A.f)(e.t0.error_code,t),"danger"),(l=Object(n.a)(je))[r].status=o,l[r].isResending=!1,De(l),e.abrupt("return");case 21:Be(!1),De([]),Ke(!0),ke(void 0),Be(!0);case 26:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,a){return e.apply(this,arguments)}}(),pt=function(){var e=Object(o.a)(s.a.mark((function e(){var a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(M.length>10)){e.next=3;break}return lt(t("commonWords:failed"),t("MAX_BULK_RESEND_EXCEEDED",{DEFAULT_MAX_BULK_RESEND:10}),"danger"),e.abrupt("return");case 3:return ge(!0),a=(a=Object(n.a)(je)).map((function(e){return M.includes(e.id)?Object(i.a)(Object(i.a)({},e),{},{isResending:!0,status:"PENDING"}):e})),De(a),e.prev=7,c={callback_request_ids:M},e.next=11,g(H,c);case 11:if(!(r=e.sent).error_code){e.next=14;break}throw r;case 14:e.next=21;break;case 16:return e.prev=16,e.t0=e.catch(7),ge(!1),lt(t("commonWords:failed"),Object(A.f)(e.t0.error_code,t),"danger"),e.abrupt("return");case 21:K([]),ge(!1),Be(!1),De([]),Ke(!0),ke(void 0),Be(!0);case 28:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(){return e.apply(this,arguments)}}(),mt=function(e,t){var a=Object(n.a)(M);"PENDING"===e.status||(t?a.push(e.id):a=a.filter((function(t){return t!==e.id})),K(a))},bt=function(e,t,a,n,c,s,o,i,l,u,p,m,f){var E=B(e,c),_=Object.keys(l).reduce((function(e,t){return e.concat(l[t])}),[]),T=d.a.createElement(h.x,{selectedFilters:_,onChecked:p,filterGroups:E,withCheckAll:!0,onCheckAll:f,isApplyDisabled:Object(b.isEqual)(l,u),onApplyFilter:m,withGrouping:!0,expandType:"horizontal",handleToggleFilter:o}),O=_.length,y=d.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},d.a.createElement("div",{className:"mr-2"},d.a.createElement("p",{className:"font-weight-bold m-0"},e("date"))),d.a.createElement(U.a,{value:t,date:!0,inputFormat:s.date_time_picker,onChange:function(e){return n("start_date",e)},outputFormat:C.a.GMT_MS_Z,max:a,customCss:"max-width-180"}),d.a.createElement("div",{className:"date-divider mx-2"},"-"),d.a.createElement(U.a,{value:a,date:!0,inputFormat:s.date_time_picker,onChange:function(e){return n("end_date",e)},outputFormat:C.a.GMT_MS_Z,min:t,max:new Date,customCss:"max-width-180"})),A=d.a.createElement("div",{className:"d-flex align-items-center justify-content-between my-1"},d.a.createElement("div",{className:"mr-2"},d.a.createElement("p",{className:"font-weight-bold m-0"},e("time"))),d.a.createElement(U.a,{value:t,time:!0,inputFormat:"HH:mm",onChange:function(e){return n("start_time",e)},outputFormat:C.a.GMT_MS_Z,customCss:"max-width-180"}),d.a.createElement("div",{className:"date-divider mx-2"},"-"),d.a.createElement(U.a,{value:a,time:!0,inputFormat:"HH:mm",onChange:function(e){return n("end_time",e)},outputFormat:C.a.GMT_MS_Z,customCss:"max-width-180"}));return[d.a.createElement(h.q,Object(r.a)({displayText:e("filterText",{allFilterLength:O}),children:[T],customCss:{dropdownName:"callbacks-dropdown-status"},customHandleToggle:o,customDropdownOpen:i,onClickEvent:!0,onMouseEvent:!1},"customCss",{padding:"px-2 pt-2 pb-0"})),d.a.createElement(h.q,{displayText:e("datePicker"),children:[y,A],onClickEvent:!0,onMouseEvent:!1,customCss:{dropdownName:"callbacks-date-time-picker",content:"min-width-300"}})]}(t,oe,ne,(function(e,t){var a,n;Ze(!0),De([]),Me(!0),ke(void 0);var r=new Date,c=t.split("T")[0];switch(e){case"start_date":(a=new Date(c)).setHours(0),a.setMinutes(0),ie(a);break;case"end_date":(a=new Date(c)).setHours(r.getHours()),a.setMinutes(r.getMinutes()),re(a);break;case"start_time":n=Q(oe,t),ie(n);break;case"end_time":n=Q(ne,t),re(n)}Me(!1)}),qe,j,(function(e){e||X($),at(e)}),tt,q,$,(function(e){var t=e.checked,a=e.types,n=e.group,c=q[n]||[];c=t?c.filter((function(e){return!a.includes(e)})):c.concat(a),X((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(r.a)({},n,c))}))}),(function(){Ze(!0),De([]),Me(!0),ke(void 0),ee(q),Me(!1)}),(function(){X(F)})),ft=function(e,t,a,n,r){return r?[d.a.createElement(v.a,{customCss:"callback-resend-button",size:"sm",isLoading:a,isDisabled:Object(b.isEmpty)(n),onClick:function(){t()}},e("resend"))]:[]}(t,pt,Ae,M,R),Et={isClickable:!0,tableHeaderColumns:I(t,dt,R),tableContentRows:je,mobileTableContent:J(je,t,dt,R,mt,M),onClickLoadMore:ut,withLoadMore:We,loadMoreText:t("commonComponents:tableMore"),isLoadingMore:Ie,isLoading:Ie&&Object(b.isEmpty)(je),isError:!Object(b.isEmpty)(Oe),isEmpty:Object(b.isEmpty)(je),loadingText:t("loadingText"),errorContent:d.a.createElement(h.t,{text:Oe}),emptyContent:d.a.createElement(h.r,{caption:t("emptyCaption"),subtitle:t("emptySubtitle")}),selectRowMode:"checkbox",onSelectRow:mt,onSelectAllRow:function(e){var t=[];e?(je.forEach((function(e){"PENDING"===e.status||t.push(e.id)})),K(t)):K([])},rowClasses:function(e){var t="table-row-vertical-align-middle table-clickable-row";return"PENDING"===e.status?"callbacks-uncheck ".concat(t):t},onDetailsClicked:function(e){E.a.setItem("LAST_CALLBACKS_DATA",JSON.stringify({callbacks:je,lastCallbackId:Re,hasNext:We,startDate:oe,endDate:ne,searchQuery:de,filterItems:$,includedTypes:qe})),m.replace({pathname:m.location.pathname,state:{isFromDetailsPage:!0}}),m.push("/callbacks/"+e.product_id)}},_t={value:de,onChange:function(e){e.preventDefault(),pe(e.target.value),(e.target.value.length>2||0===e.target.value.length)&&(De([]),Me(!0),ke(void 0),Ze(!0))},tooltip:t("searchBarTooltip"),placeholder:t("searchBarPlaceholder"),position:"inline",customCss:"filter-item"};return d.a.createElement(d.a.Fragment,null,d.a.createElement(h.E,{infoPanel:!0,icon:O.e,text:d.a.createElement(p.a,{i18nKey:"callbacks:infoPanelRetryCallback"},d.a.createElement("strong",null,"Failed events will be redelivered automatically.")," Learn more about retry policy",d.a.createElement("a",{className:"text-underline",href:t("resendCallbackDocsUrl"),target:"_blank",rel:"noopener noreferrer"},"here")),customCss:"my-3",smallIcon:!0}),d.a.createElement(T.a,{filters:bt,stickyHeader:!0,rightButtons:ft,tableConfig:Et,searchBarConfig:_t}),d.a.createElement(h.j,Object.assign({},ct,{handleClose:function(){st({title:"",subtitle:"",type:"",showModal:!1})}})))}))},1575:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(a(0)),r=o(a(2)),c=o(a(6)),s=o(a(1576));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(1577);var l=function(e){var t,a=e.text,r=e.iconLeft,o=e.customCss,l=e.variant,u=(0,c.default)((i(t={"status-pill":!0},"status-pill-".concat(l),l),i(t,o,o),t));return n.default.createElement(s.default,{text:a,iconLeft:r,customCss:u})};l.propTypes={text:r.default.string,iconLeft:r.default.any,variant:r.default.oneOf(["success","danger","warning","first-level","second-level"]),customCss:r.default.string};var u=l;t.default=u},1576:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),e.exports=a(467)},1577:function(e,t,a){},1984:function(e,t,a){}}]);