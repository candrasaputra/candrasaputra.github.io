(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[66],{1510:function(e,t,a){"use strict";a.r(t);var n=a(24),r=a(9),i=a.n(r),s=a(3),o=a(19),c=a(12),u=a(0),l=a.n(u),d=a(380),m=a(67),f=a(27),O=a(1598),p=a.n(O),h=a(108),g=a.n(h),v=a(50),b=a(48),y=a(80),E=a(1583),L=a.n(E),T=a(20),w=a.n(T),x=a(231),F=a(1575),_=a.n(F),j=a(31),A=a.n(j),C=a(1573),D=a(288),S=a.n(D),M=function(e){var t=S()(null===e||void 0===e?void 0:e.toLowerCase());switch(e){case"SETTLED":case"COMPLETED":return l.a.createElement(_.a,{variant:"success",text:"Settled"});case"PAID":case"HOLDING":return l.a.createElement(_.a,{variant:"success",text:"Paid"});case"PENDING":return l.a.createElement(_.a,{variant:"warning",text:t});case"FAILED":return l.a.createElement(_.a,{variant:"danger",text:t});default:return l.a.createElement(_.a,{text:t})}},N=function(e){return e?A()(e).format(b.a.FULL_DATE):"-"},V=function(e){return Object(C.d)(e)},k=function(e,t){return[{dataField:"status",text:e("status"),formatter:M,headerStyle:{width:"15%"}},{text:e("ewalletType"),formatter:function(){return function(e){return l.a.createElement(x.a,{height:20,src:"/images/".concat(e.toLowerCase(),"-logo.svg")})}(t)},headerStyle:{width:"13%"}},{dataField:"account_information",text:e("accountNumber"),type:"text",headerStyle:{width:"15%"}},{dataField:"amount",text:e("amount"),type:"text",formatter:V,headerStyle:{width:"15%"}},{dataField:"external_id",text:e("reference"),type:"text",headerStyle:{width:"15%"}},{dataField:"created_at",text:e("dateCreated"),type:"text",formatter:N,headerStyle:{width:"20%"}}]},P=function(e,t){switch(e){case"OVO":return[{children:[{type:"COMPLETED",label:t("settled")},{type:"HOLDING",label:t("paid")},{type:"PENDING",label:t("pending")},{type:"FAILED",label:t("failed")}]}];default:return[]}},I={EWALLETS_PAYMENTS:{OVO:"/api/ovo_ewallet_payments"},EWALLETS_PAYMENTS_SUMMARY:{OVO:"/api/ovo_ewallet_payments_summary"},OVO_MERCHANT_SETTINGS:"/api/ewallet/ovo_merchant_settings"},U=function(e){return{xendit:[{title:"OVO"},{title:"DANA",disabled:!0,disabledText:e("comingSoon")},{title:"LinkAja",disabled:!0,disabledText:e("comingSoon")}],instamoney:[{title:"OVO"}]}},R={OVO:["COMPLETED","HOLDING","PENDING","FAILED"]},Q=function(e){return{width:"7%",items:[{field:"external_id",text:e("commonWords:copyReference"),textPressed:e("commonWords:valueCopied"),action:"copy"}]}},G="/images/icons/completed.svg",H="/images/icons/transactions.svg",Y=a(28),W=(a(1986),function(e){var t=e.t,a=e.onLoadMore,n=e.onDetailsClicked,r=e.ovoEwalletsData,i=e.ovoEwalletConfig,s=e.history,o=e.dateFormat,c=e.updateDate,u=e.updateFilters,d=e.onCheckAllFilters,m=e.updateSearchQuery,O=e.entity,p=r.payments,h=r.hasNext,g=r.isFetching,v=r.isLoadingMore,E=r.errorMessage,T=r.dateFrom,x=r.dateTo,F=r.statuses,_=r.searchQuery,j=O===Y.a.INSTAMONEY,A=i.isOVOActivated,C=i.isError,D=i.isLoading,S=!D&&A,M=l.a.createElement(y.r,{caption:t("emptyOVOPaymentCaption"),subtitle:t("emptyOVOPaymentSubtitle")}),N=l.a.createElement("div",{className:"ovo-inactive-content"},l.a.createElement(y.r,{caption:t("ovoNotActive")},l.a.createElement(w.a,{customCss:"mt-4",onClick:function(){s.push("/settings/payment-methods#e-wallets")}},t("activateOVO")))),V=l.a.createElement(y.t,{text:C?t("errorFetchingEwalletConfig"):E}),I=function(e,t,a,n,r){var i=l.a.createElement(y.w,{selectedFilters:e,onChecked:function(e){t(r,e)},filterGroups:P(r,n),onCheckAll:function(){a(r)},withCheckAll:!0}),s=e.length;return[l.a.createElement(y.q,{displayText:"".concat(n("statuses")," (").concat(s,")"),children:[i]})]}(F,u,d,t,"OVO"),U={value:_,onChange:function(e){m("OVO",e)},placeholder:t("ovoSearchBarPlaceholder"),position:"inline",customCss:"filter-item"},R={start:T,end:x,inputFormat:o.date_time_picker,outputFormat:b.a.GMT_MS_Z,onChange:function(e,t){c("OVO",e,t)},customCss:"filter-item"},G=S?M:N,H=M,W={isClickable:!0,tableHeaderColumns:k(t,"OVO"),tableContentRows:p,onClickLoadMore:a,withLoadMore:h,loadMoreText:t("commonComponents:tableMore"),isLoadingMore:v,isLoading:D||g||Object(f.isUndefined)(A),isError:!Object(f.isEmpty)(E)||C,isEmpty:!S||Object(f.isEmpty)(p),loadingText:t("loadingOVOPayments"),errorContent:V,emptyContent:j?H:G,actionButtonConfig:Q(t),onDetailsClicked:n,rowClasses:"table-row-vertical-align-middle table-clickable-row"};return l.a.createElement("div",{className:"ovo-payments-table"},l.a.createElement(L.a,{filters:I,stickyHeader:!0,tableConfig:W,dateFilterConfig:R,searchBarConfig:U}))});W.defaultProps={ovoEwalletsData:{payments:[],hasNext:!0,isFetching:!1,isLoadingMore:!1,errorMessage:"",statuses:[]},ovoEwalletConfig:{isOVOActivated:!1,isError:!1,isLoading:!1},dateFormat:{}};var B=Object(d.a)(["ewallets","commonComponents","commonWords"])(W),J=a(284),Z=a(205),q=function(e){var t=e.t,a=e.isLoading,n=e.totalPaid,r=e.totalTransactions;return l.a.createElement(J.a,null,l.a.createElement(Z.a,{md:"6"},l.a.createElement(y.Z,{text:t("totalPaid"),currency:"IDR",amount:n&&Object(C.d)(n),isLoading:a,icon:G})),l.a.createElement(Z.a,{md:"6"},l.a.createElement(y.Z,{text:t("totalTransactions"),amount:r&&Object(C.d)(r),isLoading:a,icon:H})))},z=a(479),K=a.n(z);t.default=Object(m.o)(Object(d.a)(["ewallets","errorMessages"])((function(e){var t=e.t,a=e.history,r=e.apiCall.axiosGet,d=e.entity,m=e.dateFormat,O=b.c.TODAY,h=b.c.LAST_1_MONTH,E=b.c.TIMEZONE,L=Object(u.useState)(0),T=Object(c.a)(L,2),w=T[0],x=T[1],F=Object(u.useState)(!1),_=Object(c.a)(F,2),j=_[0],A=_[1],C=Object(u.useState)({isLoading:!1,isError:!1}),D=Object(c.a)(C,2),S=D[0],M=D[1],N=Object(u.useState)({payments:[],hasNext:!0,isFetching:!1,isLoadingMore:!1,lastId:void 0,errorMessage:"",isLoadingSummary:!1,summary:{},summaryErrorMessage:{},dateFrom:new Date(h),dateTo:new Date(O),isUpdatingFilter:!1,statuses:R.OVO,searchDelay:{},searchQuery:""}),V=Object(c.a)(N,2),k=V[0],P=V[1];Object(u.useEffect)((function(){G()}),[S.isOVOActivated]),Object(u.useEffect)((function(){j&&A(!1)}),[j]),Object(u.useEffect)((function(){k.isUpdatingFilter&&(J("OVO"),Z("OVO")),Y("OVO",{isUpdatingFilter:!1})}),[k.dateTo,k.dateFrom]),Object(u.useEffect)((function(){var e=k.isUpdatingFilter,t=k.statusFilterDelay;clearTimeout(t),Y("OVO",{statusFilterDelay:setTimeout((function(){e&&(J("OVO"),Z("OVO")),Y("OVO",{isUpdatingFilter:!1})}),200)})}),[k.statuses]),Object(u.useEffect)((function(){var e=k.searchDelay,t=k.searchQuery,a=k.isUpdatingFilter;clearTimeout(e),Y("OVO",{searchDelay:setTimeout((function(){a&&!Object(f.isUndefined)(t)&&(t.length>2||0===t.length)&&(J("OVO"),Z("OVO")),Y("OVO",{isUpdatingFilter:!1})}),400)})}),[k.searchQuery]);var Q=function(){var e=Object(o.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M((function(e){return Object(s.a)(Object(s.a)({},e),{},{isLoading:!0,isError:!1})})),Y("OVO",{isFetching:!0}),e.next=4,r(I.OVO_MERCHANT_SETTINGS);case 4:if(!(t=e.sent).error_code){e.next=9;break}return a="MERCHANT_NOT_VALID_ERROR"===t.error_code,M((function(e){return Object(s.a)(Object(s.a)({},e),{},{isOVOActivated:!1,isError:!a,isLoading:!1})})),e.abrupt("return");case 9:M((function(e){return Object(s.a)(Object(s.a)({},e),{},{isOVOActivated:!0,isLoading:!1})}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(o.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n=0,a.location.state&&(r=a.location.state,t=r.isFromDetailsPage,n=t?r.activeTab:0),x(n),e.next=6,H("OVO");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.location.state&&a.location.state.isFromDetailsPage,Y(t,{isLoading:!0}),e.next=4,p.a.getItem("LAST_".concat(t,"_DATA"));case 4:if(r=e.sent,!n||Object(f.isNull)(r)){e.next=14;break}return s=JSON.parse(r),M(s.ovoEwalletConfig),Y(t,{payments:s.payments,hasNext:s.hasNext,lastId:s.lastId,summary:s.summary,dateFrom:new Date(s.dateFrom),dateTo:new Date(s.dateTo),statuses:s.statuses,searchQuery:s.searchQuery,isLoading:!1}),a.replace({pathname:a.location.pathname,state:{}}),e.next=12,p.a.removeItem("LAST_".concat(t,"_DATA"));case 12:e.next=17;break;case 14:o=S.isOVOActivated,Object(f.isUndefined)(o)&&Q(),o?(J(t),Z(t)):!Object(f.isUndefined)(o)&&Y(t,{isFetching:!1});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(e,t){switch(e){case"OVO":P((function(e){return Object(s.a)(Object(s.a)({},e),t)}))}},W=function(e){switch(e){case"OVO":return k;default:return}},J=function(){var e=Object(o.a)(i.a.mark((function e(a){var s,o,c,u,l,d,m,O,p,h,g,b,y,E,L,T=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=T.length>1&&void 0!==T[1]&&T[1],o=W(a),c=o.lastId,u=o.payments,l=o.dateFrom,d=o.dateTo,m=o.searchQuery,O=o.statuses,Y(a,{isFetching:!s,isLoadingMore:s,errorMessage:""}),e.prev=3,p={from:Object(v.e)(l,"start"),to:Object(v.e)(d,"end"),statuses:O,last_id:s?c:void 0},m&&(delete p.from,delete p.to,p.search_query=m),e.next=8,r(I.EWALLETS_PAYMENTS[a],p);case 8:if(!(h=e.sent).error_code){e.next=11;break}throw h;case 11:g=h.payments,b=h.has_next,y=s?[].concat(Object(n.a)(u),Object(n.a)(g)):g,E=g.length>0&&Object(f.last)(g).id,Y(a,{payments:y,lastId:E,hasNext:b,isFetching:!1,isLoadingMore:!1}),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(3),L={errorMessage:Object(v.f)(e.t0.error_code,t),isFetching:!1,isLoadingMore:!1},"PAYMENT_NOT_FOUND_ERROR"===e.t0.error_code&&(L={payments:[],lastId:void 0,hasNext:!0,isFetching:!1,isLoadingMore:!1}),Y(a,L);case 22:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(o.a)(i.a.mark((function e(a){var n,s,o,c,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=W(a),s=n.dateFrom,o=n.dateTo,c=n.searchQuery,Y(a,{isLoadingSummary:!0,summaryErrorMessage:""}),e.prev=2,u={from:Object(v.e)(s,"start"),to:Object(v.e)(o,"end")},c&&(u.search_query=c,delete u.from,delete u.to),e.next=7,r(I.EWALLETS_PAYMENTS_SUMMARY[a],u);case 7:if(!(l=e.sent).error_code){e.next=10;break}throw l;case 10:Y(a,{summary:l,isLoadingSummary:!1}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),Y(a,{summaryErrorMessage:Object(v.f)(e.t0.error_code,t),isLoadingSummary:!1});case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),z=l.a.createElement(B,{onLoadMore:function(){J("OVO",!0)},onDetailsClicked:function(e){!function(e,t){var n=W(t),r=n.lastId,i=n.hasNext,s=n.payments,o=n.summary,c=n.dateFrom,u=n.dateTo,l=n.statuses,d=n.searchQuery;p.a.setItem("LAST_".concat(t,"_DATA"),JSON.stringify({lastId:r,payments:s,hasNext:i,summary:o,dateFrom:c,dateTo:u,statuses:l,searchQuery:d,ovoEwalletConfig:S})),a.replace({pathname:a.location.pathname,state:{isFromDetailsPage:!0,activeTab:w}}),a.push({pathname:"/ewallets/".concat(e.id),state:{activeTab:w}})}(e,"OVO")},ovoEwalletsData:k,ovoEwalletConfig:S,history:a,dateFormat:m,updateDate:function(e,t,a){switch(t){case"start":Y(e,{dateFrom:new Date(g()(a).tz(E).format())});break;case"end":Y(e,{dateTo:new Date(g()(a).tz(E).format())});break;default:return}Y(e,{isUpdatingFilter:!0})},updateFilters:function(e,t){var a=W(e).statuses,r=a.includes(t),i=Object(n.a)(a);r?i=i.filter((function(e){return e!==t})):i.push(t),Y(e,{statuses:i,isUpdatingFilter:!0})},onCheckAllFilters:function(e){var t=W(e).statuses;Y(e,{statuses:Object(f.isEmpty)(t)?R[e]:[],isUpdatingFilter:!0})},updateSearchQuery:function(e,t){t.preventDefault(),Y(e,{searchQuery:t.target.value,isUpdatingFilter:!0})},entity:d}),$=function(){var e;switch(w){case 0:e="OVO";break;case 1:e="DANA";break;case 2:e="LINK_AJA"}var t=W(e),a=t.summary,n=t.statuses,r=t.isLoadingSummary,i=S.isLoading,s=a.total_paid_amount||0,o=a.total_transaction_count||0;return n.includes("COMPLETED")||(s=0),{totalPaid:s,totalTransactions:o,isLoading:r||i}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(q,{t:t,isLoading:$().isLoading,totalPaid:$().totalPaid,totalTransactions:$().totalTransactions}),l.a.createElement("div",{className:"ewallet-tab-switcher-container"},l.a.createElement(y.z,{customBodyCss:"px-4 py-3",customCss:"ewallet-tab-switcher-card"},l.a.createElement(K.a,{tabs:U(t)[d],activeTab:w,changeActiveTab:function(e){x(e),A(!0)}}))),function(e){switch(e){case 0:return z;default:return}}(w))})))},1573:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"e",(function(){return c}));var n=function(e,t){return"IDR"!==t&&t?e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"):e.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")},r=function(e){return e.toLocaleString("en-US").replace(/,/g,".")},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.toLocaleString("en-US",{minimumFractionDigits:t?2:0})},s=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=i(e,n),s="IDR"===t?r.replace(/,/g,"."):r,o=a?"".concat(t," "):"",c="".concat(o).concat(s);return c},o=function(e,t,a){var n=t?s(e,t):i(e),r=n.split("-").join(""),o="".concat((null!=a?a:e>0)?"+ ":"- "," ").concat(r);return 0===e&&(o=n),o},c=function(e){return"".concat((100*e).toFixed(2),"%")}},1575:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(a(0)),r=o(a(2)),i=o(a(6)),s=o(a(1576));function o(e){return e&&e.__esModule?e:{default:e}}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(1577);var u=function(e){var t,a=e.text,r=e.iconLeft,o=e.customCss,u=e.variant,l=(0,i.default)((c(t={"status-pill":!0},"status-pill-".concat(u),u),c(t,o,o),t));return n.default.createElement(s.default,{text:a,iconLeft:r,customCss:l})};u.propTypes={text:r.default.string,iconLeft:r.default.any,variant:r.default.oneOf(["success","danger","warning","first-level","second-level"]),customCss:r.default.string};var l=u;t.default=l},1576:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),e.exports=a(467)},1577:function(e,t,a){},1986:function(e,t,a){}}]);