(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[82],{1498:function(e,a,t){"use strict";t.r(a);var r=t(9),n=t.n(r),c=t(19),s=t(12),o=t(0),i=t.n(o),l=t(31),u=t.n(l),d=t(27),b=t(380),f=t(67),p=t(511),O=t(284),g=t(205),j=t(80),m=t(1573),D=t(1575),_=t.n(D),E=t(288),k=t.n(E),v=t(189),C=function(e,a){return["created","updated"].includes(e)?Object(v.h)(a):["amount","fee_amount"].includes(e)?Object(m.d)(a):a},T=function(e,a){return a.docs.length>1?a.docs.find((function(a){return a.request_payload_id==="".concat(e.id,"_").concat(e.status)})):a.docs[0]},L=Object(b.a)("rdlTransactionsDetails")((function(e){var a=e.t,t=e.productDetails,r=e.amount,n=e.status,c=e.isCredit,s=Object.keys(t).map((function(e){var r=C(e,t[e]);return{label:a(e),value:r||"-"}})),o=Object(m.c)(r,"IDR",c),l=function(e){var a=function(e){return e.replace(/_/g," ")}(k()(null===e||void 0===e?void 0:e.toLowerCase()));return i.a.createElement(_.a,{text:a,variant:"success"})}(n);return i.a.createElement(j.p,{title:a("transactionDetails"),items:s,amountColor:c?"success":"danger",amountValue:o,label:l})})),y=function(e){var a=e.rdlTransactionsDetails,t=a.product_data,r=t.status,n=t.amount,c=a.is_credit;return i.a.createElement(L,{productDetails:a.product_data,status:r,amount:n,isCredit:c})},h=t(48),M=Object(b.a)(["rdlTransactionsDetails","commonWords"])((function(e){var a=e.t,t=e.entity,r=e.callbackDetails,n=e.onDetailsClicked,c=e.isLoading,s=e.callbackFailureReason,o=e.errorMessage,l=e.showResendButton,b=e.onResendCallback,f=e.isResending,p=r.events;return c||o?i.a.createElement(j.z,{isLoading:c,loadingText:a("loadingCallbackEvents"),isError:!Object(d.isEmpty)(o),errorText:o}):i.a.createElement(j.g,{clickableTable:!0,title:a("callbackDetails"),showCallbackButton:l,errorMessage:s,onDetailsClicked:n,buttonText:a("resend"),tableContents:function(e,t){var r=function(e,t){return"FAILED"===t?"Error ".concat(e," - ").concat(a("commonWords:failed")):a("callbackStatusSuccess")};return e.map((function(e,a){var n=e.timestamp,c=e.status,s=e.status_code,o=e.resender_user_name;return{id:a,date:u()(n).format(h.a.FULL_DATE),status:r(s,c),sender:o||Object(d.startCase)(t)}}))}(p,t),onTableDetailsClick:function(e){!function(e,a,t){var r=a[e.id].status_code;t(Object(d.head)(r.toString()))}(e,p,n)},onButtonClick:b,isButtonLoading:f},function(e){return e&&i.a.createElement(O.a,{className:"px-2"},i.a.createElement(g.a,{md:5},i.a.createElement("p",{className:"color-ash-dark"},a("failureReason"))),i.a.createElement(g.a,{md:7},i.a.createElement("p",null,e)))}(s))})),R=Object(b.a)("rdlInvestorsDetails")((function(e){var a=e.t,t=e.rdlTransactionsDetails.investor_data,r=Object.keys(t).map((function(e){var r=C(e,t[e]);return{label:a(e),value:r||"-"}}));return i.a.createElement(j.p,{title:a("investorDetails"),items:r})})),S=function(e){return"/api/rdl-transactions/".concat(e)},A=function(e){return"/api/callback_requests/".concat(e)},x="/api/callback_requests",F="/rdl-transactions",I="CALLBACK_URL_NOT_SET",w={1:"callbackErrors:errorCode100",3:"callbackErrors:errorCode300",4:"callbackErrors:errorCode400",5:"callbackErrors:errorCode500"},B=/transaction_type=([^&]*)/,N=t(468),K=t(3),P="FETCH_RDL_TRANSACTIONS_DETAILS",U="FETCH_RDL_TRANSACTIONS_DETAILS_ERROR",W="SET_RDL_TRANSACTIONS_DETAILS",q="FETCH_CALLBACK_DETAILS",H="FETCH_CALLBACK_DETAILS_ERROR",z="SET_CALLBACK_DETAILS",J="SET_CALLBACK_DETAILS_FAILURE_REASON",V="RESEND_CALLBACK",G="SET_RESEND_CALLBACK_STATE",$="RESET_CONFIRMATION_MODAL",Q={rdlTransactionsDetails:{product_data:{amount:0},investor_data:{}},callbackDetails:{events:[],id:""},callbackFailureReason:"",isCallbackDisplayed:!1,isLoading:{rdlTransactionsDetails:!1,callbackDetails:!1,resendCallback:!1},errorMessage:{rdlTransactionsDetails:"",callbackDetails:""},confirmationModalConfig:{title:"",subtitle:"",type:"",showModal:!1}},X=function(e,a){var t=a.type,r=a.payload;switch(t){case P:return Object(K.a)(Object(K.a)({},e),{},{isLoading:Object(K.a)(Object(K.a)({},e.isLoading),{},{rdlTransactionsDetails:!0}),errorMessage:Object(K.a)(Object(K.a)({},e.errorMessage),{},{rdlTransactionsDetails:""})});case U:var n=r.errorMessage;return Object(K.a)(Object(K.a)({},e),{},{isLoading:Object(K.a)(Object(K.a)({},e.isLoading),{},{rdlTransactionsDetails:!1}),errorMessage:Object(K.a)(Object(K.a)({},e.errorMessage),{},{rdlTransactionsDetails:n})});case W:var c=function(e){return Object(d.omit)(e,["response_headers"])}(r.rdlTransactionsDetails);return Object(K.a)(Object(K.a)({},e),{},{rdlTransactionsDetails:c,isLoading:Object(K.a)(Object(K.a)({},e.isLoading),{},{rdlTransactionsDetails:!1}),errorMessage:Object(K.a)(Object(K.a)({},e.errorMessage),{},{rdlTransactionsDetails:""})});case q:return Object(K.a)(Object(K.a)({},e),{},{callbackFailureReason:"",isLoading:Object(K.a)(Object(K.a)({},e.isLoading),{},{callbackDetails:!0}),errorMessage:Object(K.a)(Object(K.a)({},e.errorMessage),{},{callbackDetails:""})});case H:var s=r.errorMessage,o=r.refetch;return Object(K.a)(Object(K.a)({},e),{},{isCallbackDisplayed:o,isLoading:Object(K.a)(Object(K.a)({},e.isLoading),{},{callbackDetails:!1}),errorMessage:Object(K.a)(Object(K.a)({},e.errorMessage),{},{callbackDetails:s})});case z:var i=r.callbackDetails,l=Object(d.isEmpty)(i)?e.callbackDetails:i;return Object(K.a)(Object(K.a)({},e),{},{callbackDetails:l,isCallbackDisplayed:!0,isLoading:Object(K.a)(Object(K.a)({},e.isLoading),{},{callbackDetails:!1}),errorMessage:Object(K.a)(Object(K.a)({},e.errorMessage),{},{callbackDetails:""})});case J:var u=r.callbackFailureReason;return Object(K.a)(Object(K.a)({},e),{},{callbackFailureReason:u});case V:return Object(K.a)(Object(K.a)({},e),{},{isLoading:Object(K.a)(Object(K.a)({},e.isLoading),{},{resendCallback:!0})});case G:var b=r.confirmationModalConfig;return Object(K.a)(Object(K.a)({},e),{},{isLoading:Object(K.a)(Object(K.a)({},e.isLoading),{},{resendCallback:!1}),confirmationModalConfig:Object(K.a)(Object(K.a)(Object(K.a)({},e.confirmationModalConfig),b),{},{showModal:!0})});case $:return Object(K.a)(Object(K.a)({},e),{},{confirmationModalConfig:Object(K.a)(Object(K.a)({},e.confirmationModalConfig),{},{title:"",subtitle:"",type:"",showModal:!1})});default:return e}};a.default=Object(f.o)(Object(b.a)(["rdlTransactionsDetails","commonWords","errorMessages","callbackErrors"])((function(e){var a=e.t,t=e.user,r=t.can_manage_tech_settings,l=t.can_edit,b=e.apiCall,f=b.axiosGet,m=b.axiosPost,D=e.history,_=e.match,E=e.location,k=e.environment,v=e.entity,C=Object(o.useState)(!1),L=Object(s.a)(C,2),h=L[0],K=L[1],Y=Object(o.useReducer)(X,Q),Z=Object(s.a)(Y,2),ee=Z[0],ae=Z[1],te=ee.rdlTransactionsDetails,re=ee.callbackDetails,ne=ee.callbackFailureReason,ce=ee.isLoading,se=ee.errorMessage,oe=ee.confirmationModalConfig;Object(o.useEffect)((function(){K(!0),de()}),[]),Object(o.useEffect)((function(){h&&ue()}),[k]);var ie=E.search?E.search.match(B)[1]:void 0,le=_.params.id,ue=function(){D.push({pathname:F,state:{isFromDetailsPage:!0}})},de=function(){var e=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ae({type:P}),e.next=3,f(S(le),{transaction_type:ie});case 3:if(!(t=e.sent).error_code){e.next=7;break}return ae({type:U,payload:{errorMessage:Object(N.a)(t.error_code,a)}}),e.abrupt("return");case 7:return ae({type:W,payload:{rdlTransactionsDetails:t}}),e.next=10,be({refetch:!1});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(c.a)(n.a.mark((function e(t){var r,c,s,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.refetch,ae({type:q}),c={search_query:le,from:u()(te.product_data.updated).subtract(7,"days").toISOString(),to:u()(te.product_data.updated).add(7,"days").toISOString()},e.next=5,f(x,c);case 5:if(!(s=e.sent).error_code&&s.status!==I){e.next=9;break}return ae({type:H,payload:{errorMessage:Object(N.a)(s.error_code,a),refetch:r}}),e.abrupt("return");case 9:o=T(te,s),ae({type:z,payload:{callbackDetails:o}});case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),fe=function(){var e=Object(c.a)(n.a.mark((function e(t){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ae({type:V}),e.next=3,m(A(t));case 3:if(!(r=e.sent).error_code){e.next=7;break}return ae({type:G,payload:{confirmationModalConfig:{title:a("commonWords:error"),subtitle:Object(N.a)(r.error_code,a),type:"danger"}}}),e.abrupt("return");case 7:ae({type:G,payload:{confirmationModalConfig:{title:a("commonWords:success"),subtitle:a("resendCallbackSuccess"),type:"success"}}}),be({refetch:!0});case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,i.a.createElement(j.o,{title:a("headerTitle"),goBack:ue}),ce.rdlTransactionsDetails||se.rdlTransactionsDetails?i.a.createElement(j.z,{isLoading:ce.rdlTransactionsDetails,loadingText:a("loadingRDLTransactionsDetails"),isError:!Object(d.isEmpty)(se.rdlTransactionsDetails),errorText:se.rdlTransactionsDetails}):i.a.createElement(p.a,null,i.a.createElement(O.a,null,i.a.createElement(g.a,{lg:6},i.a.createElement(y,{rdlTransactionsDetails:te}),i.a.createElement(M,{callbackDetails:re,callbackFailureReason:ne,onDetailsClicked:function(e){ae({type:J,payload:{callbackFailureReason:a(w[e])}})},isLoading:ce.callbackDetails,errorMessage:se.callbackDetails,showResendButton:r||l,onResendCallback:function(){return fe(re.id)},isResending:ce.resendCallback,entity:v})),i.a.createElement(g.a,{lg:6},i.a.createElement(R,{rdlTransactionsDetails:te})))),i.a.createElement(j.j,Object.assign({},oe,{handleClose:function(){ae({type:$})},preserveMobileView:!0})))})))},1573:function(e,a,t){"use strict";t.d(a,"a",(function(){return r})),t.d(a,"d",(function(){return n})),t.d(a,"b",(function(){return s})),t.d(a,"c",(function(){return o})),t.d(a,"e",(function(){return i}));var r=function(e,a){return"IDR"!==a&&a?e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"):e.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")},n=function(e){return e.toLocaleString("en-US").replace(/,/g,".")},c=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.toLocaleString("en-US",{minimumFractionDigits:a?2:0})},s=function(e,a){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=c(e,r),s="IDR"===a?n.replace(/,/g,"."):n,o=t?"".concat(a," "):"",i="".concat(o).concat(s);return i},o=function(e,a,t){var r=a?s(e,a):c(e),n=r.split("-").join(""),o="".concat((null!=t?t:e>0)?"+ ":"- "," ").concat(n);return 0===e&&(o=r),o},i=function(e){return"".concat((100*e).toFixed(2),"%")}},1575:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=o(t(0)),n=o(t(2)),c=o(t(6)),s=o(t(1576));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}t(1577);var l=function(e){var a,t=e.text,n=e.iconLeft,o=e.customCss,l=e.variant,u=(0,c.default)((i(a={"status-pill":!0},"status-pill-".concat(l),l),i(a,o,o),a));return r.default.createElement(s.default,{text:t,iconLeft:n,customCss:u})};l.propTypes={text:n.default.string,iconLeft:n.default.any,variant:n.default.oneOf(["success","danger","warning","first-level","second-level"]),customCss:n.default.string};var u=l;a.default=u},1576:function(e,a,t){Object.defineProperty(a,"__esModule",{value:!0}),e.exports=t(467)},1577:function(e,a,t){}}]);