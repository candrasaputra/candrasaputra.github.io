(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[59],{1493:function(e,t,a){"use strict";a.r(t);var n=a(81),c=a(3),r=a(9),i=a.n(r),s=a(19),o=a(12),l=a(0),m=a.n(l),u=a(27),d=a(380),b=a(67),_=a(80),p=a(31),E=a.n(p),h=a(1667),f=a(1575),O=a.n(f),R=a(288),g=a.n(R),C=function(e){return e.replace(/_/g," ")},T=function(e){var t=g()(null===e||void 0===e?void 0:e.toLowerCase());switch(e){case h.b.COMPLETED:return m.a.createElement(O.a,{text:t,variant:"success"});case h.b.CHECK:case h.b.PENDING:return m.a.createElement(O.a,{text:t,variant:"warning"});case h.b.FAILED:case h.b.DELETED:return m.a.createElement(O.a,{text:t,variant:"danger"});case h.b.HAS_ERRORS:return m.a.createElement(O.a,{text:g()(h.a.HAS_ERRORS.toLowerCase()),variant:"danger"});case h.b.NEEDS_USER_VALIDATION:case h.b.NEEDS_APPROVAL:return m.a.createElement(O.a,{text:g()(C(e).toLowerCase()),variant:"warning"});case h.b.UNVALIDATED:return m.a.createElement(O.a,{text:g()(h.a.UNVALIDATED.toLowerCase())});default:return m.a.createElement(O.a,{text:g()(C(e).toLowerCase())})}},I=a(37),j=a(26),A=a(1573),D=function(e,t,a,n){var c,r=n.brStatus,i=t.status;if(r===h.b.HAS_ERRORS)switch(i){case h.b.HAS_ERRORS:c=m.a.createElement("img",{src:"/images/icons/ic-error.svg",alt:"error_icon"});break;default:c=m.a.createElement("img",{src:"/images/icons/stopwatch-icon.svg",alt:"timer_icon"})}else c=T(i);return c},v=function(e,t,a,n){var c=n.t,r=n.onClickEdit,i=n.onClickDelete;return m.a.createElement(m.a.Fragment,null,m.a.createElement(_.h,{icon:m.a.createElement(I.a,{size:"lg",icon:j.B}),withTooltip:!0,tooltipText:c("commonWords:edit"),customCss:"cursor-pointer mr-3",onClick:function(){return r(t)}}),m.a.createElement(_.h,{icon:m.a.createElement(I.a,{size:"lg",icon:j.K}),withTooltip:!0,tooltipText:c("commonWords:delete"),customCss:"cursor-pointer",onClick:function(){return i(t)}}))},M=function(e,t,a,n){var c=Number(t.amount);return isNaN(c)?t.amount:Object(A.d)(c)},y=function(e,t){if(t===h.b.COMPLETED)return{width:"5%",items:[{field:"bank_transfer_reference",text:e("copyBankTransferReference"),textPressed:e("commonWords:valueCopied"),action:"copy"}]}},L=function(e){var t=e.t,a=e.status,n=e.onClickEdit,c=e.onClickDelete,r=[{dataField:"amount",text:t("amount"),formatter:M},{dataField:"recipient_account_details_account_code",text:t("recipientBankCode")},{dataField:"recipient_account_details_account_holder_name",text:t("recipientAccountName"),type:"text"},{dataField:"recipient_account_details_account_number",text:t("recipientAccountNumber"),type:"text"},{dataField:"description",text:t("description"),type:"text"},{dataField:"status",text:t("status"),formatter:D,formatExtraData:{t:t,brStatus:a}}];return a===h.b.HAS_ERRORS?r.push({text:t("actions"),formatter:v,formatExtraData:{t:t,onClickEdit:n,onClickDelete:c}}):a===h.b.COMPLETED&&r.splice(5,0,{dataField:"bank_transfer_reference",text:t("bankTransferReference"),type:"text"}),r},N=function(e,t){return t===h.b.HAS_ERRORS?e.filter((function(e){return e.status===h.b.HAS_ERRORS})):e},k=a(48),x=Object(d.a)("batchRemittancesDetails")((function(e){var t=e.t,a=e.goBack,n=e.batchRemittanceData,c=e.isLoading,r=[h.b.COMPLETED,h.b.PENDING,h.b.CHECK,h.b.FAILED].includes(n.status),i=c?m.a.createElement(_.X,null):m.a.createElement(m.a.Fragment,null,m.a.createElement("span",{className:"color-ash-dark min-width-240"},t("reference"),":"," ",m.a.createElement("span",{className:"font-weight-bold color-black"},n.reference)),m.a.createElement("span",{className:"color-ash-dark min-width-240"},t("uploader"),":"," ",m.a.createElement("span",{className:"font-weight-bold color-black"},n.uploader_name)," ".concat(t("on")," "),m.a.createElement("span",{className:"font-weight-bold color-black"},E()(n.created).format(k.a.DD_MM_YYYY))),r&&m.a.createElement("span",{className:"color-ash-dark min-width-240"},t("approvedBy"),":"," ",m.a.createElement("span",{className:"font-weight-bold color-black"},n.approver_name)," ".concat(t("on")," "),m.a.createElement("span",{className:"font-weight-bold color-black"},E()(n.approved_at).format(k.a.DD_MM_YYYY))));return m.a.createElement(_.o,{title:T(n.status),goBack:a,customContent:i})})),S=a(514),w=a(284),B=a(231),H=a(205),P=Object(d.a)("batchRemittancesDetails")((function(e){var t=e.t,a=e.sectionTitle,n=e.sectionSubtitle,c=e.transactionIcon,r=e.totalTransactions,i=e.amountIcon,s=e.totalAmount,o=function(e,t,a){return m.a.createElement("div",{className:"d-flex align-items-center br-summary-info"},m.a.createElement("div",{className:"mr-4"},m.a.createElement(B.a,{src:e,width:35})),m.a.createElement("div",null,m.a.createElement("p",{className:"mb-0 font-weight-bold text-lg"},Object(u.isUndefined)(t)?0:Object(A.d)(t)),m.a.createElement("p",{className:"mb-0 color-ash-dark"},a)))};return m.a.createElement(H.a,{lg:4,className:"d-flex flex-column justify-content-between"},m.a.createElement("div",null,m.a.createElement("p",{className:"font-weight-bold mb-0"},a),m.a.createElement("p",{className:"color-ash-dark"},n)),m.a.createElement("div",null,o(c,r,t("totalTransactions")),o(i,s,t("totalAmount"))))})),F=(a(2164),Object(d.a)(["batchRemittancesDetails"])((function(e){var t=e.t,a=e.batchRemittanceData,n=a.items_count,c=a.items_amount,r=a.completed_items_count,i=a.completed_items_amount,s=a.failed_items_count,o=a.failed_items_amount,l=a.status,u=l===h.b.PENDING,d=[{sectionTitle:t("uploaded"),sectionSubtitle:t("uploadedDesc"),transactionIcon:"/images/icons/icon-swap.svg",totalTransactions:n,amountIcon:"/images/icons/icon-idr-grey.svg",totalAmount:c},{sectionTitle:t("disbursedSuccessfully"),sectionSubtitle:t("disbursedSuccessfullyDesc"),transactionIcon:"/images/icons/icon-success.svg",totalTransactions:r,amountIcon:"/images/icons/icon-idr-green.svg",totalAmount:i},{sectionTitle:t("errors"),sectionSubtitle:t("errorsDesc"),transactionIcon:"/images/icons/icon-x.svg",totalTransactions:s,amountIcon:"/images/icons/icon-idr-red.svg",totalAmount:o}],b=m.a.createElement("span",{className:"font-weight-bold text-md"},function(e,t){switch(e){case h.b.COMPLETED:case h.b.FAILED:case h.b.CHECK:return t("batchSummary");case h.b.PENDING:return t("processingSummary");case h.b.NEEDS_APPROVAL:return t("transactionsToApprove");default:return!1}}(l,t));return m.a.createElement(_.z,{title:b},u&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1?arguments[1]:void 0,n=Math.round(e/a*100);return m.a.createElement("div",{className:"mb-3"},m.a.createElement("p",{className:"color-ash-dark"},t("transactionsDisbursed",{completedItemsCount:e,itemsCount:a})),m.a.createElement(S.a,{animated:!0,now:n,label:"".concat(n,"%"),className:"br-items-progress-bar progress-bar-primary"}))}(r,n),m.a.createElement(w.a,null,d.map((function(e,t){return m.a.createElement(P,{sectionTitle:e.sectionTitle,sectionSubtitle:e.sectionSubtitle,transactionIcon:e.transactionIcon,totalTransactions:e.totalTransactions,amountIcon:e.amountIcon,totalAmount:e.totalAmount,key:t})}))))}))),V=a(20),G=a.n(V),U=a(290),Y=a.n(U),K=Object(d.a)(["batchRemittancesDetails","commonWords","commonComponents"])((function(e){var t=e.t,a=e.isLoading,n=e.status,c=e.batchRemittanceItems,r=e.onDetailsClicked,i=e.onClickEdit,s=e.onClickDelete,o=e.onClickMarkAsComplete,l=e.isClickable,d=e.onClickLoadMore,b=e.hasNext,p=e.isRefetching,E=n===h.b.CHECK,f=!Object(u.isEmpty)(c)&&m.a.createElement("span",{className:"font-weight-bold text-md"},function(e,t){switch(e){case h.b.COMPLETED:case h.b.FAILED:case h.b.PENDING:case h.b.CHECK:return t("batchRemittanceSummary");case h.b.NEEDS_APPROVAL:return t("approveBatchRemittance");case h.b.HAS_ERRORS:return t("fixUploadIssues");default:return!1}}(n,t)),O=E&&m.a.createElement(G.a,{size:"sm",isLoading:a.markAsComplete,iconLeft:m.a.createElement(I.a,{icon:j.i}),onClick:o},t("markAsComplete")),R=function(e){var a={caption:"",subtitle:""};switch(e){case h.b.VERIFYING:a.caption=t("verifyingEmptyCaption"),a.subtitle=t("pleaseRefresh");break;default:a.caption=t("noTransactions")}return a};return m.a.createElement(_.z,{title:f,isLoading:a,loadingText:t("loadingBatchRemittanceItems"),isEmpty:Object(u.isEmpty)(c),emptyCaption:R(n).caption,emptySubtitle:R(n).subtitle,headerButton:O},m.a.createElement(Y.a,{noBorder:!0,isClickable:l,onDetailsClicked:r,tableHeaderColumns:L({t:t,status:n,onClickEdit:i,onClickDelete:s}),tableContentRows:c,verticalAlign:"middle",onClickLoadMore:d,withLoadMore:b,loadMoreText:t("commonComponents:tableMore"),isLoadingMore:p,actionButtonConfig:y(t,n)}))})),W=a(49),z=a.n(W),J=a(149),X=a.n(J),$=Object(d.a)(["batchRemittancesDetails","commonWords"])((function(e){var t=e.t,a=e.canEdit,n=e.showModal,c=e.hasErrors,r=e.isEditing,i=e.isValidating,s=e.handleClose,o=e.handleChangeInput,l=e.selectedBatchRemittanceItem,u=e.onClickEdit,d=e.onClickValidate,b=function(e,t){var a=e.external_id,n=e.amount,c=e.purpose_code,r=e.description,i=e.sender_customer_type,s=e.sender_name,o=e.sender_address_country_code,l=e.sender_address_city,m=e.recipient_customer_type,u=e.recipient_name,d=e.recipient_address_country_code,b=e.recipient_address_city,_=e.recipient_account_details_account_code,p=e.recipient_account_details_account_number,E=e.recipient_account_details_account_holder_name,h=e.recipient_email,f=e.recipient_mobile_number,O=e.recipient_phone_number,R=e.errors;return{GENERAL_DETAILS:[{value:a,name:"external_id",label:t("externalId"),errorMessage:R.external_id},{value:n,name:"amount",label:t("amount"),errorMessage:R.amount},{value:c,name:"purpose_code",label:t("purposeCode"),errorMessage:R.purpose_code},{value:r,name:"description",label:t("description"),errorMessage:R.description}],RECIPIENT_DETAILS:[{value:m,name:"recipient_customer_type",label:t("customerType"),errorMessage:R.recipient_customer_type},{value:u,name:"recipient_name",label:t("recipientName"),errorMessage:R.recipient_name},{value:d,name:"recipient_address_country_code",label:t("countryCode"),errorMessage:R.recipient_address_country_code},{value:b,name:"recipient_address_city",label:t("city"),errorMessage:R.recipient_address_city},{value:_,name:"recipient_account_details_account_code",label:t("accountCode"),errorMessage:R.recipient_account_details_account_code},{value:p,name:"recipient_account_details_account_number",label:t("accountNumber"),errorMessage:R.recipient_account_details_account_number},{value:E,name:"recipient_account_details_account_holder_name",label:t("accountHolder"),errorMessage:R.recipient_account_details_account_holder_name},{value:h,name:"recipient_email",label:t("email"),errorMessage:R.recipient_email},{value:f,name:"recipient_mobile_number",label:t("mobilePhone"),errorMessage:R.recipient_mobile_number},{value:O,name:"recipient_phone_number",label:t("phoneNumber"),errorMessage:R.recipient_phone_number}],SENDER_DETAILS:[{value:i,name:"sender_customer_type",label:t("customerType"),errorMessage:R.sender_customer_type},{value:s,name:"sender_name",label:t("senderName"),errorMessage:R.sender_name},{value:o,name:"sender_address_country_code",label:t("countryCode"),errorMessage:R.sender_address_country_code},{value:l,name:"sender_address_city",label:t("city"),errorMessage:R.sender_address_city}]}}(l,t),_=b.GENERAL_DETAILS,p=b.RECIPIENT_DETAILS,E=b.SENDER_DETAILS,h=m.a.createElement("div",{className:"d-flex justify-content-center align-items-center mt-4 w-100"},r||i?m.a.createElement(G.a,{customCss:"w-20",variant:"primary",onClick:d,isLoading:i},t("commonWords:validate")):m.a.createElement(G.a,{customCss:"w-20",variant:"primary",onClick:u},t("commonWords:edit")));return m.a.createElement(z.a,{title:t("remittanceDetails"),showModal:n,handleClose:s,customCssBody:"text-left",size:"xl",closeButton:!0},m.a.createElement(w.a,null,m.a.createElement(H.a,{md:4},m.a.createElement("p",{className:"text-fair mb-1"},t("generalDetails")),_.map((function(e,t){var a=e.label,n=e.name,c=e.value,s=e.errorMessage;return m.a.createElement(X.a,{label:a,name:n,value:c,onChange:o,errorMessage:s,disabled:!r||i,customCss:"mb-2",key:t})}))),m.a.createElement(H.a,{md:4},m.a.createElement("p",{className:"text-fair mb-1"},t("recipientDetails")),p.map((function(e,t){var a=e.label,n=e.name,c=e.value,s=e.errorMessage;return m.a.createElement(X.a,{label:a,name:n,value:c,onChange:o,errorMessage:s,disabled:!r||i,customCss:"mb-2",key:t})}))),m.a.createElement(H.a,{md:4},m.a.createElement("p",{className:"text-fair mb-1"},t("senderDetails")),E.map((function(e,t){var a=e.label,n=e.name,c=e.value,s=e.errorMessage;return m.a.createElement(X.a,{label:a,name:n,value:c,onChange:o,errorMessage:s,disabled:!r||i,customCss:"mb-2",key:t})}))),c&&a&&h))})),q="/api/batch_remittances",Q=function(e){return"/api/batch_remittances/".concat(e)},Z="/api/batch_remittance_items",ee=function(e){return"/api/batch_remittance_items/".concat(e)},te="/batch-remittances",ae=a(468),ne=a(24),ce="FETCH_BATCH_REMITTANCE_ITEMS",re="FETCH_BATCH_REMITTANCE_DATA",ie="SET_BATCH_REMITTANCE_ITEMS",se="SET_BATCH_REMITTANCE_DATA",oe="FETCH_BATCH_REMITTANCE_ITEMS_ERROR",le="FETCH_BATCH_REMITTANCE_DATA_ERROR",me="OPEN_BATCH_REMITTANCE_ITEM_MODAL",ue="CLOSE_BATCH_REMITTANCE_ITEM_MODAL",de="SET_EDITING_BATCH_REMITTANCE_ITEM",be="HANDLE_CHANGE_BATCH_REMITTANCE_ITEM",_e="VALIDATE_BATCH_REMITTANCE_ITEM",pe="VALIDATE_BATCH_REMITTANCE_ITEM_SUCCESS",Ee="VALIDATE_BATCH_REMITTANCE_ITEM_ERROR",he="SET_BATCH_REMITTANCE_ITEM_ERRORS",fe="OPEN_DELETE_BATCH_REMITTANCE_ITEM_MODAL",Oe="CLOSE_DELETE_BATCH_REMITTANCE_ITEM_MODAL",Re="DELETE_BATCH_REMITTANCE_ITEM",ge="DELETE_BATCH_REMITTANCE_ITEM_ERROR",Ce="SET_MARK_AS_COMPLETE_MODAL",Te="COMPLETE_BATCH_REMITTANCE",Ie="COMPLETE_BATCH_REMITTANCE_SUCCESS",je="COMPLETE_BATCH_REMITTANCE_ERROR",Ae={id:"",reference:"",created:"",updated:"",file_id:"",status:"",items_count:0,items_amount:0,failed_items_count:0,failed_items_amount:0,completed_items_count:0,completed_items_amount:0,uploader_name:"",approver_name:"",approved_at:""},De={id:"",batch_remittance_id:"",status:"",created:"",updated:"",external_id:"",amount:"",purpose_code:"",description:"",sender_customer_type:"",sender_name:"",sender_address_country_code:"",sender_address_city:"",recipient_customer_type:"",recipient_name:"",recipient_address_country_code:"",recipient_address_city:"",recipient_account_details_account_code:"",recipient_account_details_account_number:"",recipient_account_details_account_holder_name:"",recipient_email:"",recipient_mobile_number:"",recipient_phone_number:"",bank_transfer_reference:"",failure_code:"",failure_message:"",errors:{external_id:"",amount:"",purpose_code:"",description:"",sender_customer_type:"",sender_name:"",sender_address_country_code:"",sender_address_city:"",recipient_customer_type:"",recipient_name:"",recipient_address_country_code:"",recipient_address_city:"",recipient_account_details_account_code:"",recipient_account_details_account_number:"",recipient_account_details_account_holder_name:"",recipient_email:"",recipient_mobile_number:"",recipient_phone_number:""}},ve={batchRemittanceData:Ae,batchRemittanceItems:[],page:1,hasNext:!1,selectedBatchRemittanceItem:De,batchRemittanceItemToDelete:"",isEditing:!1,isLoading:{batchRemittanceData:!1,batchRemittanceItems:!1,validate:!1,deleteBR:!1,markAsComplete:!1,refetch:!1},errorMessage:{batchRemittanceData:"",batchRemittanceItems:""},showModal:{brItem:!1,deleteBR:!1,markAsComplete:!1}},Me=function(e,t){var a=t.type,n=t.payload;switch(a){case se:var r=n.batchRemittanceData;return Object(c.a)(Object(c.a)({},e),{},{batchRemittanceData:Object(c.a)(Object(c.a)({},e.batchRemittanceData),r),isLoading:Object(c.a)(Object(c.a)({},e.isLoading),{},{batchRemittanceData:!1})});case ie:var i=n.batchRemittanceItems,s=n.refetch,o=n.hasNext,l=s?[].concat(Object(ne.a)(e.batchRemittanceItems),Object(ne.a)(i)):i;return Object(c.a)(Object(c.a)({},e),{},{batchRemittanceItems:l,isLoading:Object(c.a)(Object(c.a)({},e.isLoading),{},{batchRemittanceItems:!1,refetch:!1}),page:e.page+1,hasNext:o});case re:return Object(c.a)(Object(c.a)({},e),{},{batchRemittanceData:Ae,isLoading:Object(c.a)(Object(c.a)({},e.isLoading),{},{batchRemittanceData:!0}),errorMessage:Object(c.a)(Object(c.a)({},e.errorMessage),{},{batchRemittanceData:""})});case ce:var m=n.refetch,d={refetch:m,batchRemittanceItems:!m};return Object(c.a)(Object(c.a)({},e),{},{isLoading:Object(c.a)(Object(c.a)({},e.isLoading),d),errorMessage:Object(c.a)(Object(c.a)({},e.errorMessage),{},{batchRemittanceItems:""})});case le:return Object(c.a)(Object(c.a)({},e),{},{errorMessage:Object(c.a)(Object(c.a)({},e.errorMessage),{},{batchRemittanceData:n.errorMessage}),isLoading:Object(c.a)(Object(c.a)({},e.isLoading),{},{batchRemittanceData:!1})});case oe:return Object(c.a)(Object(c.a)({},e),{},{errorMessage:Object(c.a)(Object(c.a)({},e.errorMessage),{},{batchRemittanceItems:n.errorMessage}),isLoading:Object(c.a)(Object(c.a)({},e.isLoading),{},{batchRemittanceItems:!1,refetch:!1})});case me:var b=n.selectedBatchRemittanceItem;return Object(c.a)(Object(c.a)({},e),{},{showModal:Object(c.a)(Object(c.a)({},e.showModal),{},{brItem:!0}),selectedBatchRemittanceItem:Object(c.a)(Object(c.a)({},e.selectedBatchRemittanceItem),b)});case ue:return Object(c.a)(Object(c.a)({},e),{},{isEditing:!1,showModal:Object(c.a)(Object(c.a)({},e.showModal),{},{brItem:!1}),selectedBatchRemittanceItem:De});case de:return Object(c.a)(Object(c.a)({},e),{},{isEditing:!0});case _e:return Object(c.a)(Object(c.a)({},e),{},{isLoading:Object(c.a)(Object(c.a)({},e.isLoading),{},{validate:!0})});case Ee:return Object(c.a)(Object(c.a)({},e),{},{isLoading:Object(c.a)(Object(c.a)({},e.isLoading),{},{validate:!1})});case pe:return Object(c.a)(Object(c.a)({},e),{},{isLoading:Object(c.a)(Object(c.a)({},e.isLoading),{},{validate:!1}),isEditing:!1,showModal:Object(c.a)(Object(c.a)({},e.showModal),{},{brItem:!1})});case he:var _=n.errors,p=n.remittanceItemId,E=function(e){return e.id===p},h=Object(ne.a)(e.batchRemittanceItems),f=h.find(E),O=Object(u.findIndex)(h,E);return f.errors=_,h.splice(O,1,f),Object(c.a)(Object(c.a)({},e),{},{batchRemittanceItems:h,selectedBatchRemittanceItem:Object(c.a)(Object(c.a)({},e.selectedBatchRemittanceItem),{},{errors:_})});case fe:var R=n.batchRemittanceItemToDelete;return Object(c.a)(Object(c.a)({},e),{},{batchRemittanceItemToDelete:R,showModal:Object(c.a)(Object(c.a)({},e.showModal),{},{deleteBR:!0})});case Oe:return Object(c.a)(Object(c.a)({},e),{},{batchRemittanceItemToDelete:"",isLoading:Object(c.a)(Object(c.a)({},e.isLoading),{},{deleteBR:!1}),showModal:Object(c.a)(Object(c.a)({},e.showModal),{},{deleteBR:!1})});case Re:return Object(c.a)(Object(c.a)({},e),{},{isLoading:Object(c.a)(Object(c.a)({},e.isLoading),{},{deleteBR:!0})});case ge:return Object(c.a)(Object(c.a)({},e),{},{isLoading:Object(c.a)(Object(c.a)({},e.isLoading),{},{deleteBR:!1})});case Ce:var g=n.isOpen;return Object(c.a)(Object(c.a)({},e),{},{showModal:Object(c.a)(Object(c.a)({},e.showModal),{},{markAsComplete:g})});case Te:return Object(c.a)(Object(c.a)({},e),{},{isLoading:Object(c.a)(Object(c.a)({},e.isLoading),{},{markAsComplete:!0})});case je:return Object(c.a)(Object(c.a)({},e),{},{isLoading:Object(c.a)(Object(c.a)({},e.isLoading),{},{markAsComplete:!1})});case Ie:return Object(c.a)(Object(c.a)({},e),{},{isLoading:Object(c.a)(Object(c.a)({},e.isLoading),{},{markAsComplete:!1}),showModal:Object(c.a)(Object(c.a)({},e.showModal),{},{markAsComplete:!1})});case be:return Object(c.a)(Object(c.a)({},e),{},{selectedBatchRemittanceItem:Object(c.a)(Object(c.a)({},e.selectedBatchRemittanceItem),n)});default:return e}};t.default=Object(b.o)(Object(d.a)(["batchRemittancesDetails","commonWords","errorMessages"])((function(e){var t=e.t,a=e.apiCall,r=a.axiosGet,d=a.axiosPatch,b=e.history,p=e.match,E=e.user.can_edit,f=e.environment,O=e.notify,R=Object(l.useState)(!1),g=Object(o.a)(R,2),C=g[0],T=g[1],I=Object(l.useReducer)(Me,ve),j=Object(o.a)(I,2),A=j[0],D=j[1],v=A.batchRemittanceData,M=A.batchRemittanceItems,y=A.batchRemittanceItemToDelete,L=A.selectedBatchRemittanceItem,k=A.isEditing,S=A.isLoading,w=A.showModal,B=A.errorMessage,H=A.page,P=A.hasNext,V=v.status===h.b.HAS_ERRORS,G=v.status===h.b.VERIFYING,U=V||G;Object(l.useEffect)((function(){T(!0),Y()}),[]),Object(l.useEffect)((function(){C&&z()}),[f]);var Y=function(){var e=Object(s.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D({type:re}),a=p.params.id,e.next=4,r(Q(a));case 4:if(!(n=e.sent).error_code){e.next=8;break}return D({type:le,payload:{errorMessage:Object(ae.a)(n.error_code,t)}}),e.abrupt("return");case 8:return D({type:se,payload:{batchRemittanceData:n}}),e.next=11,W(n.status);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(s.a)(i.a.mark((function e(a){var n,c,s,o,l,m,u=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],D({type:ce,payload:{refetch:n}}),c=p.params.id,s=a===h.b.HAS_ERRORS,o={batch_remittance_id:c,statuses:s?[h.b.HAS_ERRORS]:[],page:H,environment:f},e.next=7,r(Z,o);case 7:if(!(l=e.sent).error_code){e.next=11;break}return D({type:oe,payload:{errorMessage:Object(ae.a)(l.error_code,t)}}),e.abrupt("return");case 11:m=N(l.docs,a),D({type:ie,payload:{batchRemittanceItems:m,refetch:n,hasNext:l.has_next}});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){b.push({pathname:te,state:{isFromDetailsPage:!0,activeTab:b.location.state?b.location.state.activeTab:0}})},J=function(e){D({type:me,payload:{selectedBatchRemittanceItem:e}})},X=function(){var e=Object(s.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D({type:Re}),a={status:h.b.DELETED},e.next=4,d(ee(y),a);case 4:if(!e.sent.error_code){e.next=9;break}return D({type:ge}),O({type:"error",message:t("deleteBatchRemittanceFailed")}),e.abrupt("return");case 9:D({type:Oe}),O({type:"success",message:t("deleteBatchRemittanceSuccess")}),Y();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){D({type:Oe})},Ae=function(){D({type:Ce,payload:{isOpen:!1}})},De=function(){var e=Object(s.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D({type:Te}),a=[{id:v.id,status:h.b.COMPLETED}],e.next=4,d(q,a);case 4:if(!(n=e.sent).error_code){e.next=9;break}return D({type:je}),O({type:"error",message:Object(ae.a)(n.error_code,t)}),e.abrupt("return");case 9:D({type:Ie}),O({type:"success",message:t("markAsCompleteSuccess")}),Y();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=Object(s.a)(i.a.mark((function e(){var a,n,r,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D({type:_e}),a=L.id,n=Object(u.omit)(L,["id","batch_remittance_id","created","updated","errors"]),r=Object(u.omitBy)(n,(function(e){return Object(u.isEmpty)(e)||Object(u.isUndefined)(e)})),s=Object(c.a)(Object(c.a)({},r),{},{status:h.b.VERIFYING}),e.next=7,d(ee(a),s);case 7:if(!(o=e.sent).error_code){e.next=11;break}return Ne(Object(ae.a)(o.error_code,t)),e.abrupt("return");case 11:Le(a);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=Object(s.a)(i.a.mark((function e(a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(ee(a));case 2:if(!(n=e.sent).error_code){e.next=6;break}return Ne(t("validateBatchRemittanceItemError")),e.abrupt("return");case 6:if(n.status===h.b.VERIFYING){e.next=17;break}if(!Object(u.isEmpty)(n.errors)){e.next=12;break}ke(),Y(),e.next=15;break;case 12:return D({type:he,payload:{errors:n.errors,remittanceItemId:a}}),Ne(t("checkBatchRemittanceItemValidation")),e.abrupt("return");case 15:e.next=18;break;case 17:setTimeout((function(){Le(a)}),5e3);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(e){D({type:Ee}),O({type:"error",message:e})},ke=function(){D({type:pe}),O({type:"success",message:t("validateBatchRemittanceItemSuccess")})};return m.a.createElement(m.a.Fragment,null,m.a.createElement(x,{goBack:z,batchRemittanceData:v,isLoading:S.batchRemittanceData}),S.batchRemittanceData||B.batchRemittanceData?m.a.createElement(_.z,{isLoading:S.batchRemittanceData,loadingText:t("loadingBatchRemittanceData"),isError:!Object(u.isEmpty)(B.batchRemittanceData),errorText:B.batchRemittanceData}):m.a.createElement(m.a.Fragment,null,!U&&m.a.createElement(F,{batchRemittanceData:v}),m.a.createElement(K,{isLoading:S.batchRemittanceItems,status:v.status,batchRemittanceItems:M,onDetailsClicked:J,isClickable:!V,onClickEdit:function(e){return J(e)},onClickDelete:function(e){D({type:fe,payload:{batchRemittanceItemToDelete:e.id}})},onClickMarkAsComplete:function(){D({type:Ce,payload:{isOpen:!0}})},onClickLoadMore:function(){W(v.status,!0)},hasNext:P,isRefetching:S.refetch})),m.a.createElement($,{canEdit:E,hasErrors:V,showModal:w.brItem,isEditing:k,isValidating:S.validate,onClickEdit:function(){D({type:de})},onClickValidate:ye,handleChangeInput:function(e){D({type:be,payload:Object(n.a)({},e.target.name,e.target.value)})},selectedBatchRemittanceItem:L,handleClose:function(){D({type:ue})}}),m.a.createElement(_.j,{withCancel:!0,type:"info",title:t("deleteBatchRemittance"),subtitle:t("deleteBatchRemittanceSubtitle"),buttonText:t("commonWords:delete"),showModal:w.deleteBR,isButtonLoading:S.deleteBR,handleConfirm:X,handleClose:ne,handleCancel:ne}),m.a.createElement(_.j,{withCancel:!0,type:"info",title:t("markAsCompleteTitle"),subtitle:t("markAsCompleteSubtitle"),buttonText:t("markAsComplete"),showModal:w.markAsComplete,isButtonLoading:S.markAsComplete,handleConfirm:De,handleClose:Ae,handleCancel:Ae}))})))},1573:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return c})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"e",(function(){return o}));var n=function(e,t){return"IDR"!==t&&t?e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"):e.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")},c=function(e){return e.toLocaleString("en-US").replace(/,/g,".")},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.toLocaleString("en-US",{minimumFractionDigits:t?2:0})},i=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=r(e,n),i="IDR"===t?c.replace(/,/g,"."):c,s=a?"".concat(t," "):"",o="".concat(s).concat(i);return o},s=function(e,t,a){var n=t?i(e,t):r(e),c=n.split("-").join(""),s="".concat((null!=a?a:e>0)?"+ ":"- "," ").concat(c);return 0===e&&(s=n),s},o=function(e){return"".concat((100*e).toFixed(2),"%")}},1575:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(0)),c=s(a(2)),r=s(a(6)),i=s(a(1576));function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(1577);var l=function(e){var t,a=e.text,c=e.iconLeft,s=e.customCss,l=e.variant,m=(0,r.default)((o(t={"status-pill":!0},"status-pill-".concat(l),l),o(t,s,s),t));return n.default.createElement(i.default,{text:a,iconLeft:c,customCss:m})};l.propTypes={text:c.default.string,iconLeft:c.default.any,variant:c.default.oneOf(["success","danger","warning","first-level","second-level"]),customCss:c.default.string};var m=l;t.default=m},1576:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),e.exports=a(467)},1577:function(e,t,a){},1667:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return c}));var n={COMPLETED:"COMPLETED",PENDING:"PENDING",FAILED:"FAILED",DELETED:"DELETED",HAS_ERRORS:"HAS_ERRORS",CHECK:"CHECK",NEEDS_USER_VALIDATION:"NEEDS_USER_VALIDATION",NEEDS_APPROVAL:"NEEDS_APPROVAL",UNVALIDATED:"UNVALIDATED",VERIFYING:"VERIFYING"},c={HAS_ERRORS:"FIX ERRORS",UNVALIDATED:"VALIDATING"}},2164:function(e,t,a){}}]);