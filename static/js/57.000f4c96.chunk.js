(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[57],{1516:function(t,e,n){"use strict";n.r(e);var a=n(24),c=n(9),r=n.n(c),o=n(3),u=n(19),i=n(12),s=n(0),l=n.n(s),d=n(380),f=n(67),m=n(289),b=n.n(m),p=n(1643),O=n.n(p),E=n(296),T=n.n(E),_=n(1585),v=n.n(_),C=n(31),j=n.n(C),A=n(1598),h=n.n(A),x=n(1583),D=n.n(x),S=n(1573),g=n(50),y=n(48),L=n(80),N=n(479),w=n.n(N),I=n(284),R=n(205),F=["COMPLETED","DETECTED"],k="IDR",M="/api/virtual_account_deposits",U="/api/virtual_account_deposit_statistics",P="/api/virtual_account_deposit_report_requests",V="/api/virtual_account_deposit_international_currency_settings",B=function(t){return{LOADING_TRANSACTIONS:t("loadingVirtualAccounts"),SEARCH_TOOLTIP:t("searchTooltip"),SEARCH_PLACEHOLDER:t("searchPlaceholder"),TOTAL_COMPLETED:t("totalCompleted"),TOTAL_DETECTED:t("totalDetected"),TOTAL_TRANSACTIONS:t("totalTransactions"),STATUS:t("status"),DETECTED_DATE:t("detectedDate"),VIRTUAL_ACCOUNT_NAME:t("virtualAccountName"),VIRTUAL_ACCOUNT_NUMBER:t("virtualAccountNumber"),BANK_CODE:t("bankCode"),EXTERNAL_ID:t("externalId"),AMOUNT:t("amount"),CURRENCY:t("currency"),EMPTY_FVA_SUBTITLE:t("emptyFVASubtitle"),EMPTY_FVA_CAPTION:t("emptyFVACaption"),DATE_CREATED:t("dateCreated")}},H=function(t){return[{title:t("payments")},{title:t("virtualAccounts")}]},G="/virtual_accounts/list",Y=function(t){return{width:"5%",items:[{field:"external_id",text:t("commonWords:copyExternalID"),textPressed:t("commonWords:valueCopied"),action:"copy"}]}},q="/images/icons/completed.svg",J="/images/icons/detected.svg",Q="/images/icons/transactions.svg",W=function(t){var e=t.totalCompletedAmount,n=t.totalDetectedAmount,a=t.totalTransactionsCount,c=t.currency,r=t.localization,o=t.isLoading,u=c||"IDR",i=[{text:B(r).TOTAL_COMPLETED,icon:q,amount:e&&Object(S.d)(e),currency:u},{text:B(r).TOTAL_DETECTED,icon:J,amount:n&&Object(S.d)(n),currency:u},{text:B(r).TOTAL_TRANSACTIONS,icon:Q,amount:a}];return l.a.createElement(I.a,null,i.map((function(t,e){return l.a.createElement(R.a,{key:e,md:Math.ceil(12/i.length)},l.a.createElement(L.Z,{key:e,text:t.text,icon:t.icon,amount:t.amount,currency:t.currency,isLoading:o}))})))},z=n(1575),X=n.n(z),K=n(288),Z=n.n(K),$=function(t){var e=Z()(null===t||void 0===t?void 0:t.toLowerCase());switch(t){case"DETECTED":case"COMPLETED":return l.a.createElement(X.a,{variant:"success",text:e});default:return l.a.createElement(X.a,{text:e})}},tt=function(t){return{xendit:{DATE:B(t).DETECTED_DATE},instamoney:{DATE:B(t).DATE_CREATED}}},et=function(t,e,n){return[{dataField:"status",text:B(e).STATUS,formatter:$},{dataField:"created",text:tt(e)[n].DATE,type:"text"},{dataField:"name",text:B(e).VIRTUAL_ACCOUNT_NAME,type:"text"},{dataField:"account_number",text:B(e).VIRTUAL_ACCOUNT_NUMBER,type:"text"},{dataField:"bank_code",text:B(e).BANK_CODE,type:"text"},{dataField:"external_id",text:B(e).EXTERNAL_ID,type:"text"},{dataField:"amount",text:"".concat(B(e).AMOUNT," (").concat(t||"IDR",")"),type:"text"}]},nt=n(231),at=function(t,e,n){return t.map((function(t){return Object(o.a)(Object(o.a)({},t),{},{created:j()(t.created).format(y.a.FULL_DATE),account_number:"".concat(t.merchant_code," ").concat(t.account_number),amount:n(t.amount,e)})}))},ct=function(t,e,n){return t.map((function(t){return Object(o.a)(Object(o.a)({},t),{},{status:$(t.status),dateContent:{date:j()(t.created).format(y.a.FULL_DATE)},additionalData:e(t.amount,t.currency||n),secondRowContent:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("p",{className:"mb-0 mr-6 text-sm color-charcoal font-weight-bold"},"".concat(t.merchant_code," ").concat(t.account_number)),l.a.createElement(nt.a,{src:"/images/".concat(t.bank_code.toLowerCase(),"-logo.svg"),width:"40",height:"12.51"}))})}))},rt=n(37),ot=n(26),ut=n(20),it=n.n(ut),st=n(478),lt=n.n(st),dt=function(t){var e=t.currency,n=t.onChange,a=t.t;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"xendit-filter-group-divider"}),l.a.createElement("div",{className:"fva-filter-currency"},l.a.createElement("p",null,a("currency")),l.a.createElement(lt.a,{options:[{label:"IDR",value:"IDR"},{label:"USD",value:"USD"}],value:e,onChange:function(t){n(t.target.value)},customCss:"radio-container"})))},ft=n(189),mt=n(473),bt=(n(2081),n(28)),pt=y.c.TODAY,Ot=y.c.LAST_1_MONTH;e.default=Object(f.o)(Object(d.a)(["fixedVirtualAccounts","errorMessages","commonComponents","commonWords"])((function(t){var e=t.t,n=t.history,c=t.apiCall,d=c.axiosGet,f=c.axiosPost,m=t.environment,p=t.user.email,E=t.dateFormat,_=t.entity,C=_===bt.a.XENDIT,A=Object(s.useState)([]),x=Object(i.a)(A,2),N=x[0],I=x[1],R=Object(s.useState)({completed:"",detected:"",transactions:""}),q=Object(i.a)(R,2),J=q[0],Q=q[1],z=Object(s.useState)(""),X=Object(i.a)(z,2),K=X[0],Z=X[1],$=Object(s.useState)(""),tt=Object(i.a)($,2),nt=tt[0],ut=tt[1],st=Object(s.useState)(F),lt=Object(i.a)(st,2),Et=lt[0],Tt=lt[1],_t=Object(s.useState)(k),vt=Object(i.a)(_t,2),Ct=vt[0],jt=vt[1],At=Object(s.useState)(!1),ht=Object(i.a)(At,2),xt=ht[0],Dt=ht[1],St=Object(s.useState)(new Date(Ot)),gt=Object(i.a)(St,2),yt=gt[0],Lt=gt[1],Nt=Object(s.useState)(new Date(pt)),wt=Object(i.a)(Nt,2),It=wt[0],Rt=wt[1],Ft=Object(s.useState)({transactions:!1,stats:!1,refetch:!1}),kt=Object(i.a)(Ft,2),Mt=kt[0],Ut=kt[1],Pt=Object(s.useState)(""),Vt=Object(i.a)(Pt,2),Bt=Vt[0],Ht=Vt[1],Gt=Object(s.useState)(!1),Yt=Object(i.a)(Gt,2),qt=Yt[0],Jt=Yt[1],Qt=Object(s.useState)(!1),Wt=Object(i.a)(Qt,2),zt=Wt[0],Xt=Wt[1],Kt=Object(s.useState)(!1),Zt=Object(i.a)(Kt,2),$t=Zt[0],te=Zt[1],ee=Object(s.useState)(!1),ne=Object(i.a)(ee,2),ae=ne[0],ce=ne[1],re=Object(s.useState)(""),oe=Object(i.a)(re,2),ue=oe[0],ie=oe[1],se=Object(s.useState)(null),le=Object(i.a)(se,2),de=le[0],fe=le[1],me=Object(s.useState)(!1),be=Object(i.a)(me,2),pe=be[0],Oe=be[1],Ee=function(){var t=Object(u.a)(r.a.mark((function t(){var e,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ut((function(t){return Object(o.a)(Object(o.a)({},t),{},{transactions:!0})})),t.next=3,h.a.getItem("LAST_FVA_TRANSACTIONS");case 3:if(e=t.sent,!(n.location.state&&n.location.state.isFromDetailsPage)||T()(e)){t.next=23;break}return a=JSON.parse(e),Z(a.lastId),I(a.fvaData),Jt(a.hasNext),Lt(new Date(a.dateStart)),Rt(new Date(a.dateEnd)),ut(a.searchQuery),jt(a.currency),Tt(a.statuses),Q(a.fvaStats),Dt(a.canUseInternationalVA),Ut((function(t){return Object(o.a)(Object(o.a)({},t),{},{transactions:!1})})),t.next=20,h.a.removeItem("LAST_FVA_TRANSACTIONS");case 20:n.replace({pathname:n.location.pathname,state:{}}),t.next=26;break;case 23:Te(nt,Et,Ct,yt,It),_e(nt,Et,Ct,yt,It),C&&ve();case 26:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(s.useEffect)((function(){Ee()}),[m]),Object(s.useEffect)((function(){if(b()(Et))return I([]),void Q({completed:0,detected:0,transactions:0});pe&&(Te(nt,Et,Ct,yt,It),_e(nt,Et,Ct,yt,It),Oe(!1))}),[Et,Ct,yt,It]),Object(s.useEffect)((function(){b()(Et)||(clearTimeout(de),fe(setTimeout((function(){pe&&(!nt||nt.length>2)&&(Te(nt,Et,Ct,yt,It),_e(nt,Et,Ct,yt,It),Oe(!1))}),500)))}),[nt]);var Te=function(){var t=Object(u.a)(r.a.mark((function t(n,c,u,i,s){var l,f,m,b,p,E,T=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=T.length>5&&void 0!==T[5]&&T[5],f={from:Object(ft.c)(i,"start"),to:Object(ft.c)(s,"end"),statuses:c||F,currency:u||k,last_id:l?K:void 0},n&&(f.search_query=n.trim()),Ht(""),!l&&Ut((function(t){return Object(o.a)(Object(o.a)({},t),{},{transactions:!0})})),t.prev=5,t.next=8,d(M,f);case 8:if(!(m=t.sent).error_code){t.next=11;break}throw m;case 11:t.next=21;break;case 13:if(t.prev=13,t.t0=t.catch(5),t.t0.error_code!==mt.a.REQUEST_ABORTED){t.next=18;break}return t.abrupt("return");case 18:return Ht(Object(g.f)(t.t0.error_code,e)),Ut((function(t){return Object(o.a)(Object(o.a)({},t),{},{transactions:!1})})),t.abrupt("return");case 21:b=m.has_next,p=b?O()(m.docs).id:"",E=l?[].concat(Object(a.a)(N),Object(a.a)(m.docs)):m.docs,Z(p),Jt(b),I(E),l&&Ut((function(t){return Object(o.a)(Object(o.a)({},t),{},{refetch:!1})})),Ut((function(t){return Object(o.a)(Object(o.a)({},t),{},{transactions:!1})}));case 29:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n,a,c,r){return t.apply(this,arguments)}}(),_e=function(){var t=Object(u.a)(r.a.mark((function t(n,a,c,u,i){var s,l,f;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={from:Object(ft.c)(u,"start"),to:Object(ft.c)(i,"end"),statuses:a||F,currency:c||k},n&&(s.search_query=n.trim()),Ht(""),Ut((function(t){return Object(o.a)(Object(o.a)({},t),{},{stats:!0})})),t.prev=4,t.next=7,d(U,s);case 7:if(!(l=t.sent).error_code){t.next=10;break}throw l;case 10:t.next=20;break;case 12:if(t.prev=12,t.t0=t.catch(4),t.t0.error_code!==mt.a.REQUEST_ABORTED){t.next=17;break}return t.abrupt("return");case 17:return Ht(Object(g.f)(t.t0.error_code,e)),Ut((function(t){return Object(o.a)(Object(o.a)({},t),{},{stats:!1})})),t.abrupt("return");case 20:f=Object(o.a)(Object(o.a)({},W),{},{completed:l.total_completed_amount,detected:l.total_detected_amount,transactions:l.total_count}),Q(f),Ut((function(t){return Object(o.a)(Object(o.a)({},t),{},{stats:!1})}));case 23:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e,n,a,c,r){return t.apply(this,arguments)}}(),ve=function(){var t=Object(u.a)(r.a.mark((function t(){var e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d(V);case 2:e=t.sent,Dt(e.can_use_international_va);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ce=function(){var t=Object(u.a)(r.a.mark((function t(){var n,a,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(te(!0),ie(""),!!J.transactions){t.next=6;break}return je(e("exportEmptyTransactions")),t.abrupt("return");case 6:return n={statuses:Et,from:Object(ft.c)(yt,"start"),to:Object(ft.c)(It,"end"),user_offset:j()().utcOffset(),currency:Ct},t.next=9,f(P,n);case 9:if(!(a=t.sent).error_code){t.next=14;break}return c=Object(g.f)(a.error_code,e,{action:v()(e("commonWords:export"))}),je(c),t.abrupt("return");case 14:te(!1),ce(!0),Xt(!0),Ae();case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),je=function(t){ce(!1),te(!1),ie(t),Xt(!0)},Ae=function(){window.dataLayer.push({event:"export-fva-report",label:"Export CSV - Fixed Virtual Accounts"})},he={start:yt,end:It,inputFormat:E.date_time_picker,outputFormat:y.a.GMT_MS_Z,onChange:function(t,e){switch(ut(""),Oe(!0),t){case"start":Lt(new Date(e));break;case"end":Rt(new Date(e))}},customCss:"filter-item"},xe={value:nt,onChange:function(t){t.preventDefault(),ut(t.target.value),Oe(!0)},tooltip:B(e).SEARCH_TOOLTIP,placeholder:B(e).SEARCH_PLACEHOLDER,position:"inline",customCss:"filter-item"},De=function(t,e,n,a,c,r){var o=[l.a.createElement(L.w,{selectedFilters:t,onChecked:n,filterGroups:[{title:"Status",children:[{type:"COMPLETED",label:"Completed"},{type:"DETECTED",label:"Detected"}]}],withGrouping:c,withCheckAll:!c,onCheckAll:a})],u="Status (".concat(t.length,")");return c&&(u="Filter",o.push(l.a.createElement(dt,{currency:e,onChange:n,t:r}))),[l.a.createElement(L.q,{displayText:u,children:o})]}(Et,Ct,(function(t){F.includes(t)?function(t){var e=Object(a.a)(Et);Et.includes(t)?e=e.filter((function(e){return e!==t})):e.push(t),Tt(e)}(t):function(t){jt(t),Oe(!0)}(t),Oe(!0)}),(function(){var t=b()(Et)?F:[];Tt(t),Oe(!0)}),xt,e),Se=function(t,e){return[l.a.createElement(it.a,{iconLeft:l.a.createElement(rt.a,{icon:ot.p}),onClick:t,isLoading:e,size:"sm"},"CSV")]}(Ce,$t),ge={isClickable:!0,tableHeaderColumns:et(Ct,e,_),tableContentRows:at(N,Ct,S.d),mobileTableContent:ct(N,S.b,Ct),onClickLoadMore:function(){Ut((function(t){return Object(o.a)(Object(o.a)({},t),{},{refetch:!0})})),Te(nt,Et,Ct,yt,It,!0)},withLoadMore:qt,loadMoreText:e("commonComponents:tableMore"),isLoadingMore:Mt.refetch,isLoading:Mt.transactions,isError:!b()(Bt),isEmpty:b()(N),loadingText:B(e).LOADING_TRANSACTIONS,errorContent:l.a.createElement(L.t,{text:Bt}),emptyContent:l.a.createElement(L.r,{caption:B(e).EMPTY_FVA_CAPTION,subtitle:B(e).EMPTY_FVA_SUBTITLE}),actionButtonConfig:Y(e),onDetailsClicked:function(t){h.a.setItem("LAST_FVA_TRANSACTIONS",JSON.stringify({lastId:K,fvaData:N,fvaStats:J,hasNext:qt,dateStart:yt,dateEnd:It,searchQuery:nt,currency:Ct,statuses:Et,canUseInternationalVA:xt})),n.replace({pathname:n.location.pathname,state:{isFromDetailsPage:!0}}),n.push("/virtual_accounts/payments/".concat(t.id))},rowClasses:"table-row-vertical-align-middle table-clickable-row"},ye=C&&l.a.createElement(w.a,{tabs:H(e),activeTab:0,changeActiveTab:function(t){1===t&&n.push(G)},customCss:"page-tab-container"});return l.a.createElement(l.a.Fragment,null,ye,l.a.createElement(W,{totalCompletedAmount:J.completed,totalDetectedAmount:J.detected,totalTransactionsCount:J.transactions,isLoading:Mt.stats,localization:e,currency:Ct}),l.a.createElement(D.a,{filters:De,stickyHeader:!0,rightButtons:Se,dateFilterConfig:he,tableConfig:ge,searchBarConfig:xe}),function(t){return t?l.a.createElement(L.j,{type:"success",handleClose:function(){Xt(!1)},title:e("commonComponents:exportStarted"),subtitle:e("commonComponents:exportSuccessInfo",{email:p}),showModal:zt}):l.a.createElement(L.j,{type:"danger",title:e("exportFailed"),handleClose:function(){Xt(!1)},showModal:zt,subtitle:ue})}(ae))})))},1573:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return c})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return u})),n.d(e,"e",(function(){return i}));var a=function(t,e){return"IDR"!==e&&e?t.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"):t.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")},c=function(t){return t.toLocaleString("en-US").replace(/,/g,".")},r=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.toLocaleString("en-US",{minimumFractionDigits:e?2:0})},o=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=r(t,a),o="IDR"===e?c.replace(/,/g,"."):c,u=n?"".concat(e," "):"",i="".concat(u).concat(o);return i},u=function(t,e,n){var a=e?o(t,e):r(t),c=a.split("-").join(""),u="".concat((null!=n?n:t>0)?"+ ":"- "," ").concat(c);return 0===t&&(u=a),u},i=function(t){return"".concat((100*t).toFixed(2),"%")}},1575:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=u(n(0)),c=u(n(2)),r=u(n(6)),o=u(n(1576));function u(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n(1577);var s=function(t){var e,n=t.text,c=t.iconLeft,u=t.customCss,s=t.variant,l=(0,r.default)((i(e={"status-pill":!0},"status-pill-".concat(s),s),i(e,u,u),e));return a.default.createElement(o.default,{text:n,iconLeft:c,customCss:l})};s.propTypes={text:c.default.string,iconLeft:c.default.any,variant:c.default.oneOf(["success","danger","warning","first-level","second-level"]),customCss:c.default.string};var l=s;e.default=l},1576:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),t.exports=n(467)},1577:function(t,e,n){},1585:function(t,e,n){var a=n(470);t.exports=function(t){return a(t).toLowerCase()}},1643:function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},2081:function(t,e,n){}}]);