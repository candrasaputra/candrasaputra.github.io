(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[68],{1513:function(e,t,a){"use strict";a.r(t);var r=a(3),n=a(9),c=a.n(n),l=a(19),o=a(12),d=a(0),u=a.n(d),s=a(67),i=a(380),m=a(27),b=a(511),f=a(284),h=a(205),p=a(20),v=a.n(p),g=a(26),E=a(37),y=a(45),x=a(468),j=a(167),O=a(80),D=a(1615),k=a(1573),_=a(1575),C=a.n(_),H=a(288),w=a.n(H),I=Object(i.a)(["creditCardDetails","commonWords"])((function(e){var t=e.data,a=e.downloadReceiptButton,r=e.t,n=t.id,c=t.created,l=t.amount,o=t.status,d=t.currency,s=t.externalId,i=Object(k.b)(l,d),m=function(e){var t,a,n;return e===j.w.SUCCEEDED?(t=r("yourRefundIs"),a=r("successfullyRequested"),n="color-success"):(t=r("yourRefundRequestHas"),a=r("failed"),n="color-danger"),u.a.createElement("p",{className:"font-weight-bold text-lg my-5"},t,u.a.createElement("span",{className:"text-lg ".concat(n)},a,"."))}(o),b={id:n,created:c,externalId:s,statusLabel:function(e){return e===j.w.SUCCEEDED?u.a.createElement(C.a,{variant:"success",text:w()(j.w.REQUESTED.toLowerCase())}):u.a.createElement(C.a,{variant:"danger",text:w()(j.w.FAILED.toLowerCase())})}(o)},f=Object(D.f)(b,r),h=u.a.createElement("div",{className:"d-flex justify-content-end"},a),p=u.a.createElement(u.a.Fragment,null,h,m);return u.a.createElement(O.p,{title:r("refundAmount"),amountValue:i,items:f,customHeader:p,noDivider:!0,noStretchDetailsRow:!0,customRowStyle:"justify-content-start align-items-center no-border py-2",customLabelStyle:"w-40",customValueStyle:"w-60",customCardStyle:"shadow-none border-0 mt-0",customCardTitleStyle:"mb-4"})})),T=Object(i.a)("creditCardDetails")((function(e){var t=e.data,a=e.t,n=t.chargeData,c=t.currency,l=Object(r.a)({currency:c,amount:n.capture_amount,externalId:n.external_id,merchantDescriptor:n.descriptor,chargeApprovalCode:n.approval_code},n),o=Object(D.c)(l,a);return u.a.createElement(O.p,{title:a("chargeInformation"),items:o,customRowStyle:"justify-content-start align-items-center no-border py-2",customLabelStyle:"w-40",customValueStyle:"w-60",customCardStyle:"shadow-none border-0 mt-0"})})),R=a(476),S=a(475),N=Object(i.a)("creditCardDetails")((function(e){var t=e.data,a=e.isInFraudList,r=t.card_brand,n=t.card_type,c=t.country,l=t.country_code,o=t.masked_card_number,d=t.card_expiration_month,s=t.card_expiration_year,i=t.credit_card_metadata.bank,m=o&&Object(R.b)(o),b=Object(S.b)(r),f=Object(S.a)(r),h=b&&u.a.createElement("img",{className:"card-info-brand-logo",src:"/images/card-brands-logos/".concat(f,"-WHITE.png"),alt:f}),p=Object(S.b)(l),v=p?l:j.y,g=p&&u.a.createElement("img",{className:"card-country-icon mr-2",src:"https://country-flags-images.s3.amazonaws.com/flags/".concat(l.toLowerCase(),".svg"),alt:c}),E=p&&u.a.createElement("div",{className:"d-flex align-items-center mt-1"},g,u.a.createElement("span",{className:"text-capitalize color-white"},v)),y=Object(S.b)(n)?n.toLowerCase():j.y,x=s&&s.slice(-2),D={cardNumber:m,cardCountry:E,cardType:y,cardBrand:h,cardExpDate:d&&s&&d+" / "+x,cardBank:Object(S.b)(i)?i:j.y};return u.a.createElement(O.l,{cardData:D,backgroundLogo:r,isInFraudList:a})})),L=a(97),B=a(189),F=Object(i.a)("creditCardDetails")((function(e){var t,a,r=e.data,n=e.chargeDepositId,c=e.t,l=r.created,o=r.status,d=r.currency,s=r.amount,i=r.fee_refund_amount,b=r.vat_refund_amount,f=r.token_data,h=r.authentication_data,p=r.authorization_data,v=p.created,y=p.id,x=r.charge_data,D=x.created,_=x.capture_amount,C=x.fee_amount,H=x.vat_amount,w=function(e,t,a){var r,n,l;"refund"===a?(r=c("feeRefund"),n="color-success",l="color-danger"):(r=c("fee"),n="color-danger",l="color-success");var o=u.a.createElement("div",{className:"d-flex justify-content-between align-items-center mt-4"},u.a.createElement("span",{className:"color-charcoal"},"".concat(c(a)," ").concat(c("amount"))),u.a.createElement("span",{className:"font-weight-bold ".concat(l)},e)),d=t&&u.a.createElement("div",{className:"d-flex justify-content-between align-items-center mt-1 mb-3"},u.a.createElement("span",{className:"color-charcoal"},r),u.a.createElement("span",{className:"font-weight-bold ".concat(n)},t));return u.a.createElement(u.a.Fragment,null,o,d)},I=function(e){return u.a.createElement(L.Link,{target:"_blank",to:e},u.a.createElement(O.h,{icon:u.a.createElement(E.a,{icon:g.w,size:"lg"}),customCss:"btn-no-bg external-link-button"}))},T=function(e){var t=e.status,a=e.date,r=e.amount,n=e.link;return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},u.a.createElement("div",{className:"d-flex flex-column"},u.a.createElement("span",{className:"font-weight-bold"},t),u.a.createElement("span",{className:"color-charcoal"},a)),n&&n),r&&r)},R=o===j.w.SUCCEEDED,S=Object(B.h)(l),N=Object(k.c)(s,d,!1),F=(i||0)+(b||0),V=Object(k.c)(F,d,!0),A={eventElement:T({status:c(R?"refundRequested":"refundRequestFailed"),date:S,amount:w(N,F?V:void 0,"refund")}),eventStatus:j.n[o]},z=Object(B.h)(D),q=Object(k.c)(_,d,!0),U=(C||0)+(H||0),P=Object(k.c)(U,d,!1),W=w(q,U?P:void 0,"charge"),M=I(j.e.ccChargeDetails(n)),G={eventElement:T({status:c("charged"),date:z,amount:W,link:M})},J=Object(B.h)(v),Q=I(j.e.ccAuthorizationDetails(y)),K={eventElement:T({status:c("authorizationSucceeded"),date:J,link:Q})};if(!Object(m.isEmpty)(h)){var $=Object(B.h)(h.created),X=I(j.e.ccAuthenticationDetails(h.id));t={eventElement:T({status:c("authenticationVerified"),date:$,link:X})}}if(!Object(m.isEmpty)(f)){var Y=Object(B.h)(f.created),Z=I(j.e.ccTokenDetails(f.id));a={eventElement:T({status:c("tokenized"),date:Y,link:Z})}}var ee=[A,G,K,!Object(m.isEmpty)(t)&&t,!Object(m.isEmpty)(a)&&a];return u.a.createElement(O.R,{title:c("eventHistory"),items:ee})})),V=a(1565),A=y.f.create({statusText:{fontSize:24,fontWeight:600,marginBottom:30},statusTextSuccess:{color:"#00cf99"},statusTextDanger:{color:"#e84855"},brandLogo:{width:40,height:15},footNoteText:{color:"#666",fontSize:12,paddingHorizontal:30,marginTop:20},fontBold:{fontWeight:600}}),z=Object(i.a)(["creditCardDetails","commonWords"])((function(e){var t,a=e.refundData,r=e.tokenData,n=e.t,c=a.id,l=a.created,o=a.status,d=a.amount,s=a.currency,i=a.externalId,b=a.chargeData,f=b.descriptor,h=b.approval_code,p=b.external_id,v=o===j.w.SUCCEEDED,g=Object(k.b)(d,s),E=function(){var e,a,r;return v?(e=n("yourRefundIs"),a=n("successfullyRequested"),r=A.statusTextSuccess,t=j.w.REQUESTED):(e=n("yourRefundRequestHas"),a=n("failed"),r=A.statusTextDanger,t=j.w.FAILED),u.a.createElement(y.g,{style:A.statusText},e,u.a.createElement(y.g,{style:r},a,"*."))}(),x={amountTitle:n("refundAmount"),amount:g},_={statusLabel:t,id:c,externalId:i,created:l,merchantDescriptor:f,chargeExternalId:p,chargeApprovalCode:h},C=Object(D.g)(_,n),H=!Object(m.isEmpty)(r),w={cardNumber:j.y,cardType:j.y,cardExpDate:j.y,cardBank:j.y};if(H){var I=r.card_brand,T=r.card_type,R=r.masked_card_number,N=r.card_expiration_month,L=r.card_expiration_year,B=r.credit_card_metadata,F=Object(S.b)(I),z=Object(S.a)(I),q=F?u.a.createElement(y.c,{src:"/images/card-brands-logos/".concat(z,".png"),style:A.brandLogo}):u.a.createElement(y.g,null,""),U=u.a.createElement(y.h,null,u.a.createElement(y.g,null,R||j.y),q),P=Object(S.b)(T)?T:j.y,W=L&&L.slice(-2),M=N&&L&&N+" / "+W,G=B&&Object(S.b)(B.bank)?B.bank:j.y;w={cardNumber:U,cardType:P,cardExpDate:M||j.y,cardBank:G}}var J=Object(D.e)(w,n),Q=u.a.createElement(V.a,{i18nKey:"refundReceiptFootnote"},"*This refers to the status of the refund"," ",u.a.createElement(y.g,{style:A.fontBold},"request"),". Whether the refund itself succeeds or fails, and the time taken to credit funds, depends on the issuer."),K=u.a.createElement(y.g,{style:A.footNoteText},Q);return u.a.createElement(O.T,{statusText:E,amountData:x,orderInformationData:C,customerInformationData:J,children:K})}));t.default=Object(s.o)(Object(i.a)(["creditCardDetails","creditCardErrorMessages","errorMessages"])((function(e){var t=e.match,a=e.history,n=e.apiCall,s=e.t,i=e.environment,p=e.location,D=t.params.credit_card_refund_id,k=p.state&&p.state.isFromTransactions,_=Object(d.useState)(!1),C=Object(o.a)(_,2),H=C[0],w=C[1],R=Object(d.useState)({}),S=Object(o.a)(R,2),L=S[0],B=S[1],V=Object(d.useState)(!0),A=Object(o.a)(V,2),q=A[0],U=A[1],P=Object(d.useState)(""),W=Object(o.a)(P,2),M=W[0],G=W[1],J=Object(d.useState)(""),Q=Object(o.a)(J,2),K=Q[0],$=Q[1],X=Object(d.useState)({isInBlockList:!1,isInAllowList:!1}),Y=Object(o.a)(X,2),Z=Y[0],ee=Y[1];Object(d.useEffect)((function(){w(!0),te()}),[]),Object(d.useEffect)((function(){H&&fe()}),[i]);var te=function(){var e=Object(l.a)(c.a.mark((function e(){var t,a,r,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),e.prev=1,e.next=4,n.axiosGet(j.d.ccRefundDetails(D));case 4:if(!(t=e.sent).error_code){e.next=7;break}throw t;case 7:return a=t.charge_data.id,r=t.token_data.masked_card_number,B(t),e.next=12,n.axiosGet(j.d.ccChargeDetailsByChargeId(a));case 12:l=e.sent,$(l.id||a),r?ae(r):U(!1),e.next=22;break;case 17:return e.prev=17,e.t0=e.catch(1),G(Object(x.b)(e.t0.error_code,s)),U(!1),e.abrupt("return");case 22:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(l.a)(c.a.mark((function e(t){var a,r,l,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.axiosGet(j.d.customFraudRules);case 3:if(!(a=e.sent).error_code){e.next=6;break}throw a;case 6:l=(r=a).blocked_list.card_data,o=r.allowed_list.card_data,he(l,t,j.o.block),he(o,t,j.o.allow),e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),G(Object(x.b)(e.t0.error_code,s)),e.abrupt("return");case 15:U(!1);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),re=L.id,ne=L.created,ce=L.status,le=L.amount,oe=L.currency,de=L.external_id,ue=L.merchant_reference_code,se=L.token_data,ie=L.charge_data,me={id:re,created:ne,status:ce,amount:le,currency:oe,externalId:de,merchantReferenceCode:ue,chargeData:ie},be={chargeData:ie,currency:oe},fe=function(){var e,t={};k?(e=j.e.transactionsPage,t={isFromDetailsPage:!0,isFromTransactions:!0}):(e=j.e.ccTransactions,t={selectedTabIndex:4,isFromDetailsPage:!0}),a.push({pathname:e,state:t})},he=function(e,t,a){var n=function(e,t){return e.some((function(e){return t===e.masked_card_number}))}(e,t);a===j.o.block?ee((function(e){return Object(r.a)(Object(r.a)({},e),{},{isInBlockList:n})})):ee((function(e){return Object(r.a)(Object(r.a)({},e),{},{isInAllowList:n})}))},pe=!q&&u.a.createElement(y.d,{document:u.a.createElement(z,{refundData:me,tokenData:se}),fileName:"refund-receipt-".concat(D)},u.a.createElement(v.a,{size:"md",iconLeft:u.a.createElement(E.a,{icon:g.s})},s("receipt"))),ve=u.a.createElement(I,{data:me,downloadReceiptButton:pe}),ge=u.a.createElement(T,{data:be}),Ee=se&&u.a.createElement(N,{data:se,isInFraudList:Z}),ye=u.a.createElement(F,{data:L,chargeDepositId:K}),xe=u.a.createElement(O.z,{customBodyCss:"p-4"},ve,ge),je=u.a.createElement(b.a,null,u.a.createElement(f.a,null,u.a.createElement(h.a,{lg:"7"},u.a.createElement("div",{className:"mb-4"},xe)),u.a.createElement(h.a,{lg:"5"},u.a.createElement(h.a,{lg:"12",md:"8",className:"p-0 mb-4"},Ee),u.a.createElement(h.a,{lg:"12",md:"10",className:"p-0 mb-4"},ye)))),Oe=q||M?u.a.createElement(O.z,{isLoading:q,loadingText:s("loadingRefundDetails"),isError:!Object(m.isEmpty)(M),errorText:M}):je;return u.a.createElement(u.a.Fragment,null,u.a.createElement(O.o,{goBack:fe,title:s("creditCardRefundDetails")}),Oe)})))},1573:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return n})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return o})),a.d(t,"e",(function(){return d}));var r=function(e,t){return"IDR"!==t&&t?e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"):e.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")},n=function(e){return e.toLocaleString("en-US").replace(/,/g,".")},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.toLocaleString("en-US",{minimumFractionDigits:t?2:0})},l=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=c(e,r),l="IDR"===t?n.replace(/,/g,"."):n,o=a?"".concat(t," "):"",d="".concat(o).concat(l);return d},o=function(e,t,a){var r=t?l(e,t):c(e),n=r.split("-").join(""),o="".concat((null!=a?a:e>0)?"+ ":"- "," ").concat(n);return 0===e&&(o=r),o},d=function(e){return"".concat((100*e).toFixed(2),"%")}},1575:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(0)),n=o(a(2)),c=o(a(6)),l=o(a(1576));function o(e){return e&&e.__esModule?e:{default:e}}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(1577);var u=function(e){var t,a=e.text,n=e.iconLeft,o=e.customCss,u=e.variant,s=(0,c.default)((d(t={"status-pill":!0},"status-pill-".concat(u),u),d(t,o,o),t));return r.default.createElement(l.default,{text:a,iconLeft:n,customCss:s})};u.propTypes={text:n.default.string,iconLeft:n.default.any,variant:n.default.oneOf(["success","danger","warning","first-level","second-level"]),customCss:n.default.string};var s=u;t.default=s},1576:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),e.exports=a(467)},1577:function(e,t,a){},1615:function(e,t,a){"use strict";a.d(t,"h",(function(){return c})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return o})),a.d(t,"f",(function(){return d})),a.d(t,"c",(function(){return u})),a.d(t,"g",(function(){return s})),a.d(t,"d",(function(){return i})),a.d(t,"e",(function(){return m}));var r=a(189),n=a(1573),c=function(e,t){return[{label:t("tokenType"),value:e.tokenType,shouldHide:!e.tokenType},{label:t("tokenId"),value:e.id,shouldHide:!e.id},{label:t("dateCreated"),value:Object(r.h)(e.created),shouldHide:!e.created},{label:t("status"),value:e.status,shouldHide:!e.status},{label:t("merchantReferenceCode"),value:e.merchantReferenceCode,shouldHide:!e.merchantReferenceCode},{label:"".concat(e.networkTokenType," ").concat(t("tokenId")),value:e.networkTokenId,shouldHide:!e.networkTokenId},{label:"".concat(e.networkTokenType," ").concat(t("status")),value:e.networkTokenStatus,shouldHide:!e.networkTokenStatus}]},l=function(e,t){return[{label:t("authenticationId"),value:e.id,shouldHide:!e.id},{label:t("dateCreated"),value:Object(r.h)(e.created),shouldHide:!e.created},{label:t("veres"),value:e.veresEnrolled,shouldHide:!e.veresEnrolled},{label:t("eciCode"),value:e.eciCodeValue,shouldHide:!e.eciCodeValue},{label:t("xid"),value:e.xid,shouldHide:!e.xid},{label:t("cavv"),value:e.cavv,shouldHide:!e.cavv}]},o=function(e,t){return[{label:t("authorizationId"),value:e.id,shouldHide:!e.id},{label:t("dateCreated"),value:Object(r.h)(e.created),shouldHide:!e.created},{label:t("reference"),value:e.externalId,shouldHide:!e.externalId}]},d=function(e,t){return[{label:t("status"),value:e.statusLabel,shouldHide:!e.statusLabel},{label:t("refundId"),value:e.id,shouldHide:!e.id},{label:t("reference"),value:e.externalId,shouldHide:!e.externalId},{label:t("dateCreated"),value:Object(r.h)(e.created),shouldHide:!e.created},{label:t("merchantReferenceCode"),value:e.merchantReferenceCode,shouldHide:!e.merchantReferenceCode}]},u=function(e,t){return[{label:t("chargeId"),value:e.id,shouldHide:!e.id},{label:t("reference"),value:e.externalId,shouldHide:!e.externalId},{label:t("chargeApprovalCode"),value:e.chargeApprovalCode,shouldHide:!e.chargeApprovalCode},{label:t("merchantDescriptor"),value:e.merchantDescriptor,shouldHide:!e.merchantDescriptor},{label:t("merchantReferenceCode"),value:e.merchantReferenceCode,shouldHide:!e.merchantReferenceCode},{label:t("eciCode"),value:e.eciCodeValue,shouldHide:!e.eciCodeValue},{label:t("dateCreated"),value:Object(r.h)(e.created),shouldHide:!e.created},{label:t("chargedAmount"),value:e.amount&&Object(n.b)(e.amount,e.currency),shouldHide:!e.amount&&0===e.amount}]},s=function(e,t){return[{label:t("status"),value:e.statusLabel,shouldHide:!e.statusLabel},{label:t("refundId"),value:e.id,shouldHide:!e.id},{label:t("refundReference"),value:e.externalId,shouldHide:!e.externalId},{label:t("dateCreated"),value:Object(r.h)(e.created),shouldHide:!e.created},{label:t("merchantDescriptor"),value:e.merchantDescriptor,shouldHide:!e.merchantDescriptor},{label:t("chargeReference"),value:e.chargeExternalId,shouldHide:!e.chargeExternalId},{label:t("chargeApprovalCode"),value:e.chargeApprovalCode,shouldHide:!e.chargeApprovalCode}]},i=function(e,t){return[{label:t("chargebackId"),value:e.chargebackId,shouldHide:!e.chargebackId},{label:t("dueDate"),value:Object(r.i)(e.dueDate),shouldHide:!e.dueDate},{label:t("disputeDate"),value:Object(r.i)(e.disputeDate),shouldHide:!e.disputeDate},{label:t("merchantDescriptor"),value:e.merchantDescriptor,shouldHide:!e.merchantDescriptor},{label:t("acquirerBank"),value:e.acquirerBank,shouldHide:!e.acquirerBank},{label:t("lostReason"),value:t(e.lostReasonValue),shouldHide:!e.lostReasonValue||"NONE"===e.lostReasonValue},{label:t("deductionStatus"),value:e.deductionStatusValue,shouldHide:!e.deductionStatusTextToDisplay||"NONE"===e.deductionStatusTextToDisplay},{label:t("payer"),value:t(e.payerValue),shouldHide:!e.payerValue||"NONE"===e.payerValue},{label:t("arbitrationStatus"),value:t(e.arbitrationStatusValue),shouldHide:!e.arbitrationStatusValue||"NONE"===e.arbitrationStatusValue}]},m=function(e,t){return[{label:t("cardNumber"),value:e.cardNumber,shouldHide:!e.cardNumber},{label:t("cardType"),value:e.cardType,shouldHide:!e.cardType},{label:t("cardExpDate"),value:e.cardExpDate,shouldHide:!e.cardExpDate},{label:t("cardBank"),value:e.cardBank,shouldHide:!e.cardBank}]}}}]);