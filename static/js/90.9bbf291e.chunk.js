(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[90],{1500:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a.n(n),o=a(3),c=a(19),i=a(12),l=a(0),s=a.n(l),m=a(1565),u=a(380),d=a(27),b=a(468),p=a(167),f=a(189),h=(p.v.ACTIVE,p.v.INACTIVE,p.v.EXPIRED,p.v.PAUSED,[{label:"All",value:"ALL"},{label:"Active",value:"ACTIVE"},{label:"Inactive",value:"INACTIVE"},{label:"Expired",value:"EXPIRED"},{label:"Paused",value:"PAUSED"}]),v=function(e,t,a,n,r){var o=[{field:"referenceId",text:r("copyLabel"),textPressed:r("commonWords:valueCopied"),action:"copy"},{field:"description",text:r("copyDescription"),textPressed:r("commonWords:valueCopied"),action:"copy"},{field:"promoCode",text:r("copyPromoCode"),textPressed:r("commonWords:valueCopied"),action:"copy"}];return e&&o.push({text:Object(d.startCase)(r("pause")),onClickHandler:function(e){return n(e.id,e.referenceId,"pause")},shouldHide:function(e){return e.status===p.v.PAUSED||e.status===p.v.EXPIRED}},{text:Object(d.startCase)(r("unpause")),onClickHandler:function(e){return n(e.id,e.referenceId,"unpause")},shouldHide:function(e){return e.status!==p.v.PAUSED}},{text:r("commonWords:edit"),onClickHandler:function(e){return t(e.id,e.referenceId)}},{text:r("commonWords:delete"),onClickHandler:function(e){return a(e.id,e.referenceId)}}),{width:"5%",items:o}},g=function(e){return[{dataField:"statusLabelValue",type:"string",headerStyle:{width:"12%"}},{dataField:"labelValue",text:e("label"),type:"string",headerStyle:{width:"17%"}},{dataField:"termsValue",text:e("terms"),type:"string",headerStyle:{width:"18%"}},{dataField:"durationValue",text:e("duration"),type:"string",headerStyle:{width:"18%"}},{dataField:"promoCodeValue",text:e("promoCode"),type:"string",headerStyle:{width:"15%"}},{dataField:"appliesToValue",text:e("appliesTo"),type:"string",headerStyle:{width:"15%"}}]},C={from:new Date,to:new Date((new Date).setMonth((new Date).getMonth()+1))},E={referenceId:"",currency:{label:"",value:""},promotionAvailability:{promoCode:{isChecked:!1,value:""},channelCode:{isChecked:!1,selected:{label:"",value:""}},binList:{isChecked:!1,value:[]}},discountType:{type:"",value:""},minPurchase:"",maxDiscount:"",startTime:Object(f.c)(C.from),endTime:Object(f.c)(C.to),description:""},j={referenceId:"",promoCode:"",percentageDiscount:"",fixedAmountDiscount:"",dateRange:""},O=[{label:"Bank Central Asia",value:"BCA"},{label:"Bank Rakyat Indonesia",value:"BRI"},{label:"Bank Negara Indonesia",value:"BNI"},{label:"Bank Mandiri",value:"MANDIRI"},{label:"Bank CIMB Niaga",value:"CIMB"},{label:"Bank Tabungan Negara",value:"BTN"},{label:"Bank BTPN",value:"BTPN"},{label:"Panin Bank",value:"PANIN"},{label:"Bank OCBC NISP",value:"OCBCNISP"},{label:"Bank Maybank Indonesia",value:"MAYBANKID"},{label:"Bank Permata",value:"PERMATA"},{label:"Bank DBS",value:"DBS"},{label:"Standard Chartered Bank",value:"SCB"}],y=a(1575),x=a.n(y),w=a(1573),k=function(e){var t=e.discountPercent,a=e.discountAmount,n=e.minPurchase,r=e.maxDiscount,o=e.currency,c=e.fromDate,i=e.toDate,l=e.binList,m=a&&Object(w.b)(a,o);return{discountValueToDisplay:t?"".concat(t,"%"):m,formattedMinPurchase:n&&Object(w.b)(n,o),formattedMaxDiscount:r&&Object(w.b)(r,o),formattedFromDate:Object(f.h)(c),formattedToDate:Object(f.h)(i),mappedBinList:(l?l.slice(0,3):[]).map((function(e,t){return s.a.createElement("li",{key:t,className:"text-body-3"},e)}))}},N=a(288),D=a.n(N),I=function(e,t,a){var n=e.reference_id,r=e.description,o=(e.transaction_limit,e.start_time),c=e.end_time,i=e.status,l=e.discount_percent,m=e.discount_amount,u=e.min_original_amount,d=e.max_discount_amount,b=e.promo_code,f=e.channel_code,h=e.bin_list,v=e.currency,g=(e.created,e.updated,e.id),C=k({discountPercent:l,discountAmount:m,minPurchase:u,maxDiscount:d,currency:v,fromDate:o,toDate:c,binList:h}),E=C.discountValueToDisplay,j=C.formattedMinPurchase,O=C.formattedMaxDiscount,y=C.formattedFromDate,w=C.formattedToDate,N=C.mappedBinList,I=function(e,t){switch(e){case p.v.EXPIRED:return s.a.createElement(x.a,{variant:"danger",text:D()(p.v.EXPIRED.toLowerCase())});case p.v.INACTIVE:return s.a.createElement(x.a,{text:D()(p.v.INACTIVE.toLowerCase())});case p.v.PAUSED:return s.a.createElement(x.a,{variant:"warning",text:D()(p.v.PAUSED.toLowerCase())});default:return s.a.createElement(x.a,{variant:"success",text:D()(p.v.ACTIVE.toLowerCase())})}}(i),T=s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"font-weight-bold color-charcoal"},n),s.a.createElement("p",{className:"color-dark-gray mb-0"},r)),P=j?s.a.createElement("p",{className:"color-dark-gray mb-0"},a("minPurchase"),s.a.createElement("span",{className:"text-body-3"}," ",j)):"",A=O?s.a.createElement("p",{className:"color-dark-gray mb-0"},a("maxDiscount"),s.a.createElement("span",{className:"text-body-3"}," ",O)):"",M=s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"font-weight-bold color-charcoal mb-0"},a("discountValueOff",{discountValue:E})),P,A),S=s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"font-weight-bold color-charcoal mb-0"},y),s.a.createElement("p",{className:"color-dark-gray mb-0"},a("to")),s.a.createElement("p",{className:"font-weight-bold color-charcoal"},w)),L=b||"-",_=s.a.createElement("p",{className:"font-weight-bold"},L),B=f?s.a.createElement("p",{className:"color-dark-gray"},a("allCardsIssuedBy"),s.a.createElement("span",{className:"text-body-3"}," ",f)):"",F=h&&h.length>3&&s.a.createElement("span",{className:"link-to-modal pl-5",onClick:function(){return t(n,h)}},a("viewMore")),V=h&&h.length?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"color-dark-gray mb-0"},a("cardsWithBin")),s.a.createElement("ul",{className:"mb-2"},N),F):"",R=f||h?s.a.createElement(s.a.Fragment,null,B,V):s.a.createElement("span",{className:"font-weight-bold"},a("commonWords:all"));return{id:g,status:i,referenceId:n,description:r,promoCode:b,statusLabelValue:I,labelValue:T,termsValue:M,durationValue:S,promoCodeValue:_,appliesToValue:R}},T=a(37),P=a(26),A=a(20),M=a.n(A),S=a(80),L=a(478),_=a.n(L),B=a(31),F=a.n(B),V=a(150),R=a(1579),U=R.h().shape({referenceId:R.i().matches(V.noSpace,"noSpaceMessage").min(5,"refIdPromoCodeLengthMessage").max(24,"refIdPromoCodeLengthMessage")}),W=R.h().shape({promoCode:R.i().matches(V.noSpace,"noSpaceMessage").min(5,"refIdPromoCodeLengthMessage").max(24,"refIdPromoCodeLengthMessage")}),H=R.h().shape({percentageDiscount:R.g().min(1,"percentageDiscountRangeMessage").max(100,"percentageDiscountRangeMessage").typeError("percentageDiscountRangeMessage")}),z=R.h().shape({fixedAmountDiscount:R.g().min(1,"lessThanZeroMessage").typeError("lessThanZeroMessage")}),G=function(e,t){var a="";return F()(t).isBefore(e)&&(a="promotionDateRangeMessage"),a},Z=function(e){var t=e.referenceId,a=e.currency.value,n=e.promotionAvailability,r=n.promoCode,o=r.isChecked,c=r.value,i=n.channelCode,l=i.isChecked,s=i.selected.value,m=n.binList,u=m.isChecked,b=m.value,p=e.discountType,f=p.type,h=p.value,v=e.startTime,g=e.endTime,C=o&&!Object(d.isEmpty)(c),E=l&&!Object(d.isEmpty)(s),j=u&&!Object(d.isEmpty)(b),O=C||E||j,y={referenceId:!Object(d.isEmpty)(t),currency:!Object(d.isEmpty)(a),promotionAvailability:O,discountType:!Object(d.isEmpty)(f)&&!Object(d.isEmpty)(h),startTime:!Object(d.isEmpty)(v),endTime:!Object(d.isEmpty)(g)},x=Object(d.pickBy)(y,(function(e){return!0!==e}));return Object(d.isEmpty)(x)},X=function(e,t){var a=new Date(e),n=t.split("T")[1].split(":"),r=parseInt(n[0]),o=parseInt(n[1]);return a.setHours(r),a.setMinutes(o),a.setSeconds(0),a},K=a(1583),q=a.n(K),J=Object(u.a)(["promotion","commonComponents"])((function(e){var t=e.statusFilter,a=e.onChangeStatusFilter,n=e.statusFilterConfig,r=e.searchFilter,o=e.onChangeSearchFilter,c=e.promotions,i=e.isLoading,l=e.errorMessage,m=e.openBinListModal,u=e.openCreateEditPromotionModal,b=e.openDeleteConfirmationModal,p=e.openPauseConfirmationModal,f=e.allowedToCreateEdit,h=e.onClickEditPromotion,C=e.t,E={value:r,onChange:o,placeholder:C("searchByLabel"),position:"inline",customCss:"filter-item"},j={isClickable:!1,tableHeaderColumns:g(C),tableContentRows:c&&c.length?c.map((function(e){return I(e,m,C)})):[],isLoading:i,loadingText:C("loadingPromotions"),isError:!Object(d.isEmpty)(l),errorContent:s.a.createElement(S.t,{text:l}),isEmpty:Object(d.isEmpty)(c),emptyContent:s.a.createElement(S.r,{caption:C("emptyPromotionCaption"),subtitle:C("emptyPromotionSubtitle")}),actionButtonConfig:v(f,h,b,p,C),rowClasses:"table-row-vertical-align-top promotion-custom-table"},O=function(e,t,a,n){var r=s.a.createElement("div",{className:"promotion-status-filter"},s.a.createElement(_.a,{options:a,value:e,onChange:t,customCss:"radio-container"}));return[s.a.createElement(S.q,{displayText:Object(d.startCase)(e.toLowerCase()),children:[r]})]}(t,a,n),y=function(e,t,a){return[t&&s.a.createElement(M.a,{customCss:"offset-xl-1 align-self-end",iconLeft:s.a.createElement(T.a,{icon:P.C}),size:"sm",onClick:function(){return e("create")}},a("commonWords:create"))]}(u,f,C);return s.a.createElement(q.a,{filters:O,stickyHeader:!0,searchBarConfig:E,tableConfig:j,rightButtons:y})})),$=a(49),Y=a.n($),Q=Object(u.a)(["promotion","commonWords"])((function(e){var t=e.data,a=e.showModal,n=e.handleClose,r=e.t,o=t.title,c=t.binList,i=c&&c.length&&s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"color-dark-gray text-left mb-2"},r("appliesTo")," ",r("cardsWithBin")),s.a.createElement("ul",{className:"text-left mb-2"},c.map((function(e,t){return s.a.createElement("li",{key:t,className:"font-weight-bold"},e)}))));return s.a.createElement(Y.a,{showModal:a,handleClose:n,title:o,children:i,size:"sm"})})),ee=a(2064),te=a(211),ae=a.n(te),ne=a(151),re=a.n(ne),oe=a(291),ce=a.n(oe),ie=a(252),le=a.n(ie),se=a(149),me=a.n(se),ue=a(48),de=(a(2080),Object(u.a)(["promotion","commonWords"])((function(e){var t=e.showModal,a=e.handleClose,n=e.handleSubmit,r=e.handleChange,o=e.handleAddBinList,c=e.availableCurrency,i=e.inputValue,l=e.errorMessage,u=e.actionType,b=e.dateFormat,p=e.isLoading,f=e.t,h=i.referenceId,v=i.currency,g=i.promotionAvailability,C=g.promoCode,E=C.isChecked,y=C.value,x=g.channelCode,w=x.isChecked,k=x.selected,N=g.binList,D=N.isChecked,I=N.value,T=N.data,P=i.discountType,A=P.type,L=P.value,B=i.minPurchase,F=i.maxDiscount,V=i.startTime,R=i.endTime,U=i.description,W=l.referenceId,H=l.promoCode,z=l.percentageDiscount,G=l.fixedAmountDiscount,X=l.dateRange,K="create"===u,q=f(K?"createPromotion":"editPromotion"),J=Object(d.isEqual)(l,j),$=Z(i),Q=J&&$,te=s.a.createElement("div",{className:"pm-status-label pending-label text-sm ml-2"},f("optional")),ne=s.a.createElement("div",{className:"my-4"},s.a.createElement(me.a,{label:f("label"),name:"referenceId",placeholder:f("labelPlaceholder"),type:"text",value:h,onChange:function(e){return r("referenceId",e.target.value)},isInvalid:W,errorMessage:f(W)})),oe=c&&c.length>1,ie=v.label,se=s.a.createElement("div",{className:"mb-4"},s.a.createElement(le.a,{label:f("currency"),name:"currency",value:v,options:c,onChange:function(e){return r("currency",e)},customCss:"w-50",searchConfig:{enabled:!1}}),s.a.createElement("p",{className:"text-sm mt-2 mb-0"},f("currencyFormExplanation",{selectedCurrency:ie}))),de=k.label,be=s.a.createElement("div",{className:"mb-4 pl-25"},s.a.createElement(me.a,{name:"promoCode",placeholder:f("promoCodePlaceholder"),type:"text",value:y,onChange:function(e){return r("promoCodeInput",e.target.value)},isInvalid:H,errorMessage:f(H)})),pe=s.a.createElement(s.a.Fragment,null,s.a.createElement(ae.a,{name:"promotionAvailability",label:Object(d.capitalize)(f("promoCode")),checked:E,onChange:function(){return r("promoCodeCheckbox",!E)},customCss:"mb-2"}),E&&be),fe=s.a.createElement("div",{className:"mb-4 pl-25"},s.a.createElement(le.a,{name:"channelCode",value:k,options:O,onChange:function(e){return r("channelCodeSelector",e)}}),s.a.createElement("p",{className:"text-sm mt-2 mb-0"},k.value?f("channelCodeSelectorExplanationSelected",{selectedBankName:de}):f("channelCodeSelectorExplanation"))),he=s.a.createElement(s.a.Fragment,null,s.a.createElement(ae.a,{name:"promotionAvailability",label:f("channelCode"),checked:w,onChange:function(e){return r("channelCodeCheckbox",!w)},customCss:"mb-2"}),w&&fe),ve=s.a.createElement(re.a,{placement:"right",content:f("binExplanation"),customCss:{wrapper:"ml-2"}}),ge=s.a.createElement("div",{className:"d-flex align-items-center"},s.a.createElement("span",{className:"bin-list-label"},f("binList")),ve),Ce=s.a.createElement(m.a,{i18nKey:"binMultiselectFormats"},"Accepted formats: ",s.a.createElement("br",null),"If entering one BIN at a time: ",s.a.createElement("b",null,"'414707'")," ",s.a.createElement("br",null),"If entering multiple BINs at a time: ",s.a.createElement("br",null),s.a.createElement("b",null,"'414707 414808'")," or ",s.a.createElement("b",null,"'414707, 414808'")," ",s.a.createElement("br",null),"(you can paste a list if they are separated by spaces or commas)."),Ee=s.a.createElement("div",{className:"mb-2 pl-25 promotion-custom-multiselect"},s.a.createElement(ee.Multiselect,{data:T,value:I,onCreate:function(e){return o(e)},onChange:function(e){return r("binListMultiselect",e)},placeholder:f("binMultiselectPlaceholder")}),s.a.createElement("p",{className:"text-sm mt-2 mb-0"},f("binListMultiselectExplanation")),s.a.createElement("p",{className:"text-sm mt-2 mb-0"},Ce)),je=s.a.createElement(s.a.Fragment,null,s.a.createElement(ae.a,{name:"promotionAvailability",label:ge,checked:D,onChange:function(e){return r("binListCheckbox",!D)},customCss:"mb-2"}),D&&Ee),Oe=s.a.createElement("div",{className:"mb-4"},s.a.createElement("label",{className:"text-body-2 font-weight-bold"},f("promotionAvailability")),s.a.createElement("div",{className:"d-flex flex-column"},pe,he,je)),ye=s.a.createElement("div",{className:"pl-25 mb-4"},s.a.createElement(me.a,{name:"percentageDiscount",type:"number",value:L,onChange:function(e){return r("discountValue",e.target)},isInvalid:z,errorMessage:f(z),rightIcon:s.a.createElement("span",{className:"color-ash"},"%"),customCss:"position-relative w-25 promotion-modal-input-text"}),s.a.createElement(me.a,{label:s.a.createElement("p",{className:"text-sm m-0"},f("minPurchase")),name:"minPurchase",type:"number",value:B,onChange:function(e){return r("minPurchase",e.target.value)},placeholder:ie,rightIcon:te,customCss:"position-relative mt-1 promotion-modal-input-text"}),s.a.createElement(me.a,{label:s.a.createElement("p",{className:"text-sm m-0"},f("maxDiscount")),name:"maxDiscount",type:"number",value:F,onChange:function(e){return r("maxDiscount",e.target.value)},placeholder:ie,rightIcon:te,customCss:"position-relative mt-1 promotion-modal-input-text"})),xe=s.a.createElement("div",{className:"pl-25 mb-4"},s.a.createElement(me.a,{name:"fixedAmountDiscount",type:"number",value:L,onChange:function(e){return r("discountValue",e.target)},isInvalid:G,errorMessage:f(G),placeholder:ie,customCss:"position-relative promotion-modal-input-text"}),s.a.createElement(me.a,{label:s.a.createElement("p",{className:"text-sm m-0"},f("minPurchase")),name:"minPurchase",type:"number",value:B,onChange:function(e){return r("minPurchase",e.target.value)},placeholder:ie,rightIcon:te,customCss:"position-relative mt-1 promotion-modal-input-text"})),we=function(e){return[{label:e("percentageDiscount"),value:"percentage"},{label:e("fixedAmountDiscount"),value:"fixedAmount"}]}(f);Object(d.set)(we,["0","children"],ye),Object(d.set)(we,["1","children"],xe);var ke=s.a.createElement("div",{className:"mb-2"},s.a.createElement("label",{className:"text-body-2 font-weight-bold"},f("discountType")),s.a.createElement("div",{className:"d-flex flex-column"},s.a.createElement(_.a,{options:we,value:A,onChange:function(e){return r("discountType",e.target.value)},disabled:!K,customCss:"w-100"}))),Ne=s.a.createElement(s.a.Fragment,null,s.a.createElement("label",{className:"text-body-2 font-weight-bold"},f("effectiveFrom")),s.a.createElement("div",{className:"d-flex"},s.a.createElement(S.m,{date:!0,onChange:function(e){return r("fromDate",e)},value:new Date(V),inputFormat:b.date_time_picker,outputFormat:ue.a.GMT_MS_Z,noShadow:!0,customCss:"w-40",max:new Date(R)}),s.a.createElement(S.m,{time:!0,onChange:function(e){return r("fromTime",e)},value:new Date(V),inputFormat:"HH:mm",outputFormat:ue.a.GMT_MS_Z,noShadow:!0,customCss:"w-20 ml-2"}))),De=s.a.createElement(s.a.Fragment,null,s.a.createElement("label",{className:"text-body-2 font-weight-bold"},f("to")),s.a.createElement("div",{className:"d-flex"},s.a.createElement(S.m,{date:!0,onChange:function(e){return r("toDate",e)},value:new Date(R),inputFormat:b.date_time_picker,outputFormat:ue.a.GMT_MS_Z,noShadow:!0,customCss:"w-40",min:new Date(V)}),s.a.createElement(S.m,{time:!0,onChange:function(e){return r("toTime",e)},value:new Date(R),inputFormat:"HH:mm",outputFormat:ue.a.GMT_MS_Z,noShadow:!0,customCss:"w-20 ml-2"}))),Ie=s.a.createElement("div",{className:"mb-4"},Ne,De,s.a.createElement("p",{className:"error-message-text text-left color-danger m-0"},f(X))),Te=s.a.createElement("div",{className:"d-flex align-items-center"},s.a.createElement("span",null,f("description")),te),Pe=s.a.createElement("div",{className:"mb-4 position-relative"},s.a.createElement(ce.a,{label:Te,placeholder:f("descriptionPlaceholder"),value:U,showCharacterCount:!Object(d.isEmpty)(U),maxLength:150,rows:3,onChange:function(e){return r("description",e.target.value)}})),Ae=s.a.createElement(M.a,{size:"md",type:"submit",isDisabled:!Q,isLoading:p},Object(d.capitalize)(q.toLowerCase())),Me=s.a.createElement(S.gb,{onSubmit:n,customCss:"text-left"},ne,oe&&se,Oe,ke,Ie,Pe,Ae);return s.a.createElement(Y.a,{showModal:t,handleClose:a,title:q,children:Me,size:"sm"})}))),be=function(e){var t=e.showModal,a=e.handleClose,n=e.handleConfirm,r=e.inputValue,o=e.actionType,c=e.isLoading,i=e.openBinListModal,l=e.t,m=r.referenceId,u=r.currency.value,b=r.promotionAvailability,p=b.promoCode.value,f=b.channelCode.selected.value,h=b.binList.value,v=r.discountType,g=v.type,C=v.value,E=r.minPurchase,j=r.maxDiscount,O=r.startTime,y=r.endTime,x=r.description,w=k({discountPercent:"percentage"===g&&C,discountAmount:"fixedAmount"===g&&C,minPurchase:E,maxDiscount:j,currency:u,fromDate:O,toDate:y,binList:h}),N=w.discountValueToDisplay,D=w.formattedMinPurchase,I=w.formattedMaxDiscount,T=w.formattedFromDate,P=w.formattedToDate,A=w.mappedBinList,M=l("create"===o?"createPromotion":"editPromotion"),L=l("create"===o?"createPromotionSubtitle":"editPromotionSubtitle"),_=f?s.a.createElement("p",{className:"color-dark-gray mb-0"},l("allCardsIssuedBy"),s.a.createElement("span",{className:"font-weight-bold "}," ",f)):"",B=h.length>3&&s.a.createElement("span",{className:"link-to-modal pl-5",onClick:function(){return i(m,h)}},l("viewMore")),F=h&&h.length?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"color-dark-gray mt-1 mb-0"},l("cardsWithBin")),s.a.createElement("ul",{className:"mb-2"},A),B):"",V=!Object(d.isEmpty)(f)||!Object(d.isEmpty)(h)?s.a.createElement("div",{className:"w-50"},_,F):s.a.createElement("span",{className:"w-50 font-weight-bold"},l("commonWords:all")),R=D?s.a.createElement("p",{className:"color-dark-gray mb-0"},l("minPurchase"),s.a.createElement("span",{className:"font-weight-bold"}," ",D)):"",U=I?s.a.createElement("p",{className:"color-dark-gray mb-0"},l("maxDiscount"),s.a.createElement("span",{className:"font-weight-bold"}," ",I)):"",W=s.a.createElement("div",{className:"w-50"},s.a.createElement("p",{className:"font-weight-bold mb-0"},l("discountValueOff",{discountValue:N})),R,U),H=s.a.createElement("div",{className:"w-50"},s.a.createElement("p",{className:"mb-0 font-weight-bold"},T),s.a.createElement("p",{className:"color-dark-gray mb-0"},l("to")),s.a.createElement("p",{className:"mb-0 font-weight-bold"},P)),z=s.a.createElement("div",{className:"text-left confirmation-modal-additional-content"},s.a.createElement("div",{className:"d-flex align-items-start mb-3"},s.a.createElement("span",{className:"w-50 font-weight-bold color-charcoal"},l("label")),s.a.createElement("span",{className:"w-50 font-weight-bold"},m)),p&&s.a.createElement("div",{className:"d-flex align-items-start mb-3"},s.a.createElement("span",{className:"w-50 font-weight-bold color-charcoal"},l("promoCode")),s.a.createElement("span",{className:"w-50 font-weight-bold"},p)),s.a.createElement("div",{className:"d-flex align-items-start mb-3"},s.a.createElement("span",{className:"w-50 font-weight-bold color-charcoal"},l("appliesTo")),V),s.a.createElement("div",{className:"d-flex align-items-start mb-3"},s.a.createElement("span",{className:"w-50 font-weight-bold color-charcoal"},l("terms")),W),s.a.createElement("div",{className:"d-flex align-items-start mb-3"},s.a.createElement("span",{className:"w-50 font-weight-bold color-charcoal"},l("duration")),H),x&&s.a.createElement("div",{className:"d-flex align-items-start mb-3"},s.a.createElement("span",{className:"w-50 font-weight-bold color-charcoal"},l("description")),s.a.createElement("span",{className:"w-50 font-weight-bold"},x)));return s.a.createElement(S.j,{type:"info",title:M,subtitle:L,size:"md",showModal:t,buttonText:l("commonWords:confirm"),buttonCustomCss:"min-width-120",isButtonLoading:c,withCancel:!0,handleCancel:a,handleClose:a,handleConfirm:n,preserveMobileView:!0,additionalContent:z})};be.defaultProps={inputValue:E};var pe=Object(u.a)(["promotion","commonWords"])(be);t.default=Object(u.a)(["promotion","creditCardErrorMessages","errorMessages"])((function(e){var t=e.user,a=e.apiCall,n=e.environment,u=e.dateFormat,v=e.t,g=t.can_administer,C=t.can_manage_tech_settings,y=g&&C,x=Object(l.useState)([]),w=Object(i.a)(x,2),k=w[0],N=w[1],D=Object(l.useState)([]),I=Object(i.a)(D,2),T=I[0],P=I[1],A=Object(l.useState)(!1),M=Object(i.a)(A,2),L=M[0],_=M[1],B=Object(l.useState)(!1),F=Object(i.a)(B,2),V=F[0],R=F[1],K=Object(l.useState)(""),q=Object(i.a)(K,2),$=q[0],Y=q[1],ee=Object(l.useState)("ALL"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(l.useState)(""),oe=Object(i.a)(re,2),ce=oe[0],ie=oe[1],le=Object(l.useState)(null),se=Object(i.a)(le,2),me=se[0],ue=se[1],be=Object(l.useState)(!1),fe=Object(i.a)(be,2),he=fe[0],ve=fe[1],ge=Object(l.useState)({title:"",binList:[]}),Ce=Object(i.a)(ge,2),Ee=Ce[0],je=Ce[1],Oe=Object(l.useState)(!1),ye=Object(i.a)(Oe,2),xe=ye[0],we=ye[1],ke=Object(l.useState)(""),Ne=Object(i.a)(ke,2),De=Ne[0],Ie=Ne[1],Te=Object(l.useState)(E),Pe=Object(i.a)(Te,2),Ae=Pe[0],Me=Pe[1],Se=Object(l.useState)(j),Le=Object(i.a)(Se,2),_e=Le[0],Be=Le[1],Fe=Object(l.useState)(!1),Ve=Object(i.a)(Fe,2),Re=Ve[0],Ue=Ve[1],We=Object(l.useState)(!1),He=Object(i.a)(We,2),ze=He[0],Ge=He[1],Ze=Object(l.useState)({id:"",referenceId:""}),Xe=Object(i.a)(Ze,2),Ke=Xe[0],qe=Xe[1],Je=Object(l.useState)(!1),$e=Object(i.a)(Je,2),Ye=$e[0],Qe=$e[1],et=Object(l.useState)(!1),tt=Object(i.a)(et,2),at=tt[0],nt=tt[1],rt=Object(l.useState)(""),ot=Object(i.a)(rt,2),ct=ot[0],it=ot[1];Object(l.useEffect)((function(){Y(""),ht(),vt(),R(!1)}),[n,ae]);var lt=Object(l.useState)({title:"",description:""}),st=Object(i.a)(lt,2),mt=st[0],ut=st[1],dt=Object(l.useState)(!1),bt=Object(i.a)(dt,2),pt=bt[0],ft=bt[1];Object(l.useEffect)((function(){clearTimeout(me),ue(setTimeout((function(){(!ce||ce.length>2)&&V&&vt()}),500)),R(!1)}),[ce]);var ht=function(){var e=Object(c.a)(r.a.mark((function e(){var t,n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.axiosGet(p.d.ccSettings);case 3:if(!(t=e.sent).error_code){e.next=8;break}throw t;case 8:n=t.available_currency,c=[],n.forEach((function(e){return c.push({label:e.currency,value:e.currency})})),N(c),Me(Object(o.a)(Object(o.a)({},E),{},{currency:c[0]}));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),Y(Object(b.b)(e.t0.error_code,v));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),vt=function(){var e=Object(c.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.prev=1,t={status:("ALL"===ae?void 0:ae)||void 0,reference_id:ce||void 0},e.next=7,a.axiosGet(p.d.ccPromotion,t);case 7:if(!(n=e.sent).error_code){e.next=12;break}throw n;case 12:P(n);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),Y(Object(b.b)(e.t0.error_code,v));case 18:_(!1);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),gt=function(e,t){var a=Ae.startTime,n=Ae.endTime;switch(e){case"referenceId":Be(Object(o.a)(Object(o.a)({},_e),{},{referenceId:""})),U.validate({referenceId:t}).catch(function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Be(Object(o.a)(Object(o.a)({},_e),{},{referenceId:t.message}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());break;case"promoCodeInput":Be(Object(o.a)(Object(o.a)({},_e),{},{promoCode:""})),W.validate({promoCode:t}).catch(function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Be(Object(o.a)(Object(o.a)({},_e),{},{promoCode:t.message}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());break;case"percentageDiscount":Be(Object(o.a)(Object(o.a)({},_e),{},{percentageDiscount:""})),H.validate({percentageDiscount:t}).catch(function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Be(Object(o.a)(Object(o.a)({},_e),{},{percentageDiscount:t.message}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());break;case"fixedAmountDiscount":Be(Object(o.a)(Object(o.a)({},_e),{},{fixedAmountDiscount:""})),z.validate({fixedAmountDiscount:t}).catch(function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Be(Object(o.a)(Object(o.a)({},_e),{},{fixedAmountDiscount:t.message}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());break;case"fromDate":case"fromTime":var i=G(t,n);Be(Object(o.a)(Object(o.a)({},_e),{},{dateRange:i}));break;case"toDate":case"toTime":var l=G(a,t);Be(Object(o.a)(Object(o.a)({},_e),{},{dateRange:l}));break;default:return}},Ct=function(){var e=Object(c.a)(r.a.mark((function e(){var t,n,o,c,i,l,s,m,u,f,h,g,C,E,j,O,y,x,w,k,N,D,I,T,P,A;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ue(!0),t="create"===De,e.prev=2,n=Ke.id,o=Ae.referenceId,c=Ae.currency.value,i=Ae.promotionAvailability,l=i.promoCode,s=l.isChecked,m=l.value,u=i.channelCode,f=u.isChecked,h=u.selected.value,g=i.binList,C=g.isChecked,E=g.value,j=Ae.discountType,O=j.type,y=j.value,x=Ae.minPurchase,w=Ae.maxDiscount,k=Ae.startTime,N=Ae.endTime,D=Ae.description,I={reference_id:o,currency:c,promo_code:s&&m,channel_code:f&&h,bin_list:C&&E,discount_percent:"percentage"===O&&y,discount_amount:"fixedAmount"===O&&y,min_original_amount:x,max_discount_amount:w,start_time:k,end_time:N,description:D},T=Object(d.pickBy)(I,(function(e){return e&&!Object(d.isEmpty)(e)})),P=t?a.axiosPost(p.d.ccPromotion,T):a.axiosPut(p.d.ccPromotionUpdateDelete(n),T),e.next=10,P;case 10:if(!(A=e.sent).error_code){e.next=15;break}throw A;case 15:vt(),jt();case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),ut({title:Object(b.c)(e.t0.error_code,v),description:Object(b.b)(e.t0.error_code,v)}),ft(!0);case 23:Ge(!1),Ue(!1);case 25:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(){return e.apply(this,arguments)}}(),Et=function(e){Ie(e),we(!0)},jt=function(){we(!1),kt()},Ot=function(){var e=Object(c.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ue(!0),e.prev=1,t=Ke.id,e.next=5,a.axiosDelete(p.d.ccPromotionUpdateDelete(t));case 5:if(!(n=e.sent).error_code){e.next=10;break}throw n;case 10:vt();case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),ut({title:Object(b.c)(e.t0.error_code,v),description:Object(b.b)(e.t0.error_code,v)}),ft(!0);case 17:Qe(!1),Ue(!1);case 19:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),yt=function(e){var t=T.filter((function(t){return t.reference_id===e}))[0],a=t.currency,n=t.promo_code,r=t.channel_code,o=t.bin_list,c=t.discount_percent,i=t.discount_amount,l=t.min_original_amount,s=t.max_discount_amount,m=t.start_time,u=t.end_time,b=t.description,p=r&&O.filter((function(e){return e.value===r}));Me({referenceId:e,currency:{label:a,value:a},promotionAvailability:{promoCode:{isChecked:!Object(d.isUndefined)(n),value:n},channelCode:{isChecked:!Object(d.isUndefined)(r),selected:{label:p&&p[0].label,value:r}},binList:{isChecked:!Object(d.isUndefined)(o),value:o||[]}},discountType:{type:Object(d.isUndefined)(c)?"fixedAmount":"percentage",value:Object(d.isUndefined)(c)?i.toString():c.toString()},minPurchase:l,maxDiscount:s,startTime:m,endTime:u,description:b})},xt=function(){var e=Object(c.a)(r.a.mark((function e(){var t,n,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ue(!0),t="pause"===ct,e.prev=2,n=Ke.id,o={status:t?p.v.PAUSED:p.v.ACTIVE},e.next=7,a.axiosPut(p.d.ccPromotionUpdateDelete(n),o);case 7:if(!(c=e.sent).error_code){e.next=12;break}throw c;case 12:vt();case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),ut({title:Object(b.c)(e.t0.error_code,v),description:Object(b.b)(e.t0.error_code,v)}),ft(!0);case 19:nt(!1),Ue(!1);case 21:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(){return e.apply(this,arguments)}}(),wt=function(e,t){je({title:e,binList:t}),ve(!0)},kt=function(){Me(Object(o.a)(Object(o.a)({},E),{},{currency:k[0]})),Be(j)},Nt=s.a.createElement(Q,{showModal:he,handleClose:function(){return ve(!1)},data:Ee}),Dt=s.a.createElement(de,{showModal:xe,handleClose:jt,handleSubmit:function(e){e.preventDefault(),Ge(!0)},handleChange:function(e,t){var a=Ae.startTime,n=Ae.endTime;switch(e){case"referenceId":Me(Object(o.a)(Object(o.a)({},Ae),{},{referenceId:t})),gt(e,t);break;case"currency":Me(Object(o.a)(Object(o.a)({},Ae),{},{currency:t}));break;case"promoCodeCheckbox":Me(Object(o.a)(Object(o.a)({},Ae),{},{promotionAvailability:Object(o.a)(Object(o.a)({},Ae.promotionAvailability),{},{promoCode:Object(o.a)(Object(o.a)({},Ae.promotionAvailability.promoCode),{},{isChecked:t})})}));break;case"channelCodeCheckbox":Me(Object(o.a)(Object(o.a)({},Ae),{},{promotionAvailability:Object(o.a)(Object(o.a)({},Ae.promotionAvailability),{},{channelCode:Object(o.a)(Object(o.a)({},Ae.promotionAvailability.channelCode),{},{isChecked:t})})}));break;case"binListCheckbox":Me(Object(o.a)(Object(o.a)({},Ae),{},{promotionAvailability:Object(o.a)(Object(o.a)({},Ae.promotionAvailability),{},{binList:Object(o.a)(Object(o.a)({},Ae.promotionAvailability.binList),{},{isChecked:t})})}));break;case"promoCodeInput":Me(Object(o.a)(Object(o.a)({},Ae),{},{promotionAvailability:Object(o.a)(Object(o.a)({},Ae.promotionAvailability),{},{promoCode:Object(o.a)(Object(o.a)({},Ae.promotionAvailability.promoCode),{},{value:t})})})),gt(e,t);break;case"channelCodeSelector":Me(Object(o.a)(Object(o.a)({},Ae),{},{promotionAvailability:Object(o.a)(Object(o.a)({},Ae.promotionAvailability),{},{channelCode:Object(o.a)(Object(o.a)({},Ae.promotionAvailability.channelCode),{},{selected:t})})}));break;case"binListMultiselect":Me(Object(o.a)(Object(o.a)({},Ae),{},{promotionAvailability:Object(o.a)(Object(o.a)({},Ae.promotionAvailability),{},{binList:Object(o.a)(Object(o.a)({},Ae.promotionAvailability.binList),{},{value:t})})}));break;case"discountType":Me(Object(o.a)(Object(o.a)({},Ae),{},{discountType:{type:t,value:""},minPurchase:"",maxDiscount:""}));break;case"discountValue":var r=t.name,c=t.value;Me(Object(o.a)(Object(o.a)({},Ae),{},{discountType:Object(o.a)(Object(o.a)({},Ae.discountType),{},{value:c})})),gt(r,c);break;case"minPurchase":Me(Object(o.a)(Object(o.a)({},Ae),{},{minPurchase:t}));break;case"maxDiscount":Me(Object(o.a)(Object(o.a)({},Ae),{},{maxDiscount:t}));break;case"fromDate":var i=new Date(t);i.setHours(0),i.setMinutes(0),Me(Object(o.a)(Object(o.a)({},Ae),{},{startTime:Object(f.c)(i)})),gt(e,i);break;case"fromTime":var l=X(a,t);Me(Object(o.a)(Object(o.a)({},Ae),{},{startTime:Object(f.c)(l)})),gt(e,l);break;case"toDate":var s=new Date(t);s.setHours(0),s.setMinutes(0),Me(Object(o.a)(Object(o.a)({},Ae),{},{endTime:Object(f.c)(s)})),gt(e,s);break;case"toTime":var m=X(n,t);Me(Object(o.a)(Object(o.a)({},Ae),{},{endTime:Object(f.c)(m)})),gt(e,m);break;case"description":Me(Object(o.a)(Object(o.a)({},Ae),{},{description:t}));break;default:return}},handleAddBinList:function(e){var t=e.split(/[ ,]+/),a=[];t.forEach((function(e){/^\d{6}$/gm.test(e)&&a.push(e)})),Me(Object(o.a)(Object(o.a)({},Ae),{},{promotionAvailability:Object(o.a)(Object(o.a)({},Ae.promotionAvailability),{},{binList:Object(o.a)(Object(o.a)({},Ae.promotionAvailability.binList),{},{value:Ae.promotionAvailability.binList.value.concat(a)})})}))},availableCurrency:k,inputValue:Ae,errorMessage:_e,actionType:De,dateFormat:u,isLoading:Re}),It=s.a.createElement(pe,{showModal:ze,handleClose:function(){return Ge(!1)},handleConfirm:Ct,inputValue:Ae,actionType:De,isLoading:Re,openBinListModal:wt}),Tt=s.a.createElement(S.j,{type:"danger",title:mt.title,subtitle:mt.description,showModal:pt,handleClose:function(){return ft(!1)}}),Pt=s.a.createElement(m.a,{i18nKey:"deletePromotionSubtitle"},"Are you sure you want to delete"," ",s.a.createElement("b",null,{referenceId:Ke.referenceId})," ?"),At=s.a.createElement(S.j,{type:"danger",title:v("deletePromotionTitle"),subtitle:Pt,showModal:Ye,handleClose:function(){return Qe(!1)},buttonText:v("commonWords:delete"),buttonType:"destructive",buttonCustomCss:"min-width-120",isButtonLoading:Re,handleConfirm:Ot,withCancel:!0,handleCancel:function(){return Qe(!1)}}),Mt=s.a.createElement(m.a,{i18nKey:"deletePromotionSubtitle"},"Are you sure you want to ",v(ct)," ",s.a.createElement("b",null,{referenceId:Ke.referenceId})," ?"),St=s.a.createElement(S.j,{type:"info",title:"".concat(Object(d.startCase)(v(ct))," ").concat(v("pausePromotionTitle")),subtitle:Mt,showModal:at,handleClose:function(){return nt(!1)},buttonText:Object(d.startCase)(v(ct)),buttonCustomCss:"min-width-120",isButtonLoading:Re,handleConfirm:xt,withCancel:!0,handleCancel:function(){return nt(!1)}}),Lt=s.a.createElement(J,{statusFilter:ae,onChangeStatusFilter:function(e){R(!0),ne(e.target.value)},statusFilterConfig:h,searchFilter:ce,onChangeSearchFilter:function(e){e.preventDefault(),R(!0),ie(e.target.value)},promotions:T,isLoading:L,errorMessage:$,openBinListModal:wt,openCreateEditPromotionModal:Et,openDeleteConfirmationModal:function(e,t){qe({id:e,referenceId:t}),Qe(!0)},openPauseConfirmationModal:function(e,t,a){qe({id:e,referenceId:t}),it(a),nt(!0)},allowedToCreateEdit:y,onClickEditPromotion:function(e,t){qe({id:e,referenceId:t}),yt(t),Z(Ae),Et("edit")}});return s.a.createElement(s.a.Fragment,null,Lt,Nt,Dt,It,Tt,At,St)}))},1573:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return i})),a.d(t,"e",(function(){return l}));var n=function(e,t){return"IDR"!==t&&t?e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"):e.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")},r=function(e){return e.toLocaleString("en-US").replace(/,/g,".")},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.toLocaleString("en-US",{minimumFractionDigits:t?2:0})},c=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=o(e,n),c="IDR"===t?r.replace(/,/g,"."):r,i=a?"".concat(t," "):"",l="".concat(i).concat(c);return l},i=function(e,t,a){var n=t?c(e,t):o(e),r=n.split("-").join(""),i="".concat((null!=a?a:e>0)?"+ ":"- "," ").concat(r);return 0===e&&(i=n),i},l=function(e){return"".concat((100*e).toFixed(2),"%")}},2080:function(e,t,a){}}]);