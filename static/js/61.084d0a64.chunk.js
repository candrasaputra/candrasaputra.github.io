(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[61],{1534:function(e,t,a){"use strict";a.r(t);var n=a(9),c=a.n(n),r=a(19),s=a(12),u=a(0),l=a.n(u),i=a(511),o=a(284),d=a(205),m=a(380),b=a(67),f=a(27),E=a(80),p=a(31),v=a.n(p),O=a(1575),_=a.n(O),A=a(1573),D=a(28),L=a(1935),C=a.n(L),S=a(288),j=a.n(S),T=Object(m.a)("fixedVirtualAccountsDetails")((function(e){var t=e.transaction,a=e.t,n=e.entity,c=t.estimated_settlement_date,r=t.fees_paid_amount,s=t.status,u=t.amount,i=t.currency,o=t.created,d=t.external_id,m=t.payment_id,b=t.type,f=i||"IDR",p=[{label:a("".concat(L.LABEL[n].DATE)),value:v()(o).format("DD MMM YYYY - h:mm:ss A")},{label:a("externalIDLabel"),value:d},{label:a("".concat(L.LABEL[n].REFERENCE)),value:m}];c&&p.splice(1,0,{label:a("estimatedSettlementDate"),value:v()(c).format("DD MMM YYYY - h:mm:ss A")}),"COMPLETED"===s&&r&&p.push({label:a("".concat(L.LABEL[n].FEE)),value:Object(A.b)(r,f)}),n===D.a.INSTAMONEY&&p.splice(0,0,{label:a("type"),value:b||"-"});var O=j()(null===s||void 0===s?void 0:s.toLowerCase()),C=l.a.createElement(_.a,{text:O,variant:"success"}),S=u&&Object(A.b)(u,f);return l.a.createElement(E.p,{title:a("transactionAmountTitle"),amountValue:S,label:C,items:p,customCss:"mb-4"})})),x=Object(m.a)("fixedVirtualAccountsDetails")((function(e){var t=e.information,a=e.t,n=[{label:a("nameLabel"),value:t.name},{label:a("bankCodeLabel"),value:t.bank_code},{label:a("vaNumberLabel"),value:"".concat(t.merchant_code," ").concat(t.account_number)}];return l.a.createElement(E.p,{title:a("vaInfoTitle"),items:n,customCss:"mb-4"})})),h=Object(m.a)("fixedVirtualAccountsDetails")((function(e){var t=e.eventHistory,a=e.status,n=e.t,c=[{label:n("detected"),value:v()(t.detected).format("DD MMM YYYY - h:mm:ss A")}];return"COMPLETED"===a&&c.push({label:n("completed"),value:v()(t.completed).format("DD MMM YYYY - h:mm:ss A")}),l.a.createElement(E.p,{title:n("eventHistory"),items:c,customCss:"mb-4"})})),g=Object(m.a)("fixedVirtualAccountsDetails")((function(e){var t=e.callbackDetailsEvents,a=e.callbackData,n=e.t,c=e.user,r=e.onCallbackClick,i=e.isCallbackLoading,m=e.entity,b=c.can_manage_tech_settings,p=c.can_edit,O=b||m===D.a.INSTAMONEY&&p,_=Object(u.useState)(""),A=Object(s.a)(_,2),C=A[0],S=A[1],j=[];t.forEach((function(e,t){j.push({id:t,date:v()(e.timestamp).format("DD MMM YYYY - h:mm:ss A"),status:e.status,sender:e.resender_user_name||Object(f.startCase)(m)})}));var T=C&&l.a.createElement(o.a,{className:"px-2"},l.a.createElement(d.a,{md:5},l.a.createElement("p",{className:"color-ash-dark"},n("failureReason"))),l.a.createElement(d.a,{md:7},l.a.createElement("p",null,n(C))));return l.a.createElement(E.g,{title:n("callbackDetailTitle"),tableContents:j,customCss:"mb-4",clickableTable:!0,onTableDetailsClick:function(e){var a=t[e.id].status_code,n=Object(f.head)(a.toString()),c=C?"":L.ERROR_STATUS[n];S(c)},showCallbackButton:O,buttonText:n("resendCallback"),onButtonClick:function(){var e=a.id;r(e)},isButtonLoading:i},T)}));a(2083),t.default=Object(b.o)(Object(m.a)("fixedVirtualAccountsDetails")((function(e){var t=e.t,a=e.apiCall,n=e.match,m=e.history,b=e.user,p=e.environment,v=e.entity,O=Object(u.useState)(!1),_=Object(s.a)(O,2),A=_[0],D=_[1],S=Object(u.useState)(!1),j=Object(s.a)(S,2),k=j[0],N=j[1],y=Object(u.useState)(!1),M=Object(s.a)(y,2),Y=M[0],R=M[1],I=Object(u.useState)({}),P=Object(s.a)(I,2),B=P[0],F=P[1],V=Object(u.useState)({}),w=Object(s.a)(V,2),U=w[0],H=w[1],K=Object(u.useState)([]),q=Object(s.a)(K,2),G=q[0],J=q[1],Q=Object(u.useState)({}),z=Object(s.a)(Q,2),$=z[0],W=z[1],X=Object(u.useState)(""),Z=Object(s.a)(X,2),ee=Z[0],te=Z[1],ae=Object(u.useState)(!0),ne=Object(s.a)(ae,2),ce=ne[0],re=ne[1],se=function(){m.push({pathname:L.PATH.VIRTUAL_ACCOUNTS_PAYMENTS,state:{isFromDetailsPage:!0}})};Object(u.useEffect)((function(){N(!0),D(!0),ue(),le()}),[]),Object(u.useEffect)((function(){A&&se()}),[p]);var ue=function(){var e=Object(r.a)(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.params.id,e.next=3,a.axiosGet(L.ENDPOINT.VA_DEPOSITS(t));case 3:if(!(r=e.sent).error_code){e.next=7;break}return te(r.error_code),e.abrupt("return");case 7:N(!1),F(r),H(r.transaction_timestamps);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(r.a)(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.params.id,e.next=3,a.axiosGet(L.ENDPOINT.CALLBACK_REQUEST(t));case 3:if(!(r=e.sent).error_code&&"CALLBACK_URL_NOT_SET"!==r.status){e.next=7;break}return re(!1),e.abrupt("return");case 7:J(r.events),W(Object(f.omit)(r,["events","request_payload"]));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.next=3,a.axiosPost(L.ENDPOINT.RESEND_CALLBACK(t));case 3:R(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=l.a.createElement(E.z,{isLoading:!0,loadingText:t(C.a.LOADING_VA_DETAILS)}),de=l.a.createElement(E.t,{text:ee}),me=ce&&G.length>0;return l.a.createElement(l.a.Fragment,null,l.a.createElement(E.o,{goBack:se,title:t("headerTitle")}),k?oe:ee?de:l.a.createElement(i.a,null,l.a.createElement(o.a,null,l.a.createElement(d.a,{lg:7},l.a.createElement(T,{transaction:B,entity:v}),l.a.createElement(x,{information:B})),l.a.createElement(d.a,{lg:5},l.a.createElement(h,{eventHistory:U,status:B.status}),me&&l.a.createElement(g,{user:b,callbackDetailsEvents:G,callbackData:$,onCallbackClick:ie,isCallbackLoading:Y,entity:v})))))})))},1573:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return c})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return u})),a.d(t,"e",(function(){return l}));var n=function(e,t){return"IDR"!==t&&t?e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"):e.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")},c=function(e){return e.toLocaleString("en-US").replace(/,/g,".")},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.toLocaleString("en-US",{minimumFractionDigits:t?2:0})},s=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=r(e,n),s="IDR"===t?c.replace(/,/g,"."):c,u=a?"".concat(t," "):"",l="".concat(u).concat(s);return l},u=function(e,t,a){var n=t?s(e,t):r(e),c=n.split("-").join(""),u="".concat((null!=a?a:e>0)?"+ ":"- "," ").concat(c);return 0===e&&(u=n),u},l=function(e){return"".concat((100*e).toFixed(2),"%")}},1575:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=u(a(0)),c=u(a(2)),r=u(a(6)),s=u(a(1576));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(1577);var i=function(e){var t,a=e.text,c=e.iconLeft,u=e.customCss,i=e.variant,o=(0,r.default)((l(t={"status-pill":!0},"status-pill-".concat(i),i),l(t,u,u),t));return n.default.createElement(s.default,{text:a,iconLeft:c,customCss:o})};i.propTypes={text:c.default.string,iconLeft:c.default.any,variant:c.default.oneOf(["success","danger","warning","first-level","second-level"]),customCss:c.default.string};var o=i;t.default=o},1576:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),e.exports=a(467)},1577:function(e,t,a){},1935:function(e,t){e.exports={LOADING_VA_DETAILS:"loadingVirtualAccountsDetails",ENDPOINT:{VA_DEPOSITS:function(e){return"/api/virtual_account_deposits/".concat(e)},CALLBACK_REQUEST:function(e){return"/api/callback_requests/request_payload_id=".concat(e)},RESEND_CALLBACK:function(e){return"/api/callback_requests/".concat(e)}},ERROR_STATUS:{1:"errorStatus1",3:"errorStatus3",4:"errorStatus4",5:"errorStatus5"},PATH:{VIRTUAL_ACCOUNTS_PAYMENTS:"/virtual_accounts/payments"},LABEL:{xendit:{DATE:"dateLabel",REFERENCE:"paymentIDLabel",FEE:"xenditFee"},instamoney:{DATE:"dateCreated",REFERENCE:"reference",FEE:"fee"}}}},2083:function(e,t,a){}}]);