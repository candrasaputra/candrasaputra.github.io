(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[93],{1515:function(e,t,a){"use strict";a.r(t);var n=a(3),i=a(9),c=a.n(i),r=a(19),l=a(12),s=a(0),o=a.n(s),d=a(380),u=a(27),m=a(468),b=a(167),f=a(189),p=function(e){return 0===e.indexOf("4")?x(e)?b.b.VISA_ELECTRON:b.b.VISA:h(e)?b.b.MAESTRO:O(e)?b.b.AMEX:j(e)?b.b.DANKORT:g(e)?b.b.MASTERCARD:E(e)?b.b.DISCOVER:w(e)?b.b.JCB:b.b.UNKNOWN},O=function(e){return 0===e.indexOf("34")||0===e.indexOf("37")},g=function(e){var t=Number(e.substring(0,2));return t>=50&&t<=55},E=function(e){var t=Number(e.substring(0,3)),a=Number(e.substring(0,6));return t>=644&&t<=649||a>=622126&&a<=622925||0===e.indexOf("65")||0===e.indexOf("6011")},w=function(e){var t=e.substring(0,4);return t>=3528&&t<=3589},h=function(e){return 0===e.indexOf("5018")||0===e.indexOf("5020")||0===e.indexOf("5038")||0===e.indexOf("5612")||0===e.indexOf("5893")||0===e.indexOf("6304")||0===e.indexOf("6759")||0===e.indexOf("6761")||0===e.indexOf("6762")||0===e.indexOf("6763")||0===e.indexOf("0604")||0===e.indexOf("6390")},j=function(e){return 0===e.indexOf("5019")},x=function(e){return 0===e.indexOf("4026")||0===e.indexOf("417500")||0===e.indexOf("4405")||0===e.indexOf("4508")||0===e.indexOf("4844")||0===e.indexOf("4913")||0===e.indexOf("4917")},v=a(150),N={binNumber:"",cardsBrand:"",isValidBin:!1,isBinDuplicateInBlockList:!0,isBinDuplicateInAllowList:!0,isBinDuplicateInBlockListMessage:"",isBinDuplicateInAllowListMessage:""},B=function(e,t){return t.some((function(t){return e===t.bin_number}))},L=a(80),y=a(1565),D=a(151),k=a.n(D),_=Object(d.a)("fraudGuard")((function(e){var t,a=e.isAllowList,n=e.listEventHistory,i=e.isLoading,c=e.t,r=n.email,l=n.timestamp,s=""===r&&""===l,d=c(a?"binAllowList":"binBlockList"),u=o.a.createElement(k.a,{placement:"right",size:"lg",content:c("binTooltip")}),m=o.a.createElement("div",{className:"d-flex align-items-center"},o.a.createElement("p",{className:"text-md font-weight-bold mb-0 mr-3"},d),u);if(i)t=c("fetchingEventHistory");else{var b=o.a.createElement(y.a,{i18nKey:"fraudListEventHistory"},"This list was last modified by"," ",o.a.createElement("span",{className:"font-weight-bold"},{email:r})," on"," ",o.a.createElement("span",{className:"font-weight-bold"},{timestamp:l}),".");t=s?c("fraudListEventHistoryEmpty"):b}var f=c(a?"binAllowListDescription":"binBlockListDescription"),p=c(a?"binAllowListExample":"binBlockListExample"),O=o.a.createElement(o.a.Fragment,null,o.a.createElement("p",{className:"color-charcoal"},t),o.a.createElement("p",{className:"mt-2 mb-0"},f),o.a.createElement("p",null,p));return o.a.createElement(L.z,{title:m,children:O})})),A=a(37),C=a(26),M=a(20),S=a.n(M),I=a(475),V=a(290),z=a.n(V),T=Object(d.a)(["fraudGuard","commonWords"])((function(e){var t=e.list,a=e.isLoading,n=e.errorMessage,i=e.openAddModal,c=e.openDeleteModal,r=e.allowedToEdit,l=e.t,s=[{dataField:"binNumberValue",text:l("bin"),headerStyle:{width:"20%"}},{dataField:"countryValue",text:l("country"),headerStyle:{width:"20%"}},{dataField:"bankValue",text:l("bank"),headerStyle:{width:"25%"}},{dataField:"typeValue",text:l("type"),headerStyle:{width:"10%"}},{dataField:"formattedDate",text:l("dateAdded"),headerStyle:{width:"20%"}},{dataField:"deleteButton",text:"",headerStyle:{width:"5%"}}],d=t.map((function(e){var t=e.bin_number,a=e.country,n=e.country_code,i=e.bank,l=e.card_processor,s=e.card_type,d=e.updated,u=Object(I.b)(l),m=Object(I.a)(l),b=u&&o.a.createElement("img",{className:"card-brand-logo mr-3",src:"/images/card-brands-logos/".concat(m,".png"),alt:m}),p=o.a.createElement("div",{className:"d-flex align-items-center color-inherit text-capitalize"},b,t),O=Object(I.b)(n),g=Object(I.b)(a),E=O&&o.a.createElement("img",{className:"card-country-icon mr-3",src:"https://country-flags-images.s3.amazonaws.com/flags/".concat(n.toLowerCase(),".svg"),alt:n}),w=g&&a.toLowerCase(),h=g?o.a.createElement("div",{className:"d-flex align-items-center color-inherit text-capitalize"},E,w):"-",j=Object(I.b)(i)?i:"-",x=Object(I.b)(s),v=x&&s.toLowerCase();return{binNumberValue:p,countryValue:h,bankValue:j,typeValue:x?o.a.createElement("span",{className:"text-capitalize"},v):"-",formattedDate:Object(f.h)(d),deleteButton:r?o.a.createElement(L.h,{withTooltip:!1,icon:o.a.createElement(A.a,{icon:C.K}),onClick:function(){return c(t)},customCss:"btn-no-bg table-icon-button"}):null}})),m=o.a.createElement(S.a,{iconLeft:o.a.createElement(A.a,{icon:C.C}),size:"sm",onClick:i},l("commonWords:add")),b=r&&o.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},o.a.createElement("p",{className:"color-charcoal"},l("addListInstruction")),m);return o.a.createElement(L.z,{isLoading:a,loadingText:l("loadingYourList"),isError:!Object(u.isEmpty)(n),errorText:n,isEmpty:Object(u.isEmpty)(t),emptySubtitle:l("emptyFraudListCaption"),title:b},o.a.createElement(z.a,{noBorder:!0,tableHeaderColumns:s,tableContentRows:d,customCssRow:"fraud-list-table-row"}))})),F=a(49),G=a.n(F),W=a(149),R=a.n(W),K=(a(2063),Object(d.a)(["fraudGuard","commonWords"])((function(e){var t=e.binInput,a=e.toBeAddedBin,n=e.isGettingBinData,i=e.isAllowList,c=e.isModalOpen,r=e.closeAddModal,l=e.handleChange,s=e.addData,d=e.isAddingData,u=e.gettingBinDataErrorMessage,m=e.t,b=t.binNumber,f=t.cardsBrand,p=t.isValidBin,O=t.isBinDuplicateInBlockList,g=t.isBinDuplicateInAllowList,E=t.isBinDuplicateInBlockListMessage,w=t.isBinDuplicateInAllowListMessage,h=a.bin_number,j=a.country,x=a.country_code,v=a.bank,N=a.card_processor,B=a.card_type,y=m(i?"addBinAllow":"addBinBlock"),D=p&&"UNKNOWN"!==f,k=!O&&!g,_=D?"valid":"",M=k?"valid":"",V=D&&n,z=!(D&&k)||n,T=Object(I.b)(f),F=Object(I.a)(f),W=T?o.a.createElement("img",{className:"cards-brand-preview-logo fade-in mr-2",src:"/images/card-brands-logos/".concat(F,".png"),alt:F}):o.a.createElement("div",{className:"cards-brand-preview-placeholder fade-in"},o.a.createElement(A.a,{icon:C.r,size:"lg"})),K=Object(I.b)(x)&&o.a.createElement("img",{className:"card-country-icon mr-2",src:"https://country-flags-images.s3.amazonaws.com/flags/".concat(x.toLowerCase(),".svg"),alt:x}),H=Object(I.b)(j),U=H&&j.toLowerCase(),J=H?o.a.createElement("div",{className:"d-flex align-items-center text-capitalize font-weight-bold"},K,U):"-",P=Object(I.b)(v)?v:"-",X=Object(I.b)(N),Y=Object(I.a)(f),q=X&&o.a.createElement("img",{className:"card-brand-logo mr-2",src:"/images/card-brands-logos/".concat(Y,".png"),alt:Y}),Q=X&&N.toLowerCase(),Z=X?o.a.createElement("div",{className:"d-flex align-items-center text-capitalize font-weight-bold"},q,Q):"-",$=Object(I.b)(B),ee=$&&B.toLowerCase(),te=$?ee:"-",ae=o.a.createElement("div",{className:"confirmation-modal-additional-content mt-3"},o.a.createElement("div",{className:"d-flex justify-content-between align-items-center fade-in bin-row mb-4"},o.a.createElement("span",{className:"color-charcoal w-50"},m("bin")),o.a.createElement("span",{className:"font-weight-bold w-50"},h)),o.a.createElement("div",{className:"d-flex justify-content-between align-items-center fade-in bin-row mb-4"},o.a.createElement("span",{className:"color-charcoal w-50"},m("country")),o.a.createElement("div",{className:"w-50"},J)),o.a.createElement("div",{className:"d-flex justify-content-between align-items-center fade-in bin-row mb-4"},o.a.createElement("span",{className:"color-charcoal w-50"},m("bank")),o.a.createElement("span",{className:"font-weight-bold w-50"},P)),o.a.createElement("div",{className:"d-flex justify-content-between align-items-center fade-in bin-row mb-4"},o.a.createElement("span",{className:"color-charcoal w-50"},m("scheme")),o.a.createElement("div",{className:"w-50"},Z)),o.a.createElement("div",{className:"d-flex justify-content-between align-items-center fade-in bin-row"},o.a.createElement("span",{className:"color-charcoal w-50"},m("type")),o.a.createElement("span",{className:"text-capitalize font-weight-bold w-50"},te))),ne=n?o.a.createElement("div",{className:"d-flex justify-content-center"},o.a.createElement(L.X,null)):ae,ie=o.a.createElement(o.a.Fragment,null,o.a.createElement("p",{className:"d-flex align-items-center input-validity mt-2 mb-2 ".concat(_)},o.a.createElement(A.a,{icon:C.h}),m("validBinFormat")),o.a.createElement("p",{className:"d-flex align-items-center input-validity mb-2 ".concat(M)},o.a.createElement(A.a,{icon:C.h}),m("notDuplicated")),o.a.createElement("p",{className:"color-danger"},E,w)),ce=o.a.createElement("div",{className:"d-flex flex-column position-relative mb-4"},W,o.a.createElement(R.a,{name:"binNumber",placeholder:"e.g. 414776",value:b,useDefaultValue:!0,defaultValue:b,disabled:V}),ie),re=o.a.createElement(L.gb,{onChange:l,onSubmit:function(e){return s(e)}},ce,D&&ne,o.a.createElement("p",{className:"color-danger mt-4"},u)),le=o.a.createElement("div",{className:"text-left mt-3"},re),se=o.a.createElement(S.a,{size:"md",type:"submit",isDisabled:z,isLoading:d,onClick:s},m("commonWords:add"));return o.a.createElement(G.a,{showModal:c,handleClose:r,title:y,children:le,footer:se,size:"sm"})}))),H=Object(d.a)(["fraudGuard","commonWords"])((function(e){var t=e.toBeDeletedBin,a=e.isAllowList,n=e.isModalOpen,i=e.closeDeleteModal,c=e.deleteData,r=e.isDeletingData,l=e.t,s=l(a?"deleteBinAllow":"deleteBinBlock"),d=l(a?"deleteBinAllowInstruction":"deleteBinBlockInstruction"),u=o.a.createElement("div",{className:"confirmation-modal-additional-content text-left mt-3"},o.a.createElement("div",{className:"d-flex text-left mb-4"},o.a.createElement("span",{className:"color-charcoal mr-2"},l("bin"),": "),o.a.createElement("span",{className:"font-weight-bolder"},t)),o.a.createElement("p",{className:"text-left color-charcoal mb-0"},d));return o.a.createElement(L.j,{type:"danger",title:s,showModal:n,handleClose:i,handleConfirm:c,withCancel:!0,isButtonLoading:r,buttonText:l("commonWords:delete"),buttonType:"destructive",buttonCustomCss:"min-width-120",additionalContent:u})}));t.default=Object(d.a)(["fraudGuard","creditCardErrorMessages","errorMessages"])((function(e){var t=e.location,a=e.history,i=e.apiCall,d=e.user,O=e.environment,g=e.t,E=t.pathname.split("/"),w="bin_allow_list"===E[E.length-1],h=d.can_administer,j=d.can_manage_tech_settings,x=h&&j,y=Object(s.useState)(!1),D=Object(l.a)(y,2),k=D[0],A=D[1],C=Object(s.useState)({email:"",timestamp:""}),M=Object(l.a)(C,2),S=M[0],I=M[1],V=Object(s.useState)(!1),z=Object(l.a)(V,2),F=z[0],G=z[1],W=Object(s.useState)({blockList:[],allowList:[]}),R=Object(l.a)(W,2),U=R[0],J=R[1],P=Object(s.useState)(!1),X=Object(l.a)(P,2),Y=X[0],q=X[1],Q=Object(s.useState)(""),Z=Object(l.a)(Q,2),$=Z[0],ee=Z[1],te=Object(s.useState)(!1),ae=Object(l.a)(te,2),ne=ae[0],ie=ae[1],ce=Object(s.useState)(!1),re=Object(l.a)(ce,2),le=re[0],se=re[1],oe=Object(s.useState)(N),de=Object(l.a)(oe,2),ue=de[0],me=de[1],be=Object(s.useState)({}),fe=Object(l.a)(be,2),pe=fe[0],Oe=fe[1],ge=Object(s.useState)(!1),Ee=Object(l.a)(ge,2),we=Ee[0],he=Ee[1],je=Object(s.useState)(""),xe=Object(l.a)(je,2),ve=xe[0],Ne=xe[1],Be=Object(s.useState)(""),Le=Object(l.a)(Be,2),ye=Le[0],De=Le[1],ke=Object(s.useState)(!1),_e=Object(l.a)(ke,2),Ae=_e[0],Ce=_e[1],Me=Object(s.useState)({title:"",description:""}),Se=Object(l.a)(Me,2),Ie=Se[0],Ve=Se[1],ze=Object(s.useState)(!1),Te=Object(l.a)(ze,2),Fe=Te[0],Ge=Te[1];Object(s.useEffect)((function(){A(!0),We(),Ke()}),[]),Object(s.useEffect)((function(){Pe(),Xe(),Oe({})}),[ne,Ae]),Object(s.useEffect)((function(){Ne(""),Ve({title:"",description:""})}),[ne,le]),Object(s.useEffect)((function(){var e=ue.isValidBin,t=ue.cardsBrand;e&&"UNKNOWN"!==t&&Ue()}),[ue.isValidBin]),Object(s.useEffect)((function(){k&&qe()}),[O]);var We=function(){var e=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),e.prev=1,e.next=4,i.axiosGet(b.d.ccSettingsLogger);case 4:if(!(t=e.sent).error_code){e.next=7;break}throw t;case 7:Re(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),ee(Object(m.b)(e.t0.error_code,g));case 13:G(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Re=function(e){var t=e.bin_blocked_list,a=e.bin_allowed_list,n=w?a:t;I({email:Object(u.isEmpty)(n)?"":n.last_update_history_item.email,timestamp:Object(u.isEmpty)(n)?"":Object(f.h)(n.last_update_history_item.timestamp)})},Ke=function(){var e=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.prev=1,e.next=4,i.axiosGet(b.d.customFraudRules);case 4:if(!(t=e.sent).error_code){e.next=7;break}throw t;case 7:He(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),ee(Object(m.b)(e.t0.error_code,g));case 13:q(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),He=function(e){var t=e.blocked_list.bin,a=e.allowed_list.bin;J({blockList:t,allowList:a})},Ue=function(){var e=Object(r.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ue.binNumber,he(!0),e.prev=2,e.next=5,i.axiosGet(b.d.binData(t));case 5:if(!(a=e.sent).error_code){e.next=8;break}throw a;case 8:Oe(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),Ne(Object(m.b)(e.t0.error_code,g));case 14:he(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),Je=function(e){var t,a,i,c,r,l=U.blockList,s=U.allowList,o=(t=e,v.binPattern.test(t)),d=p(e);o&&"UNKNOWN"!==d?(a=B(e,l),i=B(e,s),c=a&&g("binDuplicatedInBlockList"),r=i&&g("binDuplicatedInAllowList"),me((function(e){return Object(n.a)(Object(n.a)({},e),{},{isValidBin:o,isBinDuplicateInBlockList:a,isBinDuplicateInAllowList:i,isBinDuplicateInBlockListMessage:c,isBinDuplicateInAllowListMessage:r})}))):(Pe(),Oe({}))},Pe=function(){me((function(e){return Object(n.a)(Object(n.a)({},e),{},{isValidBin:!1,isBinDuplicateInBlockList:!0,isBinDuplicateInAllowList:!0,isBinDuplicateInBlockListMessage:"",isBinDuplicateInAllowListMessage:""})}))},Xe=function(){me((function(e){return Object(n.a)(Object(n.a)({},e),{},{binNumber:"",cardsBrand:""})}))},Ye=function(){var e=Object(r.a)(c.a.mark((function e(t,a){var n,r,l,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},r={},l="delete"===a?i.axiosDelete(b.d.fraudBin,n,t,r):i.axiosPut(b.d.fraudBin,t,n,r),e.prev=3,e.next=6,l;case 6:if(!(s=e.sent).error_code){e.next=9;break}throw s;case 9:e.next=17;break;case 11:return e.prev=11,e.t0=e.catch(3),Ve({title:Object(m.c)(e.t0.error_code,g),description:Object(m.b)(e.t0.error_code,g)}),Ge(!0),Ce(!1),e.abrupt("return");case 17:We(),Ke(),Ce(!1),ie(!1),se(!1),Ne(""),Ve({title:"",description:""});case 24:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,a){return e.apply(this,arguments)}}(),qe=function(){a.push({pathname:b.e.fraudGuard,state:{selectedTabIndex:1}})},Qe=U.blockList,Ze=U.allowList,$e=w?Ze:Qe,et=o.a.createElement(_,{isAllowList:w,listEventHistory:S,isLoading:F}),tt=o.a.createElement(T,{list:$e,isLoading:Y,errorMessage:$,openAddModal:function(){return ie(!0)},openDeleteModal:function(e){De(e),se(!0)},allowedToEdit:x}),at=o.a.createElement(K,{binInput:ue,toBeAddedBin:pe,isGettingBinData:we,isAllowList:w,isModalOpen:ne,closeAddModal:function(){return ie(!1)},handleChange:function(e){e.preventDefault();var t=e.target.name,a=e.target.value;switch(t){case"binNumber":me((function(e){return Object(n.a)(Object(n.a)({},e),{},{binNumber:a,cardsBrand:p(a)})})),Je(a);break;default:return}},addData:function(e){e.preventDefault(),Ce(!0);var t=Object(n.a)(Object(n.a)({},pe),{},{is_block_list:!w,id:" "});Ye(t,"add")},isAddingData:Ae,gettingBinDataErrorMessage:ve}),nt=o.a.createElement(H,{toBeDeletedBin:ye,isAllowList:w,isModalOpen:le,closeDeleteModal:function(){return se(!1)},deleteData:function(){var e;Ce(!0),$e.forEach((function(t){t.bin_number===ye&&(e=t.id)})),Ye({is_block_list:!w,id:e},"delete")},isDeletingData:Ae}),it=o.a.createElement(L.j,{type:"danger",title:Ie.title,subtitle:Ie.description,showModal:Fe,handleClose:function(){return Ge(!1)}});return o.a.createElement(o.a.Fragment,null,o.a.createElement(L.o,{goBack:qe,title:g("fraudList")}),et,tt,at,nt,it)}))},2063:function(e,t,a){}}]);