(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[86],{1507:function(e,t,a){"use strict";a.r(t);var s=a(9),n=a.n(s),r=a(19),o=a(3),i=a(12),c=a(24),l=a(0),u=a.n(l),m=a(67),d=a(380),b=a(289),p=a.n(b),f=a(480),O=a.n(f),E=a(491),g=a.n(E),h=a(2126),j=a.n(h),v=a(1579),_=a(150),C=v.h().shape({businessName:v.i().trim().required("businessName required"),businessAddress:v.i().trim().required("businessAddress required")}),N=v.h().shape({businessName:v.i().trim().required(),businessAddress:v.i().trim().required(),businessStreetLine1:v.i().trim().required(),businessPostalCode:v.i().trim().max(4).required()}),S=v.h().shape({fullName:v.i().trim().required(),workEmail:v.i().trim().email({minDomainAtoms:2}).required(),phoneNumber:v.i().trim().min(9).matches(_.PHONE_NUMBER_REGEX).required()}),P=a(242),w=a(284),M=a(205),R=a(80),y=a(50),A=a(27),x=a(231),I=a(20),k=a.n(I),T=a(252),D=a.n(T),B=a(149),L=a.n(B),U=(a(1862),a(28)),F=a(98),V=a(1980),W=a(1981),q=function(e){var t,a,s,n,r,o=e.business,i=e.user.can_administer,c=e.businessName,m=e.businessAddress,d=e.businessStreetLine1,b=e.businessStreetLine2,p=e.businessState,f=e.businessCity,O=e.businessPostalCode,E=e.onSaveBusinessInfo,g=e.onChangeBusinessInfo,h=e.onUploadBusinessLogo,j=e.isSavingBusinessInfo,v=e.isUploadingLogo,_=e.businessLogoError,C=e.businessInfoError,N=e.t,S=e.navRef,P=e.validateChangeBusinessInfo,w=e.validateChangePhilippinesBusinessInfo,M=e.imageUrl,y=e.entity,I=e.handlePostalCodeOnChange,T=e.handleStateOnChange,B=e.handleCityOnChange,q=o.address_details;Object(A.isUndefined)(q)||(t=q.street_line_1||"",a=q.street_line_2||"",s=q.state||"",n=q.city||"",r=q.postal_code||"");var H=Object(l.useRef)(null),Y=o.name===c&&o.address===m,G=Y&&t===d&&a===b&&s===p&&n===f&&r===O,K=Object(A.isEmpty)(c)||Object(A.isEmpty)(m),z=K||Object(A.isEmpty)(d)||Object(A.isEmpty)(p)||Object(A.isEmpty)(f)||Object(A.isEmpty)(O),X=y===U.a.XENDIT,Z=o.country_of_operation===F.a.Philippines,J=Y||K,Q=G||z||O.length>4,$=Z?Q:J,ee=[{title:"streetLine1",value:d},{title:"streetLine2",value:b},{title:"state",value:p},{title:"city",value:f},{title:"postalCode",value:O}],te=function(){return ee.map((function(e){return t=e.title,a=e.value,u.a.createElement(u.a.Fragment,null,u.a.createElement("p",{className:"mb-0 mt-1 font-weight-bold"},N("settingsBusinessProfile:".concat(t))),u.a.createElement("p",{className:"mb-0"},a||"-"));var t,a}))},ae=function(){return u.a.createElement("div",{className:!Z&&"info-non-admin-non-ph"},u.a.createElement("p",{className:"mb-0 font-weight-bold"},N("settingsBusinessProfile:businessName")),u.a.createElement("p",{className:"mb-0"},c),u.a.createElement("p",{className:"mb-0 mt-1 font-weight-bold"},N("settingsBusinessProfile:businessAddress")),u.a.createElement("p",{className:"mb-0"},m||"-"),X&&u.a.createElement(u.a.Fragment,null,u.a.createElement("p",{className:"mb-0 mt-1 font-weight-bold"},N("settingsBusinessProfile:countryOfOperation")),u.a.createElement("p",{className:"mb-0"},o.country_of_operation)),Z&&te())},se=u.a.createElement(u.a.Fragment,null,u.a.createElement("label",{className:"label-input"},N("settingsBusinessProfile:countryOfOperation")),u.a.createElement("p",{className:Z&&"mb-1"},o.country_of_operation));return u.a.createElement("section",{id:"business",className:"settings-page-card-first",ref:S},u.a.createElement(R.z,{customCss:"p-3 mt-0",preserveMobile:!0},u.a.createElement("p",{className:"business-profile-header"},N("settingsBusinessProfile:yourBusiness")),u.a.createElement("p",{className:"business-profile-title"},N("settingsBusinessProfile:businessInformation")),i&&u.a.createElement("p",{className:"business-profile-desc"},N("settingsBusinessProfile:businessInformationDescription")),u.a.createElement("div",{className:"business-profile-business-upload-container align-items-center ".concat(i?"":"view-mode")},u.a.createElement(x.a,{src:M,roundedCircle:!0,alt:"business-logo",className:"business-profile-business-logo"}),i?u.a.createElement("div",{className:"display-logo-uploader"},_&&u.a.createElement(R.u,{className:"mt-3",message:_}),u.a.createElement(k.a,{onClick:function(){return H.current.click()},isLoading:v,variant:"secondary",customCss:"w-100"},N("settingsBusinessProfile:uploadBusinessLogo")),u.a.createElement("input",{type:"file",accept:"image/*",ref:H,className:"d-none",onChange:h}),u.a.createElement("p",{className:"text-sm color-ash-dark m-0 mt-2"},N("settingsBusinessProfile:uploadBusinessLogoDescription"))):!Z&&ae()),!i&&Z&&ae(),i&&u.a.createElement(R.gb,{method:"post",onSubmit:E,onChange:g},u.a.createElement("div",{className:"mb-15"},u.a.createElement(L.a,{label:N("settingsBusinessProfile:businessName"),useDefaultValue:!0,defaultValue:c,value:c,name:"businessName",errorMessage:C.name,customCss:"max-width-480",onBlur:Z?w:P}),u.a.createElement(L.a,{label:N("settingsBusinessProfile:businessAddress"),useDefaultValue:!0,defaultValue:m,value:m,name:"businessAddress",errorMessage:C.address,customCss:"max-width-480",onBlur:Z?w:P}),X&&se,Z&&u.a.createElement(u.a.Fragment,null,u.a.createElement(L.a,{label:N("settingsBusinessProfile:streetLine1"),useDefaultValue:!0,defaultValue:d,value:d,name:"businessStreetLine1",errorMessage:C.streetLine1,customCss:"max-width-480",onBlur:w}),u.a.createElement(L.a,{label:N("settingsBusinessProfile:streetLine2"),useDefaultValue:!0,defaultValue:b,value:b,name:"businessStreetLine2",errorMessage:C.streetLine2,customCss:"max-width-480",onBlur:w}),u.a.createElement(D.a,{label:N("settingsBusinessProfile:state"),value:p&&{label:p,value:p},name:"businessState",options:V.a,isError:!!C.state,errorMessage:C.state,customCss:"max-width-480",onBlur:w,onChange:T}),u.a.createElement(D.a,{label:N("settingsBusinessProfile:city"),value:f&&{label:f,value:f},name:"businessCity",options:W.a,isError:!!C.city,errorMessage:C.city,customCss:"max-width-480",onBlur:w,onChange:B}),u.a.createElement(L.a,{label:N("settingsBusinessProfile:postalCode"),useDefaultValue:!0,defaultValue:O,value:O,name:"businessPostalCode",errorMessage:C.postalCode,customCss:"max-width-480",onBlur:w,onChange:function(e){return I(e.target.value)}}))),u.a.createElement(k.a,{type:"submit",isDisabled:$,isLoading:j},N("commonWords:save")))))};q.defaultProps={business:{},user:{},businessName:"",businessAddress:"",businessStreetLine1:"",businessStreetLine2:"",businessState:"",businessCity:"",businessPostalCode:"",onSaveBusinessInfo:function(){},onChangeBusinessInfo:function(){},onUploadBusinessLogo:function(){},isSavingBusinessInfo:!1,isUploadingLogo:!1,businessLogoError:"",businessInfoError:{},t:function(){}};var H=Object(d.a)(["settingsMain","settingsBusinessProfile","commonWords"])(q),Y=a(1620),G=a.n(Y),K=a(474),z=a.n(K),X=Object(d.a)("settingsBusinessProfile")((function(e){var t=e.t,a=e.isPINSet,s=e.canApprove,n=e.handlePINOpen,r=e.isSubmittingPin,o=e.isMfaEnabled,i=e.handleMfaModalOpen,c=e.setIsDisableMfaModalOpen,l=u.a.createElement("div",{className:"additional-security-item",id:"pin-section"},u.a.createElement("div",{className:"pin-info-text"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("p",{className:"m-0"},"PIN"),u.a.createElement(R.d,{customCss:"ml-3",active:a})),u.a.createElement("p",{className:"text-sm color-ash-dark mt-2 mb-0"},t("pinInfo"))),u.a.createElement(k.a,{customCss:"w-auto",variant:a?"secondary":"primary",block:!0,type:"submit",onClick:n,isLoading:r},t(a?"changePin":"setPin"))),m=u.a.createElement("div",{className:"additional-security-item"},u.a.createElement("div",{className:"flex-column pin-info-text align-items-center"},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("p",{className:"m-0"},t("2FA")),u.a.createElement(R.d,{customCss:"ml-3",active:o})),u.a.createElement("p",{className:"text-sm color-ash-dark mt-2 mb-0"},t("mfaInfo"))),u.a.createElement(k.a,{customCss:"w-auto",variant:o?"secondary":"primary",block:!0,onClick:function(){o?c(!0):i()}},t(o?"disable2FA":"setup2FA")));return u.a.createElement("div",{className:"d-flex flex-column"},u.a.createElement("p",{className:"business-profile-title"},t("additionalSecurity")),s&&l,m)})),Z=a(1625),J=function(e){var t=e.t,a=e.handleChangeProfile,s=e.validateChangeProfile,n=e.handleSubmitProfile,r=e.fullName,o=e.workEmail,i=e.phoneNumber,c=e.fullNameError,l=e.workEmailError,m=e.phoneNumberError,d=e.profileError,b=e.isLoadingProfile,p=e.isPINSet,f=e.canApprove,O=e.handlePINOpen,E=e.isSubmittingPin,g=e.currentPassword,h=e.newPassword,j=e.currentPasswordError,v=e.newPasswordError,_=e.isLoadingChangePassword,C=e.handleSubmitChangePassword,N=e.handleChangePassword,S=e.isMfaEnabled,P=e.handleMfaModalOpen,w=e.navRef,M=e.setIsDisableMfaModalOpen,y=e.user,x=e.business,I=e.handleChangePhone,T=e.isLoadingPhone,D=e.handleSubmitPhone,B=x.country_of_operation,U=F.b[B],V=Object(A.isEmpty)(r)||Object(A.isEmpty)(o),W=y.full_name,q=y.email,H=r===W&&o===q,Y=i===y.phone_number||i.length<10||m,K=Object(A.isEmpty)(g)||Object(A.isEmpty)(h),J=u.a.createElement(R.gb,{onSubmit:n,onChange:a,formGroupCss:"mb-0"},u.a.createElement(L.a,{customCss:"max-width-480",label:t("fullName"),useDefaultValue:!0,defaultValue:r,value:r,errorMessage:c,name:"fullName",onBlur:s}),u.a.createElement(L.a,{customCss:"max-width-480",label:t("workEmail"),useDefaultValue:!0,defaultValue:o,value:o,errorMessage:l,name:"workEmail",onBlur:s}),u.a.createElement(k.a,{customCss:"w-auto mt-4",block:!0,isLoading:b,type:"submit",onClick:n,isDisabled:V||H},t("commonWords:save"))),Q=u.a.createElement(u.a.Fragment,null,u.a.createElement("p",{className:"business-profile-title"},t("mobileSettings")),u.a.createElement("p",null,t("registerYourPhone")),u.a.createElement(z.a,{defaultCountry:U,onChange:I,value:i,errorMessage:m,block:!0,customCss:"max-width-480"}),u.a.createElement(k.a,{customCss:"w-auto mt-4",block:!0,isLoading:T,type:"submit",onClick:D,isDisabled:Y},t("commonWords:save"))),$=u.a.createElement(u.a.Fragment,null,u.a.createElement("p",{className:"business-profile-title"},t("personalInformation")),u.a.createElement("p",null,t("thisInformationHelps")),d&&u.a.createElement(R.u,{message:d}),J),ee=u.a.createElement(u.a.Fragment,null,u.a.createElement("p",{className:"business-profile-title"},t("changePassword")),u.a.createElement(R.gb,{onSubmit:C,onChange:N,formGroupCss:"mb-0"},u.a.createElement(L.a,{customCss:"max-width-480",label:t("currentPassword"),placeholder:t("enterCurrentPassword"),type:"password",name:"currentPassword",value:g,errorMessage:j}),u.a.createElement(G.a,{customCss:"max-width-480",label:t("newPassword"),placeholder:t("enterNewPassword"),password:h,name:"newPassword",value:h,errorMessage:v,validationText:Object(Z.a)(t)}),u.a.createElement(k.a,{customCss:"w-auto mt-4",block:!0,isLoading:_,type:"submit",onClick:C,isDisabled:K},t("commonWords:save")))),te=u.a.createElement(u.a.Fragment,null,u.a.createElement(X,{isPINSet:p,canApprove:f,handlePINOpen:O,isSubmittingPin:E,isMfaEnabled:S,handleMfaModalOpen:P,setIsDisableMfaModalOpen:M}));return u.a.createElement("section",{id:"profile",className:"settings-page-card",ref:w},u.a.createElement(R.z,{customCss:"p-3 mt-0",preserveMobile:!0},u.a.createElement("p",{className:"business-profile-header"},t("yourProfile")),$,u.a.createElement("div",{className:"divider-settings my-4"}),Q,u.a.createElement("div",{className:"divider-settings my-4"}),ee,u.a.createElement("div",{className:"divider-settings my-4"}),te))};J.defaultProps={user:{full_name:"",email:"",phone_number:"",preferred_language:""},business:{country_of_operation:""}};var Q=Object(d.a)(["settingsBusinessProfile","commonWords","commonComponents"])(J),$=a(1565),ee=a(49),te=a.n(ee),ae=a(472),se=a.n(ae),ne=Object(d.a)(["settingsBusinessProfile","commonWords"])((function(e){var t=e.t,a=e.isModalOpen,s=e.handleCloseModal,n=e.mfaImageData,r=e.handleChangeMfaCode,o=e.mfaCode,i=e.handleSubmitMfa,c=e.isMfaButtonLoading,l=e.isMobileView,m=e.inputErrorMessage,d=Object(A.isEmpty)(o),b=u.a.createElement(u.a.Fragment,null,l&&u.a.createElement("div",{className:"common-divider mfa-modal-divider mx-n4"}),u.a.createElement("div",{className:"mfa-option-modal-footer"},u.a.createElement(k.a,{variant:"secondary",customCss:l?"":"mr-3",onClick:s},t("commonWords:cancel")),u.a.createElement(k.a,{type:"submit",isLoading:c,onClick:i,isDisabled:d},t("commonWords:enable"))));return u.a.createElement(te.a,{showModal:a,handleClose:s,preserveMobileView:!0,title:t("enableAuthenticator2FA"),footer:b},u.a.createElement(R.gb,{onChange:r,onSubmit:i,formGroupCss:"mb-0"},u.a.createElement("div",{className:"pb-2 text-left"},u.a.createElement("p",{className:"business-profile-desc"},t("follow2StepVerifInstruction"))),u.a.createElement("div",{className:"instruction-steps text-left"},u.a.createElement("ol",{className:"px-3 font-weight-bold"},u.a.createElement("li",null,u.a.createElement("div",{className:"ml-3"},u.a.createElement("span",{className:"business-profile-title"},t("downloadApp")),u.a.createElement("p",{className:"business-profile-desc mb-3"},u.a.createElement($.a,{i18nKey:"settingsBusinessProfile:installApp"},"Install ",u.a.createElement("strong",null,"Google Authenticator"),","," ",u.a.createElement("strong",null,"Authy"),", or"," ",u.a.createElement("strong",null,"Microsoft Authenticator"),".")))),u.a.createElement("li",null,u.a.createElement("div",{className:"ml-3"},u.a.createElement("span",{className:"business-profile-title"},t("scanQRCode")),u.a.createElement("p",{className:"business-profile-desc mb-3"},t("openApp")),u.a.createElement("div",{className:"qr-image-container"},n.imageData?u.a.createElement("img",{src:n.imageData,alt:"mfa-qr"}):u.a.createElement("div",{className:"mfa-loading-container"},u.a.createElement(R.X,null))),u.a.createElement("p",{className:"my-2 m-0 business-profile-desc"},t("cantUseBarcode")),u.a.createElement("div",{className:"input-2fa"},n.base32&&u.a.createElement(se.a,{disabled:!0,useDefaultValue:!0,defaultValue:n.base32,value:n.base32,type:"text",copyText:t("commonWords:copy"),copiedText:t("commonWords:copied")})))),u.a.createElement("li",null,u.a.createElement("div",{className:"ml-3"},u.a.createElement("span",{className:"business-profile-title"},t("enterCode")),u.a.createElement("p",{className:"business-profile-desc"},t("onceYouHaveScan")),u.a.createElement("div",{className:"input-2fa"},u.a.createElement(L.a,{customCss:"text-center",type:"text",maxLength:6,placeholder:t("enterSixDigitCode"),onChange:r,value:o,errorMessage:m}))))))))})),re=function(e){var t=e.isDisableMfaModalOpen,a=e.isDisableMfaConfirmationOpen,s=e.isDisableMfaError,n=e.handleCloseDisableMFAModal,r=e.handleCloseConfirmationModal,o=e.onDisableMFA,i=e.isDisablingMFA,c=e.t,l=e.entity;return u.a.createElement(u.a.Fragment,null,u.a.createElement(R.j,{type:"info",title:c("commonWords:wait"),subtitle:c("disableMFASubtitle"),buttonText:c("disable"),isButtonLoading:i,showModal:t,handleClose:o,handleCancel:n,withCancel:!0,entity:l}),u.a.createElement(R.j,{type:s?"danger":"success",title:c(s?"errorMessages:error":"disableMFASuccessTitle"),subtitle:c(s?"errorMessages:unexpectedError":"disableMFASuccessSubtitle"),showModal:a,handleClose:r,entity:l}))};re.defaultProps={isDisableMfaModalOpen:!1,isDisableMfaConfirmationOpen:!1,isDisableMfaError:!1,isDisablingMFA:!1,t:function(){}};var oe=Object(d.a)(["settingsBusinessProfile","errorMessages"])(re),ie=a(1949),ce=a(478),le=a.n(ce),ue=function(e){var t=e.t,a=e.showModal,s=e.handleClose,n=e.onClickNext,r=e.isMobileView,o=Object(l.useState)("app"),c=Object(i.a)(o,2),m=c[0],d=c[1],b=[{name:t("authenticatorApp"),desc:t("authenticatorDesc"),icon:"/images/icons/phone_iphone.svg",value:"app"},{name:t("smsOTP"),desc:t("smsOTPDesc"),icon:"/images/icons/speaker_notes.svg",value:"sms"}],p=u.a.createElement("div",{className:"mfa-option-modal-footer"},u.a.createElement(k.a,{onClick:s,variant:"secondary",customCss:r?"":"mr-3"},t("commonWords:cancel")),u.a.createElement(k.a,{onClick:function(){n(m),d("app")}},t("commonWords:next")));return u.a.createElement(te.a,{showModal:a,handleClose:s,title:t("setup2FactorAuth"),footer:p,preserveMobileView:!0,customCssBody:"text-left",customCss:"mfa-option"},u.a.createElement("div",{className:"mfa-method-container text-left"},u.a.createElement("p",{className:"m-0 font-weight-bold"},t("chooseSecurityMethod")),u.a.createElement("p",{className:"m-0 text-sm"},t("chooseSecurityDesc")),u.a.createElement("div",{className:"text-left"},b.map((function(e,t){return function(e,t){var a=e.value===m;return u.a.createElement("div",{key:t,className:"mfa-option-container ".concat(a?"is-active":""),onClick:function(){d(e.value)}},u.a.createElement("div",{className:"d-flex align-items-center"},u.a.createElement("div",{className:"option-radio-container"},u.a.createElement(le.a,{options:[e],value:m,onChange:function(e){d(e.target.value)},name:"".concat(e.value,"-type")})),u.a.createElement("div",{className:"option-description-container mx-3"},u.a.createElement("p",{className:"m-0 font-weight-bold"},e.name),u.a.createElement("p",{className:"m-0 text-sm"},e.desc))),u.a.createElement("div",{className:"option-icon-container flex-end"},u.a.createElement("img",{src:e.icon,alt:"".concat(e.value,"_icon")})))}(e,t)})))))};ue.defaultProps={t:function(){},handleClose:function(){},onClickNext:function(){}};var me=Object(d.a)(["settingsBusinessProfile","errorMessages"])(ue),de=a(1950),be=a(703),pe=function(e){var t=e.backupCodes,a=e.showModal,s=e.handleClose,n=e.handleSubmit,r=e.onCopyClick,o=e.errorMessage,c=e.t,l=e.isCopied,m=e.isLoading,d=e.isMobileView,b=Object(A.chunk)(t,6),p=Object(i.a)(b,2),f=p[0],O=p[1],E=t.map((function(e){return{backup_code:e}})),g=t.join("\n"),h=u.a.createElement(de.CSVLink,{filename:"backup_code.csv",data:E},u.a.createElement(k.a,{variant:"secondary",customCss:"mr-2",block:d},c("commonWords:download"))),j=u.a.createElement(be.CopyToClipboard,{text:g},u.a.createElement(k.a,{variant:"secondary",onClick:r},c(l?"commonWords:copied":"commonWords:copy"))),v=u.a.createElement(be.CopyToClipboard,{text:g},u.a.createElement(x.a,{src:"/images/icons/icon-copy.svg",onClickCapture:r})),_=u.a.createElement($.a,{i18nKey:"backupCodeInfoPanel"},u.a.createElement("strong",null,"Important!")," Print or copy your backup codes and keep them somewhere safe but accessible. Treat them the same way as you your"," ","password."),C=u.a.createElement("div",{className:"mfa-option-modal-footer"},u.a.createElement(k.a,{variant:"secondary",customCss:"mr-2",onClick:s},c("commonWords:cancel")),u.a.createElement(k.a,{variant:"primary",onClick:n},c("commonWords:done"))),N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return u.a.createElement("div",{className:t},e.map((function(e,t){return u.a.createElement("p",{className:"mb-1 text-left",key:t},e)})))};return u.a.createElement(te.a,{title:c("backupCodeTitle"),showModal:a,handleClose:s,footer:C,preserveMobileView:!0},u.a.createElement("p",{className:"text-left"},c("backupCodeDescription")),u.a.createElement(R.E,{infoPanel:!0,text:_}),o?u.a.createElement("div",{className:"my-3"},u.a.createElement(R.u,{message:o})):u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"mfa-backup-code-modal-content my-3"},m?u.a.createElement(u.a.Fragment,null,u.a.createElement(R.X,null),u.a.createElement("span",{className:"ml-2"},c("loadingBackupCodes"))):!Object(A.isEmpty)(t)&&u.a.createElement("div",{className:"d-flex justify-content-between ".concat(d?"align-items-start":"align-items-center")},N(f),N(O),u.a.createElement("div",{className:"d-flex ".concat(d?"mt-1":"")},!d&&h,d?v:j))),!m&&d&&h))};pe.defaultProps={backupCodes:[]};var fe=Object(d.a)(["settingsBusinessProfile","commonWords"])(pe),Oe=a(2147),Ee=a(75),ge=["image/jpeg","image/png"];t.default=Object(m.o)(Object(d.a)(["settingsBusinessProfile","settingsMain","errorMessages","commonWords"])((function(e){var t=e.notify,a=e.apiCall,s=a.axiosGet,m=a.axiosPost,d=a.axiosPatch,b=a.axiosPut,f=a.axiosPostLogout,E=e.user,h=e.business,v=e.getUser,A=e.history,x=e.t,I=e.isMobileView,k=e.entity,T=E.full_name,D=E.email,B=E.phone_number,L=E.preferred_language,U=E.mfa_type,V=E.is_pin_set,W=E.can_approve,q=E.can_administer,Y=E.can_view,G=h.country_of_operation,K=G===F.a.Philippines,z=Object(l.useRef)(),X=Object(l.useRef)(),Z=function(e){var t=[{name:e("yourProfile"),section:"profile",ref:X}];return(Y||q)&&(t=[{name:e("yourBusiness"),section:"business",ref:z}].concat(Object(c.a)(t))),t},J=Object(l.useState)({password:!1,pin:!1,profile:!1}),$=Object(i.a)(J,2),ee=$[0],te=$[1],ae=Object(l.useState)(!1),se=Object(i.a)(ae,2),re=se[0],ce=se[1],le=Object(l.useState)({title:"",subtitle:"",type:"",showModal:!1}),ue=Object(i.a)(le,2),de=ue[0],be=ue[1],pe=Object(l.useState)(""),he=Object(i.a)(pe,2),je=he[0],ve=he[1],_e=Object(l.useState)(""),Ce=Object(i.a)(_e,2),Ne=Ce[0],Se=Ce[1],Pe=Object(l.useState)(""),we=Object(i.a)(Pe,2),Me=we[0],Re=we[1],ye=Object(l.useState)(""),Ae=Object(i.a)(ye,2),xe=Ae[0],Ie=Ae[1],ke=Object(l.useState)(""),Te=Object(i.a)(ke,2),De=Te[0],Be=Te[1],Le=Object(l.useState)(""),Ue=Object(i.a)(Le,2),Fe=Ue[0],Ve=Ue[1],We=Object(l.useState)(""),qe=Object(i.a)(We,2),He=qe[0],Ye=qe[1],Ge=Object(l.useState)(!1),Ke=Object(i.a)(Ge,2),ze=Ke[0],Xe=Ke[1],Ze=Object(l.useState)(!1),Je=Object(i.a)(Ze,2),Qe=Je[0],$e=Je[1],et=Object(l.useState)({name:"",address:"",streetLine1:"",streetLine2:"",state:"",city:"",postalCode:""}),tt=Object(i.a)(et,2),at=tt[0],st=tt[1],nt=Object(l.useState)(""),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(l.useState)(h.logo?"".concat(Ee.domain).concat(h.logo):"/images/profile_default.png"),lt=Object(i.a)(ct,2),ut=lt[0],mt=lt[1],dt=Object(l.useState)(""),bt=Object(i.a)(dt,2),pt=bt[0],ft=bt[1],Ot=Object(l.useState)(""),Et=Object(i.a)(Ot,2),gt=Et[0],ht=Et[1],jt=Object(l.useState)(!1),vt=Object(i.a)(jt,2),_t=vt[0],Ct=vt[1],Nt=Object(l.useState)(""),St=Object(i.a)(Nt,2),Pt=St[0],wt=St[1],Mt=Object(l.useState)(""),Rt=Object(i.a)(Mt,2),yt=Rt[0],At=Rt[1],xt=Object(l.useState)(""),It=Object(i.a)(xt,2),kt=It[0],Tt=It[1],Dt=Object(l.useState)(""),Bt=Object(i.a)(Dt,2),Lt=Bt[0],Ut=Bt[1],Ft=Object(l.useState)(""),Vt=Object(i.a)(Ft,2),Wt=Vt[0],qt=Vt[1],Ht=Object(l.useState)(!1),Yt=Object(i.a)(Ht,2),Gt=Yt[0],Kt=Yt[1],zt=Object(l.useState)(!1),Xt=Object(i.a)(zt,2),Zt=Xt[0],Jt=Xt[1],Qt=Object(l.useState)(""),$t=Object(i.a)(Qt,2),ea=$t[0],ta=$t[1],aa=Object(l.useState)(!1),sa=Object(i.a)(aa,2),na=sa[0],ra=sa[1],oa=Object(l.useState)(!1),ia=Object(i.a)(oa,2),ca=ia[0],la=ia[1],ua=Object(l.useState)(""),ma=Object(i.a)(ua,2),da=ma[0],ba=ma[1],pa=Object(l.useState)(""),fa=Object(i.a)(pa,2),Oa=fa[0],Ea=fa[1],ga=Object(l.useState)(""),ha=Object(i.a)(ga,2),ja=ha[0],va=ha[1],_a=Object(l.useState)(""),Ca=Object(i.a)(_a,2),Na=Ca[0],Sa=Ca[1],Pa=Object(l.useState)(""),wa=Object(i.a)(Pa,2),Ma=wa[0],Ra=wa[1],ya=Object(l.useState)(!1),Aa=Object(i.a)(ya,2),xa=Aa[0],Ia=Aa[1],ka=Object(l.useState)(!1),Ta=Object(i.a)(ka,2),Da=Ta[0],Ba=Ta[1],La=Object(l.useState)(!1),Ua=Object(i.a)(La,2),Fa=Ua[0],Va=Ua[1],Wa=Object(l.useState)(""),qa=Object(i.a)(Wa,2),Ha=qa[0],Ya=qa[1],Ga=Object(l.useState)(V),Ka=Object(i.a)(Ga,2),za=Ka[0],Xa=Ka[1],Za=Object(l.useState)(!1),Ja=Object(i.a)(Za,2),Qa=Ja[0],$a=Ja[1],es=Object(l.useState)(""),ts=Object(i.a)(es,2),as=ts[0],ss=ts[1],ns=Object(l.useState)(!1),rs=Object(i.a)(ns,2),os=rs[0],is=rs[1],cs=Object(l.useState)(""),ls=Object(i.a)(cs,2),us=ls[0],ms=ls[1],ds=Object(l.useState)(""),bs=Object(i.a)(ds,2),ps=bs[0],fs=bs[1],Os=Object(l.useState)(""),Es=Object(i.a)(Os,2),gs=Es[0],hs=Es[1],js=Object(l.useState)(!1),vs=Object(i.a)(js,2),_s=vs[0],Cs=vs[1],Ns=Object(l.useState)(""),Ss=Object(i.a)(Ns,2),Ps=Ss[0],ws=Ss[1],Ms=Object(l.useState)({}),Rs=Object(i.a)(Ms,2),ys=Rs[0],As=Rs[1],xs=Object(l.useState)(""),Is=Object(i.a)(xs,2),ks=Is[0],Ts=Is[1],Ds=Object(l.useState)(!1),Bs=Object(i.a)(Ds,2),Ls=Bs[0],Us=Bs[1],Fs=Object(l.useState)(!1),Vs=Object(i.a)(Fs,2),Ws=Vs[0],qs=Vs[1],Hs=Object(l.useState)(!1),Ys=Object(i.a)(Hs,2),Gs=Ys[0],Ks=Ys[1],zs=Object(l.useState)(!1),Xs=Object(i.a)(zs,2),Zs=Xs[0],Js=Xs[1],Qs=Object(l.useState)(!1),$s=Object(i.a)(Qs,2),en=$s[0],tn=$s[1],an=Object(l.useState)(!1),sn=Object(i.a)(an,2),nn=sn[0],rn=sn[1],on=Object(l.useState)(""),cn=Object(i.a)(on,2),ln=cn[0],un=cn[1],mn=Object(l.useState)(""),dn=Object(i.a)(mn,2),bn=dn[0],pn=dn[1],fn=Object(l.useState)(!1),On=Object(i.a)(fn,2),En=On[0],gn=On[1],hn=Object(l.useState)(""),jn=Object(i.a)(hn,2),vn=jn[0],_n=jn[1],Cn=Object(l.useState)(""),Nn=Object(i.a)(Cn,2),Sn=Nn[0],Pn=Nn[1],wn=Object(l.useState)(""),Mn=Object(i.a)(wn,2),Rn=Mn[0],yn=Mn[1],An=Object(l.useState)(0),xn=Object(i.a)(An,2),In=xn[0],kn=xn[1],Tn=Object(l.useState)(!1),Dn=Object(i.a)(Tn,2),Bn=Dn[0],Ln=Dn[1],Un=Object(l.useState)(!1),Fn=Object(i.a)(Un,2),Vn=Fn[0],Wn=Fn[1],qn=Object(l.useState)(!1),Hn=Object(i.a)(qn,2),Yn=Hn[0],Gn=Hn[1],Kn=Object(l.useState)(!1),zn=Object(i.a)(Kn,2),Xn=zn[0],Zn=zn[1],Jn=Object(l.useState)(!1),Qn=Object(i.a)(Jn,2),$n=Qn[0],er=Qn[1],tr=Object(l.useState)(!1),ar=Object(i.a)(tr,2),sr=ar[0],nr=ar[1],rr=Object(l.useState)(""),or=Object(i.a)(rr,2),ir=or[0],cr=or[1],lr=Object(l.useState)([]),ur=Object(i.a)(lr,2),mr=ur[0],dr=ur[1],br=Object(l.useState)(!1),pr=Object(i.a)(br,2),fr=pr[0],Or=pr[1],Er=Object(l.useState)(!1),gr=Object(i.a)(Er,2),hr=gr[0],jr=gr[1],vr=Object(l.useState)(""),_r=Object(i.a)(vr,2),Cr=_r[0],Nr=_r[1],Sr=Object(l.useState)(""),Pr=Object(i.a)(Sr,2),wr=Pr[0],Mr=Pr[1],Rr=Object(l.useState)(""),yr=Object(i.a)(Rr,2),Ar=yr[0],xr=yr[1],Ir=Object(l.useState)(0),kr=Object(i.a)(Ir,2),Tr=kr[0],Dr=kr[1],Br=Object(l.useState)(!1),Lr=Object(i.a)(Br,2),Ur=Lr[0],Fr=Lr[1],Vr=Object(l.useState)(!1),Wr=Object(i.a)(Vr,2),qr=Wr[0],Hr=Wr[1],Yr=Object(l.useState)(""),Gr=Object(i.a)(Yr,2),Kr=Gr[0],zr=Gr[1],Xr=Object(l.useState)(""),Zr=Object(i.a)(Xr,2),Jr=Zr[0],Qr=Zr[1];Object(l.useEffect)((function(){_n("")}),[Rn]),Object(l.useEffect)((function(){Nr("")}),[Ar]),Object(l.useEffect)((function(){!function(){ft(T),ht(D),Ut(B),un(B),ve(h.name),Se(h.address);var e=h.address_details;e&&(Re(e.street_line_1),Ie(e.street_line_2),Be(e.state),Ve(e.city),Ye(e.postal_code)),Xa(V)}()}),[T,D,B,L,h.name,h.email]),Object(l.useEffect)((function(){if(A.location.state&&A.location.state.shouldOpenPinModal){var e=document.getElementById("pin-section");window.scrollTo(0,e.offsetTop),co()}}),[]);var $r=function(e,t,a){be({title:e,subtitle:t,type:a,showModal:!0})},eo=function(){var e=Object(r.a)(n.a.mark((function e(a){var s,r,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),Xe(!0),st({name:"",address:"",streetLine1:"",streetLine2:"",state:"",city:"",postalCode:""}),s={name:je,address:Ne},K&&(r={street_line_1:Me,state:De,city:Fe,postal_code:He},xe&&(r=Object(o.a)(Object(o.a)({},r),{},{street_line_2:xe})),s=Object(o.a)(Object(o.a)({},s),{},{address_details:r})),e.next=7,d(Oe.ENDPOINTS.BUSINESS,s);case 7:if(!(i=e.sent).error_code){e.next=12;break}return i.error_code===Oe.ERROR_CODE.API_VALIDATION_ERROR?i.errors.forEach((function(e){switch(e.field){case"name":st((function(e){return Object(o.a)(Object(o.a)({},e),{},{name:x("required")})}));break;case"address":st((function(e){return Object(o.a)(Object(o.a)({},e),{},{address:x("required")})}));break;case"street_line_1":st((function(e){return Object(o.a)(Object(o.a)({},e),{},{streetLine1:x("required")})}));break;case"state":st((function(e){return Object(o.a)(Object(o.a)({},e),{},{state:x("required")})}));break;case"city":st((function(e){return Object(o.a)(Object(o.a)({},e),{},{city:x("required")})}));break;case"postal_code":st((function(e){return Object(o.a)(Object(o.a)({},e),{},{postalCode:x("required")})}))}})):t({type:"error",message:x("settingsBusinessProfile:updateBusinessFailed")}),Xe(!1),e.abrupt("return");case 12:return e.next=14,v();case 14:Xe(!1),t({type:"success",message:x("settingsBusinessProfile:updateBusinessSuccess")});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),to=function(){var e=Object(r.a)(n.a.mark((function e(a){var s,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $e(!0),it(""),(s=new FormData).append("file_content",a),e.next=6,m(Oe.ENDPOINTS.COMPANY_IMAGES,s);case 6:if(r=e.sent,$e(!1),!r.error_code){e.next=11;break}return ao(r.error_code),e.abrupt("return");case 11:return e.next=13,v();case 13:mt(URL.createObjectURL(a)),$e(!1),t({type:"success",message:x("settingsBusinessProfile:uploadBusinessLogoSuccess")});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ao=function(e){it(Object(y.f)(e,x))},so=function(){var e=Object(r.a)(n.a.mark((function e(){var a,s,r,i,c,l,u=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>0&&void 0!==u[0]&&u[0],te((function(e){return Object(o.a)(Object(o.a)({},e),{},{profile:!1})})),wt(""),At(""),qt(""),Tt(""),s={full_name:pt,email:gt},a&&(Nr(""),jr(!0),s.otp_token=Ar),e.next=10,d(Oe.ENDPOINTS.USER_PROFILE,s);case 10:if(!(r=e.sent).error_code){e.next=16;break}return i=r.error_code,c=r.errors,i.includes("OTP")||"TOO_MANY_REQUESTS"===i?(l=Object(y.f)(r.error_code,x,{type:"code",action:x("verifyYourEmail")}),Nr(l)):i===Oe.ERROR_CODE.API_VALIDATION_ERROR?(no(c),Ct(!1)):i===Oe.ERROR_CODE.DUPLICATE_USER_ERROR?(Ct(!1),Or(!1),t({type:"error",message:x("settingsBusinessProfile:".concat(i))})):(Ct(!1),t({type:"error",message:x("settingsBusinessProfile:updateProfileError")})),jr(!1),e.abrupt("return");case 16:return jr(!1),Or(!1),e.next=20,v();case 20:Ct(!1),t({type:"success",message:x("settingsBusinessProfile:updateProfileSuccess")});case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),no=function(e){e.forEach((function(e){switch(e.field){case"full_name":wt(x("required"));break;case"email":At(x("requiredFormat",{value:x("workEmail")}));break;case"phone_number":qt(x("requiredFormat",{value:x("phoneNumber")}))}}))},ro=function(){var e=Object(r.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ba(""),la(!0),e.next=4,m(Oe.ENDPOINTS.AUTHORIZE_MFA,{authToken:ea});case 4:if(t=e.sent,la(!1),!t.error_code){e.next=9;break}return ba(Object(y.f)(t.error_code,x)),e.abrupt("return");case 9:ra(!1),ee.pin&&t.mfa_authenticated?(ra(!1),Ya(""),$a(!0),te((function(e){return Object(o.a)(Object(o.a)({},e),{},{pin:!1})}))):ee.profile?gt!==E.email?(wo(),Co()):so():ee.password&&po();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oo=function(){var e=Object(r.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee.pin||ee.password||ee.profile){e.next=3;break}return Ro(),e.abrupt("return");case 3:return _n(""),Gn(!0),e.next=7,m(Oe.ENDPOINTS.AUTHORIZE_SMS_OTP,{otp_token:Rn});case 7:if(t=e.sent,Gn(!1),!t.error_code){e.next=12;break}return _n(Object(y.f)(t.error_code,x,{type:"OTP"})),e.abrupt("return");case 12:gn(!1),ee.pin?(Ya(""),$a(!0),te(Object(o.a)(Object(o.a)({},ee),{},{pin:!1}))):ee.password?po():ee.profile&&(gt!==E.email?(wo(),Co()):so());case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),io=function(e){e.preventDefault();var t=e.target.value;ms(""),Ya(t)},co=function(){Ya(""),ms(""),te((function(e){return Object(o.a)(Object(o.a)({},e),{},{password:!1,profile:!1,pin:!0})})),U===Oe.MFA_TYPE.AUTHENTICATOR?So():U===Oe.MFA_TYPE.PHONE_NUMBER?(Po(!0),_o()):$a(!0)},lo=function(){Hr(!1),zr("")},uo=u.a.createElement(R.P,{title:x("enter6Digit"),showModal:Qa,handleClose:function(){te((function(e){return Object(o.a)(Object(o.a)({},e),{},{pin:!1})})),$a(!1),Ya("")},pin:Ha,setPin:Ya,onChangeMobile:io,errorMessage:us,isMobileView:I,onSubmit:function(){$a(!1),ss(Ha),Ya(""),is(!0)}}),mo=u.a.createElement(R.P,{title:x("confirmNewPIN"),showModal:os,handleClose:function(){te((function(e){return Object(o.a)(Object(o.a)({},e),{},{pin:!1})})),is(!1),Ya("")},pin:Ha,setPin:Ya,onChangeMobile:io,errorMessage:us,isMobileView:I,onSubmit:function(){if(as!==Ha)return ms(x("pinsNotMatch")),void Ya("");is(!1),te((function(e){return Object(o.a)(Object(o.a)({},e),{},{pin:!1})})),hs(""),Ba(!0)}}),bo=function(){var e=Object(r.a)(n.a.mark((function e(){var t,a,s,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Va(!0),p()(ps)||(t={"x-confirmation-password":ps}),a={},e.next=5,b(Oe.ENDPOINTS.USER_PIN,{pin:Ha},a,t);case 5:if(!(s=e.sent).error_code){e.next=11;break}return r=x(s.error_code),hs(r),Va(!1),e.abrupt("return");case 11:return e.next=13,v();case 13:Xa(!0),Va(!1),Ba(!1),fs(""),hs(""),Ya(""),ss(""),$r(x("allSetUp"),x("pinSetSuccess"),"success");case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),po=function(){var e=Object(r.a)(n.a.mark((function e(){var a,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ia(!0),te((function(e){return Object(o.a)(Object(o.a)({},e),{},{password:!1})})),Sa(""),Ra(""),e.next=6,b(Oe.ENDPOINTS.USER_PASSWORD,{password:ja},{},{"x-confirmation-password":Oa});case 6:if(a=e.sent,Ia(!1),!a.error_code){e.next=23;break}e.t0=a.error_code,e.next=e.t0===Oe.ERROR_CODE.API_VALIDATION_ERROR?12:e.t0===Oe.ERROR_CODE.PASSWORD_ALREADY_BEEN_USED_ERROR?14:e.t0===Oe.ERROR_CODE.CONFIRMATION_PASSWORD_ERROR?16:18;break;case 12:return Oo(a.errors),e.abrupt("break",21);case 14:return Ra(x("errorMessages:PASSWORD_ALREADY_BEEN_USED_ERROR")),e.abrupt("break",21);case 16:return Sa(x("confirmationPasswordError")),e.abrupt("break",21);case 18:return s=x(a.error_code),t({type:"error",message:s}),e.abrupt("break",21);case 21:return a.error_code===Oe.ERROR_CODE.USER_LOCKED_ERROR&&fo(),e.abrupt("return");case 23:t({type:"success",message:x("settingsBusinessProfile:changePasswordSuccess")});case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fo=function(){var e=Object(r.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:Object(y.l)(),A.push("/login");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oo=function(e){e.forEach((function(e){switch(e.field){case"x-confirmation-password":Sa(x("currentPasswordError"));break;case"password":Ra(x("newPasswordError"))}}))},Eo=function(){var e=Object(r.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return As({}),Cs(!0),e.next=4,s(Oe.ENDPOINTS.SETUP_MFA);case 4:t=e.sent,ho(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),go=function(){var e=Object(r.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Cs(!1),ws("");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ho=function(e){j.a.toDataURL(e.otpauthUrl,(function(t,a){t||jo(a,e)}))},jo=function(e,t){As({imageData:e,base32:t.base32})},vo=function(){var e=Object(r.a)(n.a.mark((function e(){var t,a,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Us(!0),ws(""),e.next=4,b(Oe.ENDPOINTS.CREATE_MFA_SECRET,{authToken:ks});case 4:if(!(t=e.sent).error_code){e.next=10;break}return a=t.error_code,Us(!1),"AUTH_TOKEN_NOT_VALID"===a?ws(x(a)):(go(),s=Object(y.f)(a,x,{action:g()(x("enableAuthenticator2FA"))}),$r(x("errorMessages:error"),s,"danger")),e.abrupt("return");case 10:return e.next=12,v();case 12:return Us(!1),go(),er(!0),e.next=17,Io();case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_o=function(){yn(""),gn(!0)},Co=function(){te(Object(o.a)(Object(o.a)({},ee),{},{profile:!1})),xr(""),Or(!0)},No=function(){te(Object(o.a)(Object(o.a)({},ee),{},{profile:!1,pin:!1,password:!1})),Ct(!1),Kt(!1),gn(!1),_n(""),Pn("")},So=function(){ba(""),ta(""),ra(!0)},Po=function(){var e=Object(r.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Vn){e.next=2;break}return e.abrupt("return");case 2:return Wn(!0),Pn(""),e.next=6,m(Oe.ENDPOINTS.OTP,{recipient:t?Lt:ln,type:P.a.PHONE_NUMBER});case 6:if(!(a=e.sent).error_code){e.next=11;break}return Pn(Object(y.f)(a.error_code,x,{type:"OTP"})),Wn(!1),e.abrupt("return");case 11:Wn(!1),kn(30);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wo=function(){var e=Object(r.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ur){e.next=2;break}return e.abrupt("return");case 2:return Fr(!0),Mr(""),e.next=6,m(Oe.ENDPOINTS.OTP,{recipient:gt,type:P.a.EMAIL});case 6:if(!(t=e.sent).error_code){e.next=11;break}return Mr(Object(y.f)(t.error_code,x,{type:"code"})),Fr(!1),e.abrupt("return");case 11:Fr(!1),Dr(30);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Mo=function(){var e,t;return Gt?(e=Oe.ENDPOINTS.PHONE_NUMBER_VERIFICATION,t={otp_token:Rn}):(e=Oe.ENDPOINTS.MFA_SECRET_BY_PHONE,t={otp_token:Rn}),{endpoint:e,body:t}},Ro=function(){var e=Object(r.a)(n.a.mark((function e(){var t,a,s,r,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ln(!0),t=Mo(),a=t.endpoint,s=t.body,e.next=4,d(a,s);case 4:if(r=e.sent,Ln(!1),!r.error_code){e.next=10;break}return o=Object(y.f)(r.error_code,x,{type:"OTP",action:g()(x("verifyYourPhoneNumber")).slice(0,-1)}),_n(o),e.abrupt("return");case 10:No(),yo();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),yo=function(){var e=Object(r.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gt?($r(x("commonWords:success"),x("yourPhoneUpdated"),"success"),Kt(!1)):_t?(t({type:"success",message:x("settingsBusinessProfile:updateProfileSuccess")}),Ct(!1)):$r(x("allSetUp"),x("2faSuccess"),"success"),e.next=3,v();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ao=function(){var e=Object(r.a)(n.a.mark((function e(){var t,a,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Js(!1),tn(!0),t={"x-confirmation-password":Kr},e.next=5,b(Oe.ENDPOINTS.REMOVE_MFA,{},{},t);case 5:if(a=e.sent,tn(!1),!a.error_code){e.next=11;break}return"CONFIRMATION_PASSWORD_ERROR"===(s=a.error_code)||"USER_LOCKED_ERROR"===s?Qr(Object(y.f)(s,x)):Js(!0),e.abrupt("return");case 11:lo(),Ks(!0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xo=function(){var e=Object(r.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ao();case 2:return e.next=4,v();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Io=function(){var e=Object(r.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cr(""),Zn(!0),e.next=4,m(Oe.ENDPOINTS.MFA_BACKUP_CODES);case 4:if(!(t=e.sent).error_code){e.next=8;break}return cr(Object(y.f)(t.error_code,x)),e.abrupt("return");case 8:Zn(!1),dr(t.backup_codes);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ko=Gt||_t||ee.pin||ee.password;return u.a.createElement(u.a.Fragment,null,u.a.createElement(R.o,{title:x(I?"settingsMain:yourBusinessAndProfile":"backToSettings"),goBack:function(){return A.push(Oe.PATH.MAIN_SETTINGS)},bottomStickContent:I&&u.a.createElement(R.U,{items:Z(x)})}),u.a.createElement(w.a,null,!I&&u.a.createElement(M.a,{lg:2,className:"px-0"},u.a.createElement(R.U,{items:Z(x)})),u.a.createElement("div",{className:I?"":"col-lg-10"},u.a.createElement("div",{className:I?"":"container"},(Y||q)&&u.a.createElement(H,{business:h,user:E,businessName:je,businessAddress:Ne,businessStreetLine1:Me,businessStreetLine2:xe,businessState:De,businessCity:Fe,businessPostalCode:He,onSaveBusinessInfo:eo,onChangeBusinessInfo:function(e){e.preventDefault();var t=e.target,a=t.name,s=t.value;switch(a){case"businessName":st(Object(o.a)(Object(o.a)({},at),{},{name:""})),ve(s);break;case"businessAddress":st(Object(o.a)(Object(o.a)({},at),{},{address:""})),Se(s);break;case"businessStreetLine1":st(Object(o.a)(Object(o.a)({},at),{},{streetLine1:""})),Re(s);break;case"businessStreetLine2":st(Object(o.a)(Object(o.a)({},at),{},{streetLine2:""})),Ie(s)}},onUploadBusinessLogo:function(e){var t=e.target.files[0];if(t){if(!ge.includes(t.type))return void ao("UNSUPPORTED_IMAGE_FILE_TYPE_ERROR");if(t.size>1048576)return void ao("IMAGE_FILE_SIZE_LIMIT_ERROR");to(t)}},businessLogoError:ot,businessInfoError:at,isSavingBusinessInfo:ze,isUploadingLogo:Qe,navRef:z,validateChangeBusinessInfo:function(e){e.preventDefault();var t=e.target,a=t.name,s=t.value,n={businessName:je,businessAddress:Ne};n[a]=s||void 0,C.validate(n,{abortEarly:!1}).catch((function(e){var t=e.errors.join(",").includes(a);switch(a){case"businessName":t&&st(Object(o.a)(Object(o.a)({},at),{},{name:x("required")}));break;case"businessAddress":t&&st(Object(o.a)(Object(o.a)({},at),{},{address:x("required")}))}}))},validateChangePhilippinesBusinessInfo:function(e){e.preventDefault();var t=e.target,a=t.name,s=t.value,n={businessName:je,businessAddress:Ne,businessStreetLine1:Me,businessPostalCode:He};n[a]=s||void 0,N.validate(n,{abortEarly:!1}).catch((function(e){var t=e.errors.join(",").includes(a);switch(a){case"businessName":t&&st(Object(o.a)(Object(o.a)({},at),{},{name:x("required")}));break;case"businessAddress":t&&st(Object(o.a)(Object(o.a)({},at),{},{address:x("required")}));break;case"businessStreetLine1":t&&st(Object(o.a)(Object(o.a)({},at),{},{streetLine1:x("required")}));break;case"businessPostalCode":var n=x("required");s.length>4&&(n=x("requiredFormat",{value:x("postalCode")})),t&&st(Object(o.a)(Object(o.a)({},at),{},{postalCode:n}))}}))},imageUrl:ut,entity:k,handlePostalCodeOnChange:function(e){st(Object(o.a)(Object(o.a)({},at),{},{postalCode:""}));var t=function(e){return e.replace(_.NUMERIC_REGEX,"")}(e);Ye(t)},handleStateOnChange:function(e){var t=e.value;Be(t)},handleCityOnChange:function(e){var t=e.value;Ve(t)}}),u.a.createElement(Q,{handleChangeProfile:function(e){e.preventDefault();var t=e.target,a=t.name,s=t.value;switch(a){case"fullName":wt(""),ft(s);break;case"workEmail":At(""),ht(s)}},handleSubmitProfile:function(e){e.preventDefault(),Ct(!0),te((function(e){return Object(o.a)(Object(o.a)({},e),{},{profile:!0,password:!1,pin:!1})})),U===Oe.MFA_TYPE.AUTHENTICATOR?So():U===Oe.MFA_TYPE.PHONE_NUMBER?(Po(!0),_o()):gt!==E.email?(wo(),Co()):so()},validateChangeProfile:function(e){e.preventDefault();var t=e.target,a=t.name,s=t.value,n={phoneNumber:Lt,workEmail:gt,fullName:pt};n[a]=s,S.validate(n).catch((function(e){switch(e.path){case"fullName":wt(x("required"));break;case"workEmail":At(x("invalidEmail"))}}))},fullName:pt,workEmail:gt,phoneNumber:Lt,fullNameError:Pt,workEmailError:yt,phoneNumberError:Wt,profileError:kt,isLoadingProfile:_t,isPINSet:za,canApprove:W,handlePINOpen:co,isSubmittingPin:Fa,currentPassword:Oa,newPassword:ja,currentPasswordError:Na,newPasswordError:Ma,isLoadingChangePassword:xa,handleSubmitChangePassword:function(e){e.preventDefault(),te((function(e){return Object(o.a)(Object(o.a)({},e),{},{password:!0,pin:!1,profile:!1})})),U===Oe.MFA_TYPE.AUTHENTICATOR?So():U===Oe.MFA_TYPE.PHONE_NUMBER?(Po(!0),_o()):po()},handleChangePassword:function(e){e.preventDefault();var t=e.target,a=t.name,s=t.value;switch(a){case"currentPassword":Ea(s);break;case"newPassword":va(s)}},isMfaEnabled:!O()(U),handleMfaModalOpen:function(){ce(!0)},navRef:X,setIsDisableMfaModalOpen:qs,user:E,business:h,handleChangePhone:function(e){qt(""),Ut(e)},isLoadingPhone:Gt,handleSubmitPhone:function(e){e.preventDefault(),(Lt?!!_.E164_MOBILE.test(Lt)||(qt(x("phoneNumberInvalid")),!1):(qt(x("verifyPhoneEmptyError")),!1))&&(Kt(!0),U!==Oe.MFA_TYPE.PHONE_NUMBER?(Po(!0),_o()):Jt(!0))}})))),u.a.createElement(R.j,Object.assign({},de,{handleClose:function(){be({title:"",subtitle:"",type:"",showModal:!1}),"danger"===de.type&&Cs(!0)},buttonText:x("commonWords:okay")})),u.a.createElement(R.j,{type:"info",title:x("commonWords:wait"),subtitle:x("byUpdatingPhone"),buttonText:x("commonWords:continue"),showModal:Zt,handleClose:function(){Kt(!1),Jt(!1)},handleConfirm:function(){Jt(!1),Po(!0),_o()},withCancel:!0}),u.a.createElement(R.f,{showModal:na,isLoading:ca,onChange:function(e){e.preventDefault(),ta(e.target.value)},onSubmit:ro,handleClose:function(){te(Object(o.a)(Object(o.a)({},ee),{},{profile:!1,pin:!1,password:!1})),Ct(!1),ra(!1)},errorMessage:da,isMobileView:I,code:ea,setCode:ta}),u.a.createElement(ne,{user:E,isModalOpen:_s,handleCloseModal:go,mfaImageData:ys,handleChangeMfaCode:function(e){e.preventDefault(),Ts(e.target.value),ws("")},mfaCode:ks,handleSubmitMfa:vo,isMfaButtonLoading:Ls,isMobileView:I,inputErrorMessage:Ps}),u.a.createElement(oe,{isDisableMfaModalOpen:Ws,isDisableMfaConfirmationOpen:Gs,isDisableMfaError:Zs,handleCloseDisableMFAModal:function(){return qs(!1)},handleCloseConfirmationModal:function(){return Ks(!1)},onDisableMFA:function(){Qr(""),qs(!1),Hr(!0)},isDisablingMFA:en,entity:k}),uo,mo,u.a.createElement(ie.a,{isModalPasswordOpen:Da,handleModalPasswordClose:function(){Ba(!1),fs(""),Ya("")},isSubmitting:Fa,handleConfirmationPassword:function(){p()(ps)?hs(x("currentPasswordError")):bo()},confirmationPasswordErrorMessage:gs,currentPassword:ps,handleChangeCurrentPassword:function(e){e.preventDefault();var t=e.target.value;fs(t)},isMobileView:I}),u.a.createElement(ie.a,{isModalPasswordOpen:qr,handleModalPasswordClose:lo,isSubmitting:en,handleConfirmationPassword:function(){p()(Kr)?Qr(x("currentPasswordError")):xo()},confirmationPasswordErrorMessage:Jr,currentPassword:Kr,handleChangeCurrentPassword:function(e){e.preventDefault();var t=e.target.value;zr(t)},isMobileView:I}),u.a.createElement(me,{showModal:re,handleClose:function(){ce(!1)},onClickNext:function(e){switch(e){case"app":ce(!1),ba(""),Ts(""),Eo();break;case"sms":ce(!1),rn(!0)}},isMobileView:I}),u.a.createElement(R.O,{countryOfOperation:G,showModal:nn,handleClose:function(){rn(!1)},onClickNext:function(){pn(""),ln?_.E164_MOBILE.test(ln)?(0===In&&Po(),rn(!1),_o()):pn(x("phoneNumberInvalid")):pn(x("verifyPhoneEmptyError"))},isMobileView:I,onPhoneNumberChange:function(e){pn(""),un(e)},phoneNumber:ln,errorMessage:bn,closeText:x("commonWords:cancel"),nextText:x("commonWords:next"),title:x("enableSMS2FA"),description:x("verifyYourPhoneNumber")}),u.a.createElement(R.J,{showModal:En,handleClose:No,onClickEnable:oo,isMobileView:I,isEnabling:Bn||Yn,recipient:Gt?Lt:ln,otpInputErrorMessage:vn,otpRequestErrorMessage:Sn,code:Rn,setCode:yn,onOTPRequest:function(){Po(Gt)},countTime:In,setCountTime:kn,isRequestingOTP:Vn,icon:ko&&Oe.ICON.OTP,centered:ko,title:x(ko?"justSentSms":"enableSMS2FA"),nextText:x(ko?"commonWords:confirm":"commonWords:enable"),type:P.a.PHONE_NUMBER}),u.a.createElement(R.J,{showModal:fr,handleClose:function(){te(Object(o.a)(Object(o.a)({},ee),{},{profile:!1})),Ct(!1),Or(!1),Nr(""),Mr("")},onClickEnable:function(){so(!0)},isMobileView:I,isEnabling:hr,recipient:gt,otpInputErrorMessage:Cr,otpRequestErrorMessage:wr,code:Ar,setCode:xr,onOTPRequest:wo,countTime:Tr,setCountTime:Dr,isRequestingOTP:Ur,icon:Oe.ICON.EMAIL,centered:!0,title:x("justSentEmail"),nextText:x("commonWords:submit"),type:P.a.EMAIL}),u.a.createElement(fe,{showModal:$n,handleSubmit:function(){er(!1),$r(x("allSetUp"),x("2faSuccess"),"success")},handleClose:function(){return er(!1)},onCopyClick:function(){nr(!0),setTimeout((function(){nr(!1)}),1e3),t({type:"success",message:x("copiedToClipboard")})},backupCodes:mr,isCopied:sr,isLoading:Xn,errorMessage:ir,isMobileView:I}))})))},1625:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var s=function(e){return{letterText:e("commonComponents:oneLetter"),numberText:e("commonComponents:oneNumber"),minCharText:e("commonComponents:charactersMinimum"),validationDesc:e("commonComponents:passValidationDesc")}}},1862:function(e,t,a){},1949:function(e,t,a){"use strict";var s=a(0),n=a.n(s),r=a(380),o=a(27),i=a(20),c=a.n(i),l=a(49),u=a.n(l),m=a(149),d=a.n(m);t.a=Object(r.a)(["settingsBusinessProfile","commonWords"])((function(e){var t=e.t,a=e.isModalPasswordOpen,s=e.handleModalPasswordClose,r=e.isSubmitting,i=e.handleConfirmationPassword,l=e.confirmationPasswordErrorMessage,m=e.currentPassword,b=e.handleChangeCurrentPassword,p=e.isMobileView,f=e.backdrop,O=n.a.createElement("div",{className:"password-modal-footer"},n.a.createElement(c.a,{onClick:s,variant:"secondary",customCss:p?"":"mr-3"},t("commonWords:cancel")),n.a.createElement(c.a,{isLoading:r,onClick:i,isDisabled:Object(o.isEmpty)(m)},t("commonWords:confirm")));return n.a.createElement(u.a,{showModal:a,handleClose:s,size:"sm",footer:O,preserveMobileView:!0,backdrop:f||!0},n.a.createElement("div",{className:"mt-3"},n.a.createElement("div",{className:"lock-icon-container"},n.a.createElement("img",{src:"/images/icons/settings/lock_outlined.svg",alt:"lock_outlined"})),n.a.createElement("div",{className:"password-modal-title-section"},t("enterYourPassword")),n.a.createElement(d.a,{type:"password",value:m,onChange:b,customCss:"password-modal-input",errorMessage:l})))}))},2147:function(e,t){e.exports={ENDPOINTS:{USER:"/api/user",AUTHORIZE_MFA:"/api/authorize_mfa",USER_PIN:"/api/users/_pin",USER_PASSWORD:"/api/users/_password",BUSINESS:"/api/business",COMPANY_IMAGES:"/api/company_images",VERIFY_OTP:"/api/authorize_email_otp",SETUP_MFA:"/api/setup_mfa",CREATE_MFA_SECRET:"/api/user/create_mfa_secret",UPDATE_NOTIFICATION:"/api/users/update_notification",REMOVE_MFA:"/api/user/mfa_removal",AUTHORIZE_SMS_OTP:"/api/authorize_sms_otp!",OTP:"/api/otp",MFA_SECRET_BY_PHONE:"/api/user/mfa_secret_by_phone",MFA_BACKUP_CODES:"/api/user/mfa_backup_codes",PHONE_NUMBER_VERIFICATION:"/api/user/phone_number_verification",USER_PROFILE:"/api/user/profile"},ERROR_CODE:{API_VALIDATION_ERROR:"API_VALIDATION_ERROR",AUTH_TOKEN_NOT_VALID:"AUTH_TOKEN_NOT_VALID",CONFIRMATION_PASSWORD_ERROR:"CONFIRMATION_PASSWORD_ERROR",PASSWORD_ALREADY_BEEN_USED_ERROR:"PASSWORD_ALREADY_BEEN_USED_ERROR",OTP_TOKEN_NOT_VALID_ERROR:"OTP_TOKEN_NOT_VALID_ERROR",USER_LOCKED_ERROR:"USER_LOCKED_ERROR",DUPLICATE_USER_ERROR:"DUPLICATE_USER_ERROR"},PATH:{MAIN_SETTINGS:"/settings"},MFA_TYPE:{PHONE_NUMBER:"phone_number",AUTHENTICATOR:"authenticator"},ICON:{OTP:"/images/icons/otp_input.svg",EMAIL:"/images/icons/email_icon.svg"}}}}]);