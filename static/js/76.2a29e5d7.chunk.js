(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[76],{1465:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a.n(n),l=a(19),c=a(12),o=a(0),s=a.n(o),u=a(67),i=a(380),d=a(27),m=a(1598),f=a.n(m),p=a(468),b=a(167),S=a(80),v=a(1573),E=a(189),_=function(e){return[{dataField:"formattedCreatedDate",text:e("dateCreated"),headerStyle:{width:"15%"}},{dataField:"externalId",text:e("reference"),type:"text",headerStyle:{width:"25%"}},{dataField:"totalGrossValue",text:e("gross"),headerStyle:{width:"15%"}},{dataField:"totalFeesValue",text:e("fee"),headerStyle:{width:"15%"}},{dataField:"totalRefundValue",text:e("refund"),headerStyle:{width:"15%"}},{dataField:"totalSettledValue",text:e("total"),headerStyle:{width:"15%"}}]},x=a(1575),D=a.n(x),h=a(288),g=a.n(h),O=Object(i.a)("creditCardDetails")((function(e){var t=e.data,a=e.t,n=t.settlementDate,r=t.status,l=t.totalFeeAmount,c=t.totalGrossAmount,o=t.totalPaymentsCount,u=t.totalRefundedAmount,i=t.totalSettledAmount,d=function(e){return e===b.x.SETTLED?s.a.createElement(D.a,{variant:"success",text:g()(b.x.SETTLED.toLowerCase())}):s.a.createElement(D.a,{text:g()(b.x.PENDING.toLowerCase())})}(r),m=Object(v.c)(c,"IDR"),f=Object(v.c)(l,"IDR",!1),p=Object(v.c)(u,"IDR",!1),_=Object(v.c)(i,"IDR"),x=c>0?"color-success":"",h=l>0?"color-danger":"",O=u>0?"color-danger":"",C=i>0?"color-success":"",j=function(e,t){return[{label:t("estimatedSettlementDate"),value:Object(E.i)(e.settlementDate,"IDR")},{label:t("paymentCount"),value:e.totalPaymentsCount},{label:t("totalGross"),value:e.totalGrossValue},{label:t("totalFee"),value:e.totalFeesValue},{label:t("totalRefund"),value:e.totalRefundValue},{label:t("totalAmountSettled"),value:e.totalSettledValue}]}({settlementDate:n,totalPaymentsCount:o,totalGrossValue:s.a.createElement("span",{className:"".concat(x," text-fair")},m),totalFeesValue:s.a.createElement("span",{className:"".concat(h," text-fair")},f),totalRefundValue:s.a.createElement("span",{className:"".concat(O," text-fair")},p),totalSettledValue:s.a.createElement("span",{className:"".concat(C," text-fair")},_)},a).filter((function(e){return e.value}));return s.a.createElement(S.ab,{status:d,items:j})})),C=a(290),j=a.n(C),T=Object(i.a)("creditCardDetails")((function(e){var t=e.ccPayments,a=e.onDetailsClicked,n=e.t,r=(t&&t.length?t:[]).map((function(e){var t=e.id,a=e.created,n=e.external_id,r=e.captured_amount,l=e.net_fee_amount,c=e.total_refund_amount,o=e.net_amount,u=Object(E.h)(a),i=Object(v.c)(r,"IDR"),d=Object(v.c)(l,"IDR",!1),m=Object(v.c)(c,"IDR",!1),f=Object(v.c)(o,"IDR"),p=r>0?"color-success":"",b=l>0?"color-danger":"",S=c>0?"color-danger":"",_=o>0?"color-success":"";return{id:t,formattedCreatedDate:u,externalId:n,totalGrossValue:s.a.createElement("span",{className:p},i),totalFeesValue:s.a.createElement("span",{className:b},d),totalRefundValue:s.a.createElement("span",{className:S},m),totalSettledValue:s.a.createElement("span",{className:_},f)}}));return s.a.createElement(S.z,null,s.a.createElement("p",{className:"text-md font-weight-bold"},n("chargeDetails")),s.a.createElement(j.a,{noBorder:!0,isClickable:!0,tableHeaderColumns:_(n),tableContentRows:r,onDetailsClicked:a}))}));t.default=Object(u.o)(Object(i.a)(["creditCardDetails","creditCardErrorMessages","errorMessages"])((function(e){var t=e.match,a=e.history,n=e.apiCall,u=e.t,i=e.settlementId,m=e.isTransactionDetails,v=e.environment,E=i||t.params.credit_card_settlement_id,_=Object(o.useState)(!1),x=Object(c.a)(_,2),D=x[0],h=x[1],g=Object(o.useState)({}),C=Object(c.a)(g,2),j=C[0],y=C[1],I=Object(o.useState)(!0),N=Object(c.a)(I,2),F=N[0],R=N[1],A=Object(o.useState)(""),w=Object(c.a)(A,2),L=w[0],V=w[1];Object(o.useEffect)((function(){h(!0),k()}),[]),Object(o.useEffect)((function(){D&&B()}),[v]);var k=function(){var e=Object(l.a)(r.a.mark((function e(){var t,n,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.location.state&&a.location.state.isFromSettlementsDetailsPage,R(!0),e.next=4,f.a.getItem("LAST_CC_SETTLEMENT_DETAILS_TRANSACTIONS");case 4:if(n=e.sent,!t||Object(d.isNull)(n)){e.next=14;break}return l=JSON.parse(n),y(l.creditCardSettlementDetails),R(!1),a.replace({pathname:a.location.pathname,state:{}}),e.next=12,f.a.removeItem("LAST_CC_SETTLEMENT_DETAILS_TRANSACTIONS");case 12:e.next=15;break;case 14:P();case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.prev=1,e.next=4,n.axiosGet(b.d.ccSettlementDetails(E));case 4:if(!(t=e.sent).error_code){e.next=7;break}throw t;case 7:y(t),R(!1),e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(1),V(Object(p.b)(e.t0.error_code,u)),R(!1),e.abrupt("return");case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),G=j.credit_card_payments,M=j.id,J={settlementDate:j.settlement_date,status:j.status,totalFeeAmount:j.total_fee_amount,totalGrossAmount:j.total_gross_amount,totalPaymentsCount:j.total_payments_count,totalRefundedAmount:j.total_refunded_amount,totalSettledAmount:j.total_settled_amount},B=function(){a.push({pathname:b.e.ccTransactions,state:{selectedTabIndex:5,isFromDetailsPage:!0}})},z=function(){f.a.setItem("LAST_CC_SETTLEMENT_DETAILS_TRANSACTIONS",JSON.stringify({creditCardSettlementDetails:j}))},U=s.a.createElement(s.a.Fragment,null,s.a.createElement(O,{data:J}),s.a.createElement(T,{ccPayments:G,onDetailsClicked:function(e){var t=e.id,n=M;z(),a.push({pathname:b.e.ccChargeDetails(t),state:{settlementId:n,isFromSettlementsDetailsPage:!0}})}})),H=F||L?s.a.createElement(S.z,{isLoading:F,loadingText:u("loadingSettlementDetails"),isError:!Object(d.isEmpty)(L),errorText:L}):U;return s.a.createElement(s.a.Fragment,null,!m&&s.a.createElement(S.o,{goBack:B,title:u("creditCardSettlementDetails")}),H)})))},1573:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return o})),a.d(t,"e",(function(){return s}));var n=function(e,t){return"IDR"!==t&&t?e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"):e.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")},r=function(e){return e.toLocaleString("en-US").replace(/,/g,".")},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.toLocaleString("en-US",{minimumFractionDigits:t?2:0})},c=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=l(e,n),c="IDR"===t?r.replace(/,/g,"."):r,o=a?"".concat(t," "):"",s="".concat(o).concat(c);return s},o=function(e,t,a){var n=t?c(e,t):l(e),r=n.split("-").join(""),o="".concat((null!=a?a:e>0)?"+ ":"- "," ").concat(r);return 0===e&&(o=n),o},s=function(e){return"".concat((100*e).toFixed(2),"%")}},1575:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(a(0)),r=o(a(2)),l=o(a(6)),c=o(a(1576));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(1577);var u=function(e){var t,a=e.text,r=e.iconLeft,o=e.customCss,u=e.variant,i=(0,l.default)((s(t={"status-pill":!0},"status-pill-".concat(u),u),s(t,o,o),t));return n.default.createElement(c.default,{text:a,iconLeft:r,customCss:i})};u.propTypes={text:r.default.string,iconLeft:r.default.any,variant:r.default.oneOf(["success","danger","warning","first-level","second-level"]),customCss:r.default.string};var i=u;t.default=i},1576:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),e.exports=a(467)},1577:function(e,t,a){}}]);