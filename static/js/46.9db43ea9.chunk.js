(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[46],{1494:function(e,a,t){"use strict";t.r(a);var n=t(3),r=t(9),l=t.n(r),i=t(19),o=t(12),c=t(1579),s=t(0),d=t.n(s),m=t(1608),u=t.n(m),v=t(31),h=t.n(v),E=t(37),p=t(26),b=t(1581),y=t(471),g=t(190),f=t(27),C=t(67),_=t(380),x=t(49),N=t.n(x),M=/^#([0-9a-f]{3}|[0-9a-f]{6})$/i,R=function(e){var a;switch(e.timeUnit.value){case"days":a=31;break;case"hours":a=24;break;case"minutes":a=60}return c.h().shape({primaryColor:c.i().matches(M,"customInvoiceForm:invalidHex"),secondaryColor:c.i().matches(M,"customInvoiceForm:invalidHex"),primaryFont:c.h().shape({label:c.i().required(),value:c.i().required()}),primaryLanguage:c.h().shape({label:c.i().required(),value:c.i().required()}),timeUnit:c.h().shape({label:c.i().required(),value:c.i().required()}),duration:c.g().typeError("customInvoiceForm:invalidNumber").min(1,"customInvoiceForm:minDuration").max(a,"customInvoiceForm:maxDuration").required("customInvoiceForm:required"),displayCurrency:c.h().shape({label:c.i().required(),value:c.i().required()}),paymentMethods:c.a().required("customInvoiceForm:methodRequired"),selectedBanks:c.a(),selectedRetails:c.a(),selectedEwallets:c.a(),shouldSendInvoiceExpiredEmailToMerchant:c.b().required(),shouldSendInvoicePaidEmailToMerchant:c.b().required()})},T=t(1748),w=t(1609),I="BANK_TRANSFER",k="CREDIT_CARD",O="RETAIL_OUTLETS",S="EWALLET",A={BANK_TRANSFER:"Bank Transfer",CREDIT_CARD:"Credit Card",RETAIL_OUTLETS:"Retail Outlet",EWALLET:"E-Wallet"},L=[{value:"OPEN SANS",label:"Open Sans"},{value:"LATO",label:"Lato"},{value:"TITILLIUM WEB",label:"Titillium Web"},{value:"VARELA ROUND",label:"Varela Round"},{value:"ROBOTO SLAB",label:"Roboto Slab"}],P=[{value:"en",label:"English"},{value:"id",label:"Bahasa Indonesia"}],D=[{value:"days",label:"Days"},{value:"hours",label:"Hours"},{value:"minutes",label:"Minutes"}],B={MANDIRI:"Mandiri",PERMATA:"Permata",BRI:"BRI",BNI:"BNI",BCA:"BCA",ALFAMART:"Alfamart",INDOMARET:"Indomaret",OVO:"OVO",DANA:"DANA"},F=["BANK_TRANSFER","RETAIL_OUTLETS","EWALLET"],j={en:{SELECT_PAYMENT:"Select Payment",BANK_TRANSFER:"Bank Transfer",CREDIT_CARD:"Credit Card",RETAIL_OUTLETS:"Retail Outlet",EWALLET:"E-Wallet",CREDIT_CARD_PAYMENT:"Credit Card Payment",CARD_NUMBER:"Card number",MONTH:"Month",YEAR:"Year",CVV_LABEL:"3 or 4 digit code behind the card",PAY_NOW:"PAY NOW"},id:{SELECT_PAYMENT:"Pilih Pembayaran",BANK_TRANSFER:"Transfer Bank",CREDIT_CARD:"Kartu Kredit",RETAIL_OUTLETS:"Outlet Ritel",EWALLET:"E-Wallet",CREDIT_CARD_PAYMENT:"Pembayaran Kartu Kredit",CARD_NUMBER:"Nomor kartu",MONTH:"Bulan",YEAR:"Tahun",CVV_LABEL:"Kode 3 atau 4 digit dibalik kartu",PAY_NOW:"BAYAR SEKARANG"}},V=t(80),U=t(231),W=t(75),q=t(1573),Y=(t(2085),function(e){var a=e.business,t=a.name,n=a.logo,r=e.rates,l=e.primaryColor,i=e.secondaryColor,o=e.displayCurrency,c=e.duration,s=e.timeUnit;return d.a.createElement("div",{className:"w-35 px-4 text-center",style:{background:"linear-gradient(".concat(l,", ").concat(i,")")}},d.a.createElement("div",{className:"invoice-expiry-time py-2 d-flex text-center"},d.a.createElement("div",{className:"invoice-time-box px-1"},d.a.createElement("div",{className:"color-white text-lg"},"days"===s.value?c:0),d.a.createElement("div",{className:"invoice-time-string color-white"},"days")),d.a.createElement("div",{className:"invoice-time-box px-1"},d.a.createElement("div",{className:"color-white text-lg"},"hours"===s.value?c:0),d.a.createElement("div",{className:"invoice-time-string color-white"},"hours")),d.a.createElement("div",{className:"invoice-time-box px-1"},d.a.createElement("div",{className:"color-white text-lg"},"minutes"===s.value?c:0),d.a.createElement("div",{className:"invoice-time-string color-white"},"minutes")),d.a.createElement("div",{className:"invoice-time-box px-1"},d.a.createElement("div",{className:"color-white text-lg"},"seconds"===s.value?c:0),d.a.createElement("div",{className:"invoice-time-string color-white"},"seconds"))),d.a.createElement(U.a,{roundedCircle:!0,className:"mt-4",src:n?"".concat(W.domain).concat(n):"/images/profile_default.png",width:60,height:60}),d.a.createElement("div",{className:"my-2 color-white text-md"},t),d.a.createElement("div",{className:"color-white text-lg"},"IDR 123.456"),"IDR"!==(null===o||void 0===o?void 0:o.value)&&function(e){var a=123456*r[e],t=Object(q.b)(a,e);return d.a.createElement("div",{className:"color-white text-sm"},"Estimated at ",t)}(null===o||void 0===o?void 0:o.value),d.a.createElement("div",{className:"color-white text-sm"},"This is invoice description"))}),K=(t(2086),function(e){var a,t=e.name,n=e.language,r=e.primaryMethod;switch(t){case I:a=p.M;break;case k:a=p.r;break;case O:a=p.G;break;case S:a=p.A}return d.a.createElement("div",{className:"payment-method-button ".concat(r===t&&"bg-white active"," mb-3 d-flex align-items-center rounded")},d.a.createElement("div",{className:"w-25 d-flex justify-content-center align-items-center h-100"},d.a.createElement(E.a,{icon:a})),d.a.createElement("div",{className:"pl-2"},j[n][t]))}),z=(t(2087),function(e){var a=e.availableChannels,t=e.selectedChannels;return d.a.createElement("div",null,function(){var e=[];return a.forEach((function(a,n){if(t.includes(a)){var r=d.a.createElement("div",{key:n,className:"channel-row px-2 py-3 d-flex justify-content-between align-items-center"},d.a.createElement(U.a,{src:"/images/".concat(a.toLowerCase(),"-logo.svg"),height:25}),d.a.createElement(E.a,{icon:p.l}));e.push(r)}})),e}())}),H=t(20),G=t.n(H),J=t(252),$=t.n(J),Q=t(149),X=t.n(Q),Z=function(e){var a=e.language;return d.a.createElement("div",{className:"border-top"},d.a.createElement("div",{className:"my-3 font-weight-bold"},j[a].CREDIT_CARD_PAYMENT),d.a.createElement(X.a,{placeholder:j[a].CARD_NUMBER}),d.a.createElement("div",{className:"my-2 d-flex"},d.a.createElement("div",{className:"mr-2 w-75"},d.a.createElement($.a,{value:{value:j[a].MONTH,label:j[a].MONTH},options:[]})),d.a.createElement("div",{className:"w-25"},d.a.createElement($.a,{value:{value:j[a].YEAR,label:j[a].YEAR},options:[]}))),d.a.createElement("div",{className:"d-flex align-items-center"},d.a.createElement("div",{className:"w-20"},d.a.createElement(X.a,{placeholder:"CVC/CVV"})),d.a.createElement("div",{className:"ml-2 w-35"},j[a].CVV_LABEL),d.a.createElement("div",{className:"d-flex justify-content-end align-items-center flex-grow-2"},d.a.createElement(U.a,{src:"/images/visa-logo.svg",height:16,className:"mr-3"}),d.a.createElement(U.a,{src:"/images/mastercard-logo.svg",height:30}))),d.a.createElement(G.a,{customCss:"w-50 mt-4 btn-round",variant:"success"},j[a].PAY_NOW))},ee=function(e){var a=e.primaryLanguage.value,t=e.primaryMethod,n=e.paymentMethods,r=e.availableMethods,l=e.availableBanks,i=e.availableRetails,o=e.availableEwallets,c=e.selectedBanks,s=e.selectedRetails,m=e.selectedEwallets;return d.a.createElement("div",{className:"px-4 w-65 bg-white pointer-none"},d.a.createElement("div",{className:"d-flex justify-content-between my-4"},d.a.createElement("div",{className:"text-fair font-weight-bold"},j[a].SELECT_PAYMENT),d.a.createElement(U.a,{src:"/images/language-".concat(a,"-dropdown.svg"),width:30})),n.length>1&&function(e,a){return d.a.createElement("div",{className:"d-flex flex-wrap"},function(){var t=[];return r.forEach((function(r,l){n.includes(r)&&t.push(d.a.createElement(K,{key:l,name:r,language:e,primaryMethod:a}))})),t}())}(a,t),function(){var e;switch(t){case I:e=d.a.createElement(z,{availableChannels:l,selectedChannels:c});break;case O:e=d.a.createElement(z,{availableChannels:i,selectedChannels:s});break;case S:e=d.a.createElement(z,{availableChannels:o,selectedChannels:m});break;case k:e=d.a.createElement(Z,{language:a})}return e}())},ae=(t(2088),function(e){var a=e.values,t=a.primaryColor,n=a.secondaryColor,r=a.displayCurrency,l=a.duration,i=a.timeUnit,o=a.primaryLanguage,c=a.paymentMethods,s=a.primaryMethod,m=a.primaryFont,u=a.selectedBanks,v=a.selectedRetails,h=a.selectedEwallets,E=e.rates,p=e.business,b=e.availableMethods,y=e.availableBanks,g=e.availableRetails,C=e.availableEwallets;return d.a.createElement("div",{className:"w-75 mr-2 d-flex justify-content-center align-items-center"},d.a.createElement("div",{id:"cust-invoice-preview-container",className:"border w-750 h-650 d-flex ".concat(Object(f.kebabCase)(m.value))},d.a.createElement(Y,{rates:E,business:p,primaryColor:t,secondaryColor:n,displayCurrency:r,duration:l,timeUnit:i}),d.a.createElement(ee,{primaryMethod:s,availableMethods:b,availableBanks:y,availableRetails:g,availableEwallets:C,primaryLanguage:o,paymentMethods:c,selectedBanks:u,selectedRetails:v,selectedEwallets:h})))}),te=t(336),ne=t(1779),re=(t(2089),function(e){var a=e.name,t=e.color,n=e.customCss,r=e.isError,l=e.errMsg,i=e.displayColorPicker,o=e.handleColorChange,c=e.handleColorPicker,s=e.handleInputColorChange,m={swatch:{backgroundColor:"".concat(t)}},u=d.a.createElement("div",{className:"position-absolute zIndex-2"},d.a.createElement("div",{className:"position-fixed picker-cover",onClick:c}),d.a.createElement(ne.ChromePicker,{color:t,onChange:function(e){o(e.hex)}}));return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"d-flex ".concat(n)},d.a.createElement("div",{className:"mr-2 w-50 rounded cursor-pointer",style:m.swatch,onClick:c}),d.a.createElement("div",{className:"w-50"},d.a.createElement(X.a,{name:a,type:"text",value:t,onChange:s}))),r&&d.a.createElement("div",{className:"text-sm text-left color-danger m-0"},l),i&&u)});re.defaultProps={isError:!1};var le=re,ie=function(e){var a=e.label,t=e.primaryColor,n=e.secondaryColor,r=e.isPrimaryColorError,l=e.isSecondaryColorError,i=e.primaryColorErrMsg,o=e.secondaryColorErrMsg,c=e.displayPrimaryColor,s=e.displaySecondaryColor,m=e.handlePrimaryColorChange,u=e.handleSecondaryColorChange,v=e.handlePrimaryColorPicker,h=e.handleSecondaryColorPicker,E=e.handleInputPrimaryColor,p=e.handleInputSecondaryColor;return d.a.createElement(d.a.Fragment,null,d.a.createElement(te.a,{htmlFor:a,className:"label-input"},a),d.a.createElement(le,{name:"primaryColor",color:t,isError:r,errMsg:i,displayColorPicker:c,handleColorChange:m,handleColorPicker:v,handleInputColorChange:E}),d.a.createElement(le,{customCss:"mt-2",name:"secondaryColor",color:n,isError:l,errMsg:o,displayColorPicker:s,handleColorChange:u,handleColorPicker:h,handleInputColorChange:p}))};ie.defaultProps={isPrimaryColorError:!1,isSecondaryColorError:!1};var oe=ie,ce=t(24),se=t(211),de=t.n(se),me=t(151),ue=t.n(me),ve=function(e){var a=e.isError,t=e.errMsg,n=e.label,r=e.tooltipContent,l=e.primaryText,i=e.setPrimaryText,o=e.primary,c=e.setFieldValue,s=e.availableMethods,m=e.availableBanks,u=e.availableRetails,v=e.availableEwallets,h=e.selectedMethods,b=e.selectedBanks,y=e.selectedRetails,g=e.selectedEwallets,f=s.reduce((function(e,a){var t,n,r;switch(a){case I:t=m,n=b,r="selectedBanks";break;case O:t=u,n=y,r="selectedRetails";break;case S:t=v,n=g,r="selectedEwallets"}return a!==k?e.push({value:a,availableChannels:t,selectedChannels:n,childKeyValue:r}):e.push({value:a}),e}),[]);return d.a.createElement(d.a.Fragment,null,d.a.createElement(te.a,{htmlFor:n,className:"label-input"},n),f.map((function(e,a){var t=o===e.value?"text-decoration-none color-light-green":"text-underline color-charcoal";return d.a.createElement("div",{key:a},d.a.createElement("div",{className:"d-flex justify-content-between"},d.a.createElement(de.a,{name:e.value,label:A[e.value],checked:h.includes(e.value),onChange:function(a){return function(e,a,t){var n=a||[],r=Object(ce.a)(h)||[],l=e.target.name;e.target.checked?(r.push(l),c(t,n)):r.length>1&&(r.splice(r.indexOf(l),1),l===o&&c("primaryMethod",r[0]),c(t,[])),c("paymentMethods",r)}(a,e.availableChannels,e.childKeyValue)},customCss:"mb-2"}),d.a.createElement("div",{className:"d-flex font-weight-bold"},d.a.createElement("span",{className:"cursor-pointer ".concat(t),onClick:h.includes(e.value)?function(){return a=e.value,void c("primaryMethod",a);var a}:void 0},o===e.value?d.a.createElement(d.a.Fragment,null,d.a.createElement("span",{className:"light-green-icon"},d.a.createElement(E.a,{icon:p.h,className:"mr-1 light-green-icon"})," "),l):i),o===e.value&&d.a.createElement("div",{className:"ml-1 text-xs light-green-icon"},d.a.createElement(ue.a,{placement:"top",content:r})))),h.includes(e.value)&&e.availableChannels&&d.a.createElement("div",{className:"d-flex flex-column ml-4"},function(e,a,t,n){var r=function(e){var r=Object(ce.a)(h)||[],l=Object(ce.a)(a)||[],i=e.target.name;if(e.target.checked)l.push(i);else{if(1===l.length&&1===r.length)return;l.splice(l.indexOf(i),1),!l.length&&r.length>1&&(r.splice(r.indexOf(t),1),c("paymentMethods",r),t===o&&c("primaryMethod",r[0]))}c(n,l)};return e.map((function(e,t){return d.a.createElement(de.a,{key:t,name:e,customCss:"mb-2",label:B[e],checked:a.includes(e),onChange:r})}))}(e.availableChannels,e.selectedChannels,e.value,e.childKeyValue)))})),a&&d.a.createElement("div",{className:"text-sm text-left color-danger m-0"},t))};ve.defaultProps={isError:!1};var he=ve,Ee=function(e){var a=e.isError,t=e.errMsg,n=e.label,r=e.setFieldValue,l=e.sendPaidEmail,i=e.sendExpiredEmail,o=e.sendPaidEmailLabel,c=e.sendExpiredEmailLabel;return d.a.createElement(d.a.Fragment,null,d.a.createElement(te.a,{htmlFor:n,className:"label-input"},n),d.a.createElement("div",{className:"d-flex justify-content-between"},d.a.createElement(de.a,{name:"send-paid-email",label:o,checked:l,onChange:function(e){r("shouldSendInvoicePaidEmailToMerchant",e.target.checked)},customCss:"mb-2"})),d.a.createElement("div",{className:"d-flex justify-content-betweeen"},d.a.createElement(de.a,{name:"send-expired-email",label:c,checked:i,onChange:function(e){r("shouldSendInvoiceExpiredEmailToMerchant",e.target.checked)}})),a&&d.a.createElement("div",{className:"text-sm text-left color-danger m-0"},t))};Ee.defaultProps={isError:!1};var pe=Ee,be=t(1602),ye=t.n(be),ge=Object(_.a)()((function(e){var a,t=Object(s.useState)(!1),n=Object(o.a)(t,2),r=n[0],l=n[1],i=Object(s.useState)(!1),c=Object(o.a)(i,2),m=c[0],u=c[1],v=e.t,h=e.isSubmitting,E=e.availableMethods,p=e.availableBanks,b=e.availableRetails,y=e.availableEwallets,g=e.handleSubmit,f=e.handleChange,C=e.handleReset,_=e.setFieldValue,x=e.values,N=e.errors,M=e.currencyOptions;switch(x.timeUnit.value){case"days":a=31;break;case"hours":a=24;break;case"minutes":a=60}var R=function(e,a){_(a,e)};return d.a.createElement(V.z,{customCss:"w-25"},d.a.createElement(V.gb,{onSubmit:g},d.a.createElement(oe,{label:v("customInvoiceForm:bgColorLabel"),primaryColor:x.primaryColor,secondaryColor:x.secondaryColor,isPrimaryColorError:N.primaryColor&&!0,isSecondaryColorError:N.secondaryColor&&!0,primaryColorErrMsg:v(N.primaryColor),secondaryColorErrMsg:v(N.secondaryColor),displayPrimaryColor:r,displaySecondaryColor:m,handlePrimaryColorChange:function(e){return R(e,"primaryColor")},handleSecondaryColorChange:function(e){return R(e,"secondaryColor")},handlePrimaryColorPicker:function(){l(!r)},handleSecondaryColorPicker:function(){u(!m)},handleInputPrimaryColor:f,handleInputSecondaryColor:f}),d.a.createElement($.a,{label:v("customInvoiceForm:fontLabel"),value:x.primaryFont,options:L,onChange:function(e){return _("primaryFont",e)},isError:N.primaryFont&&!0,errorMessage:v(N.primaryFont)}),d.a.createElement($.a,{label:v("customInvoiceForm:languageLabel"),value:x.primaryLanguage,options:P,onChange:function(e){return _("primaryLanguage",e)},isError:N.primaryLanguage&&!0,errorMessage:v(N.primaryLanguage),searchConfig:{enabled:!1}}),d.a.createElement(ye.a,{longerWidth:"equal",rightDropdown:!0,label:v("customInvoiceForm:durationLabel"),name:"duration",type:"number",value:x.duration,onChange:f,selectorConfig:{value:x.timeUnit,options:D,onChange:function(e){return _("timeUnit",e)},isError:N.duration&&!0,errorMessage:v(N.duration,{timeUnit:x.timeUnit.value,maxDuration:a}),searchConfig:{enabled:!1}}}),d.a.createElement($.a,{label:v("customInvoiceForm:forexLabel"),value:x.displayCurrency,options:M,onChange:function(e){return _("displayCurrency",e)},isError:N.displayCurrency&&!0,errorMessage:v(N.displayCurrency)}),d.a.createElement(he,{label:v("customInvoiceForm:paymentMethodLabel"),tooltipContent:v("customInvoiceForm:primaryTooltip"),primaryText:v("customInvoiceForm:primary"),setPrimaryText:v("customInvoiceForm:setPrimary"),handleChange:f,setFieldValue:_,availableMethods:E,availableBanks:p,availableRetails:b,availableEwallets:y,primary:x.primaryMethod,selectedMethods:x.paymentMethods,selectedBanks:x.selectedBanks,selectedRetails:x.selectedRetails,selectedEwallets:x.selectedEwallets,isError:N.paymentMethods&&!0,errMsg:v(N.paymentMethods)}),d.a.createElement(pe,{label:v("customInvoiceForm:emailNotifLabel"),sendPaidEmailLabel:v("customInvoiceForm:sendPaidEmailLabel"),sendExpiredEmailLabel:v("customInvoiceForm:sendExpiredEmailLabel"),handleChange:f,setFieldValue:_,sendPaidEmail:x.shouldSendInvoicePaidEmailToMerchant,sendExpiredEmail:x.shouldSendInvoiceExpiredEmailToMerchant,isError:N.paymentMethods&&!0,errMsg:v(N.paymentMethods)}),d.a.createElement("div",{className:"mt-4 d-flex justify-content-between"},d.a.createElement(G.a,{size:"sm",variant:"secondary",onClick:C},v("customInvoiceForm:reset")),d.a.createElement(G.a,{size:"sm",type:"submit",isLoading:h},v("commonWords:save")))))})),fe=Object(y.b)((function(e){return Object(n.a)({},e.customInvoice)}),(function(e){return Object(g.b)({getInvoiceSettings:T.a,patchInvoiceSettings:T.b,setIsPatchingSuccess:T.c,setPatchInvSettingsErr:T.d},e)}));a.default=Object(C.o)(Object(_.a)(["customInvoiceCommon","customInvoiceForm"])(fe((function(e){var a=e.t,t=e.apiCall,n=t.axiosGet,r=t.axiosPatch,m=t.axiosPlainRequest,v=e.loading,y=e.isPatching,g=e.isPatchingSuccess,C=e.patchError,_=e.isError,x=e.errorObj,M=e.getInvoiceSettings,T=e.patchInvoiceSettings,I=e.setIsPatchingSuccess,k=e.setPatchInvSettingsErr,O=e.history,S=e.environment,A=e.business,B=e.invoiceSettings,j=B.availableMethods,U=B.availableBanks,W=B.availableRetails,q=B.availableEwallets,Y=B.selectedMethods,K=B.selectedBanks,z=B.selectedRetails,H=B.selectedEwallets,G=B.displayCurrency,J=B.primaryColor,$=B.secondaryColor,Q=B.primaryFont,X=B.primaryLanguage,Z=B.primaryMethod,ee=B.invoiceTtl,te=B.shouldSendInvoicePaidEmailToMerchant,ne=B.shouldSendInvoiceExpiredEmailToMerchant,re=Object(s.useState)(!1),le=Object(o.a)(re,2),ie=le[0],oe=le[1],ce=Object(s.useState)(!1),se=Object(o.a)(ce,2),de=se[0],me=se[1],ue=Object(s.useState)(!1),ve=Object(o.a)(ue,2),he=ve[0],Ee=ve[1],pe=Object(s.useState)(null),be=Object(o.a)(pe,2),ye=be[0],fe=be[1],Ce=function(){var e=Object(i.a)(l.a.mark((function e(a){var t,n,i,o,c,s,d,m,u,v,E,p,b,y,g,C,_,x,N;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.duration,n=a.timeUnit,i=a.paymentMethods,o=a.selectedBanks,c=a.selectedRetails,s=a.selectedEwallets,d=a.primaryFont,m=a.primaryLanguage,u=a.displayCurrency,v=a.primaryMethod,E=a.primaryColor,p=a.secondaryColor,b=a.shouldSendInvoiceExpiredEmailToMerchant,y=a.shouldSendInvoicePaidEmailToMerchant,g=h.a.duration(t,n.value).asSeconds(),C=i.concat(o,c,s),_=Object(f.compact)(C),x=Object(f.difference)(_,F),N={invoice_ttl:g,primary_color:E,secondary_color:p,primary_font:d.value,invoice_primary_language:m.value,display_currency:u.value,should_send_invoice_paid_email_to_merchant:y,should_send_invoice_expired_email_to_merchant:b},"PRODUCTION"===S&&(N.payment_methods=x,N.primary_payment_method=v),"DEVELOPMENT"===S&&(N.development_payment_methods=x,N.development_primary_payment_method=v),e.next=10,T(r,N,S);case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){return function(){var e=Object(i.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("https://api.exchangeratesapi.io/latest?base=IDR");case 2:a=e.sent,fe(a.rates);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),M(n,S),function(){oe(!1),I(!1),k(!1,null)}}),[S]),Object(s.useEffect)((function(){oe(y)}),[y]),Object(s.useEffect)((function(){me(g)}),[g]),Object(s.useEffect)((function(){Ee(C)}),[C]),d.a.createElement(d.a.Fragment,null,d.a.createElement(V.o,{title:a("customInvoiceCommon:customInvoice"),goBack:function(){return O.goBack()}}),v||_||Object(f.isEmpty)(e.invoiceSettings)||!ye?d.a.createElement(V.z,{isLoading:v,loadingText:a("customInvoiceCommon:loadingCustomization"),isError:_,errorText:_&&x.error_code}):function(){var e=Object(w.a)(ee).split(" "),a=Number(e[0]),t=u()(e[1]),n=Object.keys(ye).map((function(e){return{label:e,value:e}})),r={primaryColor:J,secondaryColor:$,primaryMethod:Z,primaryFont:L.find((function(e){return e.value===Q})),primaryLanguage:P.find((function(e){return e.value===X})),displayCurrency:n.find((function(e){return e.value===G})),duration:a,timeUnit:D.find((function(e){return e.value===t})),paymentMethods:Y,selectedBanks:K,selectedRetails:z,selectedEwallets:H,shouldSendInvoiceExpiredEmailToMerchant:ne,shouldSendInvoicePaidEmailToMerchant:te};return d.a.createElement(b.a,{initialValues:r,onSubmit:function(){var e=Object(i.a)(l.a.mark((function e(a,t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.setSubmitting,e.next=3,Ce(a);case 3:n(!1);case 4:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),validationSchema:c.e((function(e){return R(e)}))},(function(e){var a=e.values,t=e.errors,r=e.isSubmitting,l=e.handleSubmit,i=e.handleChange,o=e.handleReset,c=e.setFieldValue;return d.a.createElement("div",{className:"d-flex"},d.a.createElement(ae,{rates:ye,availableMethods:j,availableBanks:U,availableRetails:W,availableEwallets:q,values:a,business:A}),d.a.createElement(ge,{environment:S,isSubmitting:r,handleSubmit:l,handleChange:i,handleReset:o,setFieldValue:c,values:a,errors:t,availableMethods:j,availableBanks:U,availableRetails:W,availableEwallets:q,currencyOptions:n}))}))}(),d.a.createElement(N.a,{showModal:ie,handleClose:function(){return oe(!1)}},d.a.createElement(E.a,{icon:p.F,size:"5x","aria-hidden":!0,spin:!0}),d.a.createElement("div",{className:"mt-3 text-md font-weight-bold"},a("customInvoiceCommon:updating"))),de&&d.a.createElement(V.j,{title:a("customInvoiceCommon:succeedTitle"),type:"success"}),he&&d.a.createElement(V.j,{title:a("customInvoiceCommon:failedTitle"),type:"danger"}))}))))},1573:function(e,a,t){"use strict";t.d(a,"a",(function(){return n})),t.d(a,"d",(function(){return r})),t.d(a,"b",(function(){return i})),t.d(a,"c",(function(){return o})),t.d(a,"e",(function(){return c}));var n=function(e,a){return"IDR"!==a&&a?e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"):e.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")},r=function(e){return e.toLocaleString("en-US").replace(/,/g,".")},l=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.toLocaleString("en-US",{minimumFractionDigits:a?2:0})},i=function(e,a){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=l(e,n),i="IDR"===a?r.replace(/,/g,"."):r,o=t?"".concat(a," "):"",c="".concat(o).concat(i);return c},o=function(e,a,t){var n=a?i(e,a):l(e),r=n.split("-").join(""),o="".concat((null!=t?t:e>0)?"+ ":"- "," ").concat(r);return 0===e&&(o=n),o},c=function(e){return"".concat((100*e).toFixed(2),"%")}},1609:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var n=function(e){e=Number(e);var a=Math.floor(e/86400),t=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),r=Math.floor(e%60);return(a>0?a+(a<=1?" day ":" days "):"")+(t>0?t+(t<=1?" hour ":" hours "):"")+(n>0?n+(n<=1?" minute ":" minutes "):"")+(r>0?r+(r<=1?" second":" seconds"):"")}},1748:function(e,a,t){"use strict";t.d(a,"a",(function(){return g})),t.d(a,"b",(function(){return _})),t.d(a,"c",(function(){return N})),t.d(a,"d",(function(){return M}));var n=t(9),r=t.n(n),l=t(19),i=t(27),o="#31b1ee",c="#1285e2",s="OPEN SANS",d="id",m=86400,u="BANK_TRANSFER",v="CREDIT_CARD",h="RETAIL_OUTLETS",E="EWALLET",p="DIRECT_DEBIT",b=function(e){var a=e.methods,t=e.availableMethods,n=e.availableBanks,r=e.availableRetails,l=e.availableEwallets,o=e.availableDirectDebits,c=Object(i.intersection)(a,n),s=Object(i.intersection)(a,r),d=Object(i.intersection)(a,l),m=Object(i.intersection)(a,o),b=[];return c.length&&b.push(u),a.includes(v)&&b.push(v),s.length&&b.push(h),d.length&&b.push(E),m.length&&b.push(p),b.length||t.forEach((function(e){b.push(e)})),{selectedMethods:b,selectedBanks:c,selectedRetails:s,selectedEwallets:d,selectedDirectDebits:m}},y=t(169),g=function(e,a){return function(){var t=Object(l.a)(r.a.mark((function t(n){var l,i,v,g,_,x,N,M,R,T,w,I,k,O,S,A,L,P,D,B,F,j,V,U,W,q;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(f()),t.next=4,e("/api/invoice-custom-settings");case 4:if(!(l=t.sent).error_code){t.next=7;break}throw l;case 7:i=l.primary_color,v=l.secondary_color,g=l.primary_font,_=l.invoice_primary_language,x=l.invoice_ttl,N=l.display_currency,M=l.development_primary_payment_method,R=l.primary_payment_method,T=l.payment_methods,w=l.development_payment_methods,I=l.available_payment_methods,k=l.available_banks,O=l.available_retail_outlets,S=l.available_ewallets,A=l.available_direct_debits,L=l.should_send_invoice_expired_email_to_merchant,P=l.should_send_invoice_paid_email_to_merchant,D="DEVELOPMENT"===a?M:R,B=b({methods:"DEVELOPMENT"===a?w:T,availableMethods:I,availableBanks:k,availableRetails:O,availableEwallets:S,availableDirectDebits:A}),F=B.selectedMethods,j=B.selectedBanks,V=B.selectedRetails,U=B.selectedEwallets,W=B.selectedDirectDebits,q={availableMethods:I,availableBanks:k,availableRetails:O,availableEwallets:S,availableDirectDebits:A,primaryColor:i||o,secondaryColor:v||c,primaryFont:g||s,primaryLanguage:_||d,invoiceTtl:x||m,displayCurrency:N,selectedMethods:F,selectedBanks:!j.length&&F.includes(u)?k:j,selectedRetails:!V.length&&F.includes(h)?O:V,selectedEwallets:!U.length&&F.includes(E)?S:U,selectedDirectDebits:!W.length&&F.includes(p)?A:W,primaryMethod:D||F[0],shouldSendInvoiceExpiredEmailToMerchant:L,shouldSendInvoicePaidEmailToMerchant:P},n({type:y.e,payload:q}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),n(C(t.t0));case 19:n(f());case 20:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e){return t.apply(this,arguments)}}()},f=function(){return{type:y.c}},C=function(e){return{type:y.a,payload:e}},_=function(e,a,t){return function(){var n=Object(l.a)(r.a.mark((function n(l,i){var o,c,s,d,m,u,v,h,E,p,g,f,C,_,R,T,w,I,k,O,S,A,L,P,D,B,F,j;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,l(x(!0)),n.next=4,e("/api/invoice-custom-settings",a);case 4:if(!(o=n.sent).error_code){n.next=7;break}throw o;case 7:c=i(),s=c.customInvoice.invoiceSettings,d=s.availableMethods,m=s.availableBanks,u=s.availableRetails,v=s.availableEwallets,h=s.availableDirectDebits,E=o.primary_color,p=o.secondary_color,g=o.primary_font,f=o.invoice_primary_language,C=o.invoice_ttl,_=o.display_currency,R=o.development_primary_payment_method,T=o.primary_payment_method,w=o.payment_methods,I=o.development_payment_methods,k=o.should_send_invoice_paid_email_to_merchant,O=o.should_send_invoice_expired_email_to_merchant,S="DEVELOPMENT"===t?R:T,A=b({methods:"DEVELOPMENT"===t?I:w,availableMethods:d,availableBanks:m,availableRetails:u,availableEwallets:v,availableDirectDebits:h}),L=A.selectedMethods,P=A.selectedBanks,D=A.selectedRetails,B=A.selectedEwallets,F=A.selectedDirectDebits,j={primaryColor:E,secondaryColor:p,primaryFont:g,primaryLanguage:f,invoiceTtl:C,displayCurrency:_,selectedMethods:L,selectedBanks:P,selectedRetails:D,selectedEwallets:B,selectedDirectDebits:F,primaryMethod:S,shouldSendInvoicePaidEmailToMerchant:k,shouldSendInvoiceExpiredEmailToMerchant:O},l(N(!0)),l({type:y.d,payload:j}),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(0),l(M(!0,n.t0));case 21:case"end":return n.stop()}}),n,null,[[0,18]])})));return function(e,a){return n.apply(this,arguments)}}()},x=function(e){return{type:y.f,payload:e}},N=function(e){return{type:y.g,payload:e}},M=function(e,a){return{type:y.b,patchError:e,patchErrorObj:a}}},2085:function(e,a,t){},2086:function(e,a,t){},2087:function(e,a,t){},2088:function(e,a,t){},2089:function(e,a,t){}}]);