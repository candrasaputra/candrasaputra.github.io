(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[69],{1531:function(e,t,a){"use strict";a.r(t);var r=a(9),n=a.n(r),c=a(3),o=a(19),i=a(12),u=a(0),s=a.n(u),l=a(31),d=a.n(l),b=a(380),f=a(27),m=a(1598),h=a.n(m),p=a(468),g=a(189),O=a(473),C=a(48),v=a(167),j=a(1879),E=a(1583),S=a.n(E),x=a(1573),D=a(476),k=a(475),_=a(478),y=a.n(_),N=a(80),w=function(e){var t=e.searchQuery,a=e.handleSearch,r=e.fromDateTime,n=e.toDateTime,c=e.dateFormat,o=e.handleChangeDate,i=e.statusFilterOptions,u=e.activeStatus,l=e.handleStatusChange,d=e.creditCardChargebacks,b=e.onClickLoadMore,m=e.onDetailsClicked,h=e.withLoadMore,p=e.isLoading,O=e.errorMessage,E=e.t,_={value:t,onChange:a,tooltip:E("chargebackSearchbarTooltip"),tooltipPlacement:"bottom",placeholder:E("searchbarPlaceholder"),position:"inline",customCss:"filter-item"},w={start:new Date(r),end:new Date(n),inputFormat:c.date_time_picker,outputFormat:C.a.GMT_MS_Z,onChange:o,customCss:"filter-item"},T={isClickable:!0,tableHeaderColumns:Object(j.d)(E),tableContentRows:d&&d.length?d.map((function(e){return function(e){var t=e.id,a=e.status,r=e.record_date,n=e.merchant_due_date,c=e.amount,o=e.charge,i=o.id,u=o.external_id,l=o.currency,d=e.card,b=d.masked_card_number,f=d.processor,m=Object(x.b)(c,l||"IDR"),h=b&&Object(D.a)(b),p=Object(k.b)(f),O=Object(k.a)(f),C=p&&s.a.createElement("img",{className:"card-brand-logo mr-3",src:"/images/card-brands-logos/".concat(O,".png"),alt:O});return{id:t,chargeId:i,status:a,formattedAmount:m,externalId:u,cardNumberValue:s.a.createElement("div",{className:"d-flex align-items-center color-inherit"},C,h),formattedDisputeDate:Object(g.i)(r),formattedRespondDate:Object(g.i)(n)}}(e)})):[],onClickLoadMore:b,withLoadMore:h,loadMoreText:E("commonComponents:tableMore"),isLoadingMore:p.refetch,isLoading:p.chargebacks,isError:!Object(f.isEmpty)(O),isEmpty:Object(f.isEmpty)(d),loadingText:E("loadingChargeback"),errorContent:s.a.createElement(N.t,{text:O}),emptyContent:s.a.createElement(N.r,{caption:E("emptyChargebackCaption")}),onDetailsClicked:m,actionButtonConfig:Object(j.a)(E),rowClasses:"table-row-vertical-align-middle table-clickable-row"},L=function(e,t,a,r){var n=s.a.createElement(y.a,{options:e,value:t,onChange:a,customCss:"radio-container"}),c=t?Object(f.upperFirst)(v.u[t].toLowerCase()):"All";return[s.a.createElement(N.q,{displayText:c,children:[n]})]}(i,u,l);return s.a.createElement(S.a,{filters:L,stickyHeader:!0,searchBarConfig:_,dateFilterConfig:w,tableConfig:T})};w.defaultProps={dateFormat:{},isLoading:{}};var T=Object(b.a)(["creditCard","commonComponents"])(w),L=C.c.TODAY,F=C.c.LAST_1_MONTH;t.default=Object(b.a)(["creditCard","creditCardErrorMessages","errorMessages","commonComponents"])((function(e){var t=e.history,a=e.apiCall,r=e.environment,l=e.dateFormat,b=e.t,m=Object(u.useState)([]),C=Object(i.a)(m,2),E=C[0],S=C[1],x=Object(u.useState)({chargebacks:!1,refetch:!1}),D=Object(i.a)(x,2),k=D[0],_=D[1],y=Object(u.useState)(""),N=Object(i.a)(y,2),w=N[0],R=N[1],M=Object(u.useState)(Object(g.d)(F)),A=Object(i.a)(M,2),I=A[0],P=A[1],V=Object(u.useState)(Object(g.d)(L)),W=Object(i.a)(V,2),B=W[0],H=W[1],U=Object(u.useState)(""),Q=Object(i.a)(U,2),G=Q[0],J=Q[1],K=Object(u.useState)(null),q=Object(i.a)(K,2),Y=q[0],Z=q[1],$=Object(u.useState)(1),z=Object(i.a)($,2),X=z[0],ee=z[1],te=Object(u.useState)(!1),ae=Object(i.a)(te,2),re=ae[0],ne=ae[1],ce=Object(u.useState)(""),oe=Object(i.a)(ce,2),ie=oe[0],ue=oe[1],se=Object(u.useState)(!1),le=Object(i.a)(se,2),de=le[0],be=le[1];Object(u.useEffect)((function(){fe()}),[r]),Object(u.useEffect)((function(){de&&me(w,I,B,G),be(!1)}),[w,I,B]),Object(u.useEffect)((function(){clearTimeout(Y),Z(setTimeout((function(){null!==Y&&(!G||G.length>2)&&de&&me(w,I,B,G)}),400)),be(!1)}),[G]);var fe=function(){var e=Object(o.a)(n.a.mark((function e(){var a,r,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.location.state&&t.location.state.isFromDetailsPage,_((function(e){return Object(c.a)(Object(c.a)({},e),{},{chargebacks:!0})})),e.next=4,h.a.getItem("LAST_CC_CHARGEBACK_TRANSACTIONS");case 4:r=e.sent,a&&!Object(f.isNull)(r)?(o=JSON.parse(r),ee(o.page),ne(o.hasNext),J(o.searchQuery),R(o.activeStatus),P(d()(o.fromDateTime).utc().format()),H(d()(o.toDateTime).utc().format()),S(o.creditCardChargebacks),_((function(e){return Object(c.a)(Object(c.a)({},e),{},{chargebacks:!1})})),t.replace({pathname:t.location.pathname,state:{}})):me(w,I,B,G);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(o.a)(n.a.mark((function e(t,r,o,i){var u,s,l,d=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=d.length>4&&void 0!==d[4]&&d[4],s={page:X,status:t||null,from:r,to:o,search_query:i||null},i&&(delete s.from,delete s.to,s.search_query=i),ue(""),!u&&_((function(e){return Object(c.a)(Object(c.a)({},e),{},{chargebacks:!0})})),e.prev=5,e.next=8,a.axiosGet(v.d.ccChargeback,s);case 8:if(!(l=e.sent).error_code){e.next=11;break}throw l;case 11:e.next=20;break;case 13:if(e.prev=13,e.t0=e.catch(5),e.t0.error_code!==O.a.REQUEST_ABORTED){e.next=17;break}return e.abrupt("return");case 17:return ue(Object(p.b)(e.t0.error_code,b)),_((function(e){return Object(c.a)(Object(c.a)({},e),{},{chargebacks:!1})})),e.abrupt("return");case 20:ne(10===l.chargebacks.length),ee(10===l.chargebacks.length&&X+1),u?(S((function(e){return e.concat(l.chargebacks)})),_((function(e){return Object(c.a)(Object(c.a)({},e),{},{refetch:!1})}))):S(l.chargebacks),_((function(e){return Object(c.a)(Object(c.a)({},e),{},{chargebacks:!1})}));case 24:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,a,r,n){return e.apply(this,arguments)}}(),he=function(){h.a.setItem("LAST_CC_CHARGEBACK_TRANSACTIONS",JSON.stringify({page:X,hasNext:re,activeStatus:w,fromDateTime:I,toDateTime:B,searchQuery:G,creditCardChargebacks:E}))};return s.a.createElement(T,{searchQuery:G,handleSearch:function(e){e.preventDefault(),ee(1),J(e.target.value),be(!0)},fromDateTime:I,toDateTime:B,dateFormat:l,handleChangeDate:function(e,t){switch(J(""),ee(1),e){case"start":P(Object(g.d)(t));break;case"end":H(Object(g.d)(t))}be(!0)},statusFilterOptions:j.c,activeStatus:w,handleStatusChange:function(e){var t=e.target.value;ee(1),R(t),be(!0)},creditCardChargebacks:E,onClickLoadMore:function(){_((function(e){return Object(c.a)(Object(c.a)({},e),{},{refetch:!0})})),me(w,I,B,G,!0)},onDetailsClicked:function(e){var a=e.id;he(),t.replace({pathname:t.location.pathname,state:{isFromDetailsPage:!0}}),t.push({pathname:v.e.ccChargebackDetails(a)})},withLoadMore:re,isLoading:k,errorMessage:ie})}))},1573:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"e",(function(){return u}));var r=function(e,t){return"IDR"!==t&&t?e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"):e.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")},n=function(e){return e.toLocaleString("en-US").replace(/,/g,".")},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.toLocaleString("en-US",{minimumFractionDigits:t?2:0})},o=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=c(e,r),o="IDR"===t?n.replace(/,/g,"."):n,i=a?"".concat(t," "):"",u="".concat(i).concat(o);return u},i=function(e,t,a){var r=t?o(e,t):c(e),n=r.split("-").join(""),i="".concat((null!=a?a:e>0)?"+ ":"- "," ").concat(n);return 0===e&&(i=r),i},u=function(e){return"".concat((100*e).toFixed(2),"%")}},1575:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(a(0)),n=i(a(2)),c=i(a(6)),o=i(a(1576));function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(1577);var s=function(e){var t,a=e.text,n=e.iconLeft,i=e.customCss,s=e.variant,l=(0,c.default)((u(t={"status-pill":!0},"status-pill-".concat(s),s),u(t,i,i),t));return r.default.createElement(o.default,{text:a,iconLeft:n,customCss:l})};s.propTypes={text:n.default.string,iconLeft:n.default.any,variant:n.default.oneOf(["success","danger","warning","first-level","second-level"]),customCss:n.default.string};var l=s;t.default=l},1576:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),e.exports=a(467)},1577:function(e,t,a){},1879:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return b})),a.d(t,"d",(function(){return f}));var r=a(0),n=a.n(r),c=a(1575),o=a.n(c),i=a(288),u=a.n(i),s=a(167),l=[{label:"All",value:""},{label:"Open",value:"NEEDS_MERCHANT_RESPONSE"},{label:"Reviewing",value:"EVIDENCE_RECEIVED"},{label:"Submitted",value:"EVIDENCE_SENT"},{label:"Won",value:"WON"},{label:"Lost",value:"LOST"},{label:"Refunded",value:"REFUNDED"},{label:"Cancelled",value:"CANCELLED"},{label:"Unknown",value:"UNKNOWN"}],d=function(e){return{width:"5%",items:[{field:"externalId",text:e("commonWords:copyReference"),textPressed:e("commonWords:valueCopied"),action:"copy"},{field:"chargeId",text:e("copyChargeId"),textPressed:e("commonWords:valueCopied"),action:"copy"}]}},b=function(e){var t=s.u[e]||s.u.UNKNOWN;switch(e){case"NEEDS_MERCHANT_RESPONSE":case"EVIDENCE_RECEIVED":case"EVIDENCE_SENT":return n.a.createElement(o.a,{variant:"warning",text:u()(t.toLowerCase())});case"WON":return n.a.createElement(o.a,{variant:"success",text:u()(t.toLowerCase())});case"LOST":return n.a.createElement(o.a,{variant:"danger",text:u()(t.toLowerCase())});default:return n.a.createElement(o.a,{text:u()(t.toLowerCase())})}},f=function(e){return[{dataField:"status",text:e("status"),formatter:b,headerStyle:{width:"10%"}},{dataField:"formattedAmount",text:e("amount"),type:"text",headerStyle:{width:"15%"}},{dataField:"externalId",text:e("reference"),type:"text",headerStyle:{width:"25%"}},{dataField:"cardNumberValue",text:e("card"),headerStyle:{width:"15%"}},{dataField:"formattedDisputeDate",text:e("disputedOn"),headerStyle:{width:"15%"}},{dataField:"formattedRespondDate",text:e("respondBy"),type:"text",headerStyle:{width:"15%"}}]}}}]);