(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[72],{1509:function(e,t,a){"use strict";a.r(t);var r=a(9),n=a.n(r),c=a(19),l=a(12),s=a(0),o=a.n(s),i=a(380),u=a(67),m=a(27),d=a(20),E=a.n(d),b=a(511),p=a(284),y=a(205),v=a(80),f=a(28),k=a(31),C=a.n(k),_=a(1575),O=a.n(_),N=a(48),A=[{key:"ALL",value:"All Products"},{key:"DIRECT_DISBURSEMENT",value:"Disbursement"},{key:"CALLBACK_VIRTUAL_ACCOUNT",value:"Virtual Account"},{key:"BANK_ACCOUNT_DATA",value:"Name Validator"},{key:"INVOICE",value:"Invoice"},{key:"BATCH_DISBURSEMENT",value:"Batch Disbursement"},{key:"NPWP_DATA_REQUEST",value:"NPWP"},{key:"CREDIT_CARD_REFUND",value:"Credit Card Refund"},{key:"FOREX_CONVERSION",value:"Forex"},{key:"CALLBACK_VIRTUAL_ACCOUNT_STATUS",value:"Virtual Account Status"},{key:"RECURRING_PAYMENT",value:"Credit Card Subscription"},{key:"CARD_PAYMENT",value:"Card Payment"},{key:"FIXED_PAYMENT_CODE",value:"Retail Outlet (Fixed Payment Code)"},{key:"REMITTANCE",value:"Remittance"},{key:"ESCROW_VIRTUAL_ACCOUNT_ACTIVATED",value:"Escrow VA Activated"},{key:"ESCROW_VIRTUAL_ACCOUNT_PAYMENT",value:"Escrow VA Payment"},{key:"LOAN_DISBURSEMENT",value:"Loan Disbursement"},{key:"ESCROW_WITHDRAWAL",value:"Escrow Withdrawal"},{key:"REPAYMENT",value:"Loan Repayment"}],T={1:"callbackErrors:errorCategory100",3:"callbackErrors:errorCategory300",4:"callbackErrors:errorCategory400",5:"callbackErrors:errorCategory500",2:"success"},g={4:"callbackErrors:errorCode400",5:"callbackErrors:errorCode500"},h=["FAILED","COMPLETED","CALLBACK_URL_NOT_SET","PENDING"],x=a(288),R=a.n(x),j=Object(i.a)("callbacksDetails")((function(e){var t=e.status,a=e.callbackType,r=e.productId,n=e.created,c=e.nextRedelivery,l=e.headerButton,s=e.t,i=[{label:s("status"),value:function(e){var t=R()(null===e||void 0===e?void 0:e.toLowerCase());switch(e){case"COMPLETED":return o.a.createElement(O.a,{text:t,variant:"success"});case"FAILED":return o.a.createElement(O.a,{text:t,variant:"danger"});case"CALLBACK_URL_NOT_SET":return o.a.createElement(O.a,{text:"URL not set",variant:"danger"});default:return o.a.createElement(O.a,{text:t,variant:"warning"})}}(t)},{label:s("date"),value:C()(n).format(N.a.TABLE_DT_FORMAT)},{label:s("productID"),value:r},{label:s("productType"),value:function(e){var t=A.find((function(t){return t.key===e}));return t&&t.value}(a)}];return c&&i.push({label:s("nextRedelivery"),value:C()(c).format(N.a.TABLE_DT_FORMAT)}),o.a.createElement(v.p,{title:s("transactionInformation"),items:i,customCss:"mb-4",headerButton:l})})),L=a(703),D=a.n(L),S=a(37),P=a(1698),w=a(26),I=Object(i.a)(["callbacksDetails","commonWords"])((function(e){var t=e.requestPayload,a=e.label,r=e.entity,n=e.t,c=Object(s.useState)(!1),i=Object(l.a)(c,2),u=i[0],m=i[1],d=JSON.stringify(t,null,4),b=d.split(/\r\n|\r|\n/).length,p=Object(s.useState)(b>7),y=Object(l.a)(p,2),f=y[0],k=y[1];return o.a.createElement(v.z,{title:n("requestPayload"),customCss:"mb-4",customFooter:o.a.createElement("div",{className:"collapsible-card-footer".concat(f?" masked":"")},o.a.createElement(E.a,{variant:"tertiary",onClick:function(){return k(!f)},size:"sm"},o.a.createElement(S.a,{icon:f?w.j:w.m,size:"xs"}),f?n("seeAllLines",{lineNumbers:b}):n("hideLines"))),customBodyCss:"pb-2".concat(f?" shrinked-card-body":"")},o.a.createElement("div",{className:"request-payload-container"},o.a.createElement("div",{className:"request-payload-header"},o.a.createElement("span",{className:"payload-title color-black-400"},a||"JSON"),o.a.createElement(D.a,{text:d,onCopy:function(e,t){t&&(m(!0),setTimeout((function(){m(!1)}),1500))}},o.a.createElement("span",{className:"payload-copy-btn"},o.a.createElement(S.a,{icon:P.b}),o.a.createElement("span",{className:"pl-2"},n(u?"commonWords:copied":"commonWords:copy"))))),o.a.createElement(v.K,{payload:d,withHighlighting:!0,showLineNumbers:!0,entity:r})))})),U=function(e){return C()(e).format(N.a.FULL_DATE)},B=a(222),M=a(156),F=a(151),V=a.n(F),W=Object(i.a)(["callbacksDetails","callbackErrors"])((function(e){var t,a=e.statusCode,r=e.responsePayload,n=e.responseTime,c=e.errorCode,i=e.entity,u=e.t,d=Object(s.useState)(!1),E=Object(l.a)(d,2),b=E[0],p=E[1],y=function(e,t,a){var r=Object(m.head)(t.toString());return e?u("".concat(a,":").concat(e)):"callbackDetails"===a&&T[r]?u(T[r]):"callbackErrors"===a&&g[r]?u(g[r]):""},f=y(c,a,"callbackDetails"),k=y(c,a,"callbackErrors"),C=200!==a?"failed":"success";return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"toggle-payload mb-1",onClick:function(){return p(!b)}},o.a.createElement("span",{className:"color-primary"},o.a.createElement(S.a,{icon:b?w.m:w.j,size:"xs"})),o.a.createElement("span",{className:"ml-1 text-body-3 color-primary"},u(b?"hideResponsePayload":"seeResponsePayload"))),o.a.createElement(B.a,{in:b},o.a.createElement(M.a,{className:"response-payload-card text-body-3"},o.a.createElement(M.a.Header,null,o.a.createElement("div",null,105!==a&&o.a.createElement("span",{className:"text-body-3 mr-1 status-code-".concat(C," font-weight-bold")},a),o.a.createElement("span",{className:"text-body-3 mr-1 font-weight-bold"},f),k&&o.a.createElement(V.a,{placement:"right",content:k,size:"sm"})),n&&o.a.createElement("div",null,o.a.createElement("span",{className:"color-black-400 mr-1 text-body-3"},u("responseTime")),o.a.createElement("span",{className:"text-body-3 font-weight-bold"},n," ms"))),o.a.createElement(M.a.Body,null,o.a.createElement(v.K,{payload:(t=r,t=t?Object(m.isObject)(t)||Object(m.isArray)(t)?JSON.stringify(t,null,4):String(t):"null"),withHighlighting:!0,showLineNumbers:!0,entity:i})))))})),q=Object(i.a)(["callbacksDetails"])((function(e){var t=e.status,a=e.timestamp,r=e.nextRedelivery,n=e.source,c=e.t;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"mb-2"},o.a.createElement("span",{className:"font-weight-bold mr-1"},t)),o.a.createElement(p.a,{className:"mb-1"},o.a.createElement(y.a,{md:5},o.a.createElement("div",{className:"color-black-400 text-body-3"},c("timestamp"))),o.a.createElement(y.a,{md:7},o.a.createElement("div",{className:"font-weight-bold text-body-3"},a))),r&&o.a.createElement(p.a,{className:"mb-1"},o.a.createElement(y.a,{md:5},o.a.createElement("div",{className:"color-black-400 text-body-3"},c("nextRedelivery"))),o.a.createElement(y.a,{md:7},o.a.createElement("div",{className:"font-weight-bold text-body-3"},r))),o.a.createElement(p.a,{className:"mb-1"},o.a.createElement(y.a,{md:5},o.a.createElement("div",{className:"color-black-400 text-body-3"},c("source"))),o.a.createElement(y.a,{md:7},o.a.createElement("div",{className:"font-weight-bold text-body-3"},n||c("automatic")))))})),z=Object(i.a)(["callbacksDetails"])((function(e){var t=e.events,a=e.entity,r=e.t,n=o.a.createElement("span",{className:"color-black-400"},r("noEventYet")),c=t.length>0?t.map((function(e,n){return{eventElement:(c=e,o.a.createElement(o.a.Fragment,null,o.a.createElement(q,{status:Object(m.capitalize)(c.status),timestamp:U(c.timestamp),nextRedelivery:c.redelivery_schedule?U(c.redelivery_schedule):null,source:c.resender_user_name,t:r}),o.a.createElement(W,{statusCode:c.status_code,responsePayload:c.response&&c.response.payload,responseTime:c.response&&c.response.time,errorCode:c.response&&c.response.error_code,entity:a}))),eventStatus:Object(m.capitalize)(e.status),firstEvent:n===t.length-1,pastEvent:n>0};var c})):[{eventElement:n,firstEvent:!0,futureEvent:!0}];return o.a.createElement(v.R,{title:r("callbackEvents"),items:c})})),K=(a(2061),function(e){return"/api/callback_requests/request_payload_id=".concat(e)}),Y=function(e){return"/api/callback_requests/".concat(e)};t.default=Object(u.o)(Object(i.a)(["callbacksDetails","callbackErrors"])((function(e){var t=e.t,a=e.match,r=e.history,i=e.apiCall,u=e.user,d=e.entity,k=a.params.id,C=u.can_manage_tech_settings,_=u.can_edit,O=C||d===f.a.INSTAMONEY&&_,N=Object(s.useState)(!1),A=Object(l.a)(N,2),T=A[0],g=A[1],x=Object(s.useState)(!1),R=Object(l.a)(x,2),L=R[0],D=R[1],S=Object(s.useState)(!1),P=Object(l.a)(S,2),w=P[0],U=P[1],B=Object(s.useState)({}),M=Object(l.a)(B,2),F=M[0],V=M[1],W=Object(s.useState)(""),q=Object(l.a)(W,2),H=q[0],J=q[1];Object(s.useEffect)((function(){G()}),[]),Object(s.useEffect)((function(){w&&(G(),U(!1))}),[w]);var G=function(){var e=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,i.axiosGet(K(k));case 3:if(t=e.sent,g(!1),!t.error_code){e.next=8;break}return J(t.error_code),e.abrupt("return");case 8:V(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.next=3,i.axiosPost(Y(t));case 3:if(a=e.sent,D(!1),!a.error_code){e.next=8;break}return J(a.error_code),e.abrupt("return");case 8:U(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=F.callback_type,Z=F.request_payload,$=F.status,ee=F.events,te=F.created,ae=F.redelivery_schedule,re=F.id;return o.a.createElement(o.a.Fragment,null,o.a.createElement(v.o,{goBack:function(){r.replace({pathname:"/callbacks",state:{isFromDetailsPage:!0}})},title:t("details")}),T||H?o.a.createElement(v.z,{isLoading:T,loadingText:t("loadingCallbackDetails"),isError:H,errorText:H}):o.a.createElement(b.a,null,o.a.createElement(p.a,null,o.a.createElement(y.a,{md:6},o.a.createElement(j,{status:$,callbackType:Q,productId:k,created:te,nextRedelivery:ae,headerButton:re&&O&&function(e,a){var r=h.includes(Object(m.toUpper)(a));return o.a.createElement(E.a,{isLoading:L,size:"sm",isDisabled:!r,onClick:function(){r&&X(e)},customCss:"mb-2"},t("resend"))}(re,$)}),Z&&o.a.createElement(I,{requestPayload:Z,entity:d})),o.a.createElement(y.a,{md:6},ee&&o.a.createElement(z,{events:ee,entity:d})))))})))},1575:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(a(0)),n=s(a(2)),c=s(a(6)),l=s(a(1576));function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(1577);var i=function(e){var t,a=e.text,n=e.iconLeft,s=e.customCss,i=e.variant,u=(0,c.default)((o(t={"status-pill":!0},"status-pill-".concat(i),i),o(t,s,s),t));return r.default.createElement(l.default,{text:a,iconLeft:n,customCss:u})};i.propTypes={text:n.default.string,iconLeft:n.default.any,variant:n.default.oneOf(["success","danger","warning","first-level","second-level"]),customCss:n.default.string};var u=i;t.default=u},1576:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),e.exports=a(467)},1577:function(e,t,a){},2061:function(e,t,a){}}]);