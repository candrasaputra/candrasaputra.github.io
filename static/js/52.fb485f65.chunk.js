(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[52],{1486:function(e,t,a){"use strict";a.r(t);var n=a(81),r=a(24),s=a(3),i=a(9),o=a.n(i),c=a(19),l=a(12),u=a(0),d=a.n(u),m=a(67),_=a(380),E=a(27),b=a(98),f=a(1881),p=a(49),h=a.n(p),O=a(80),v=a(37),N=a(26),I=a(20),g=a.n(I),D=Object(_.a)(["batchDisbursementsDetails","commonWords"])((function(e){var t=e.showModal,a=e.handleClose,n=e.onSubmitClick,r=e.isSubmitting,s=e.t,i=e.isAllValidated,o=d.a.createElement(d.a.Fragment,null,d.a.createElement(g.a,{onClick:a,iconLeft:d.a.createElement(v.a,{icon:N.H}),variant:"secondary"},s("commonWords:cancel")),d.a.createElement(g.a,{onClick:n,isLoading:r},s(i?"commonWords:submit":"submitAnyway"))),c=d.a.createElement("p",null,s("submitIssuesConfirmation")),l=d.a.createElement("p",null,s("stillHaveIssues"));return d.a.createElement(h.a,{title:s("submitIssuesTitle"),titleCentered:!0,showModal:t,handleClose:a,footer:o,size:"sm"},i?c:l)})),C=Object(_.a)(["batchDisbursementsDetails","commonWords"])((function(e){var t=e.showModal,a=e.handleClose,n=e.onDeleteClick,r=e.t,s=d.a.createElement(d.a.Fragment,null,d.a.createElement(g.a,{onClick:a,iconLeft:d.a.createElement(v.a,{icon:N.H}),variant:"secondary"},r("commonWords:cancel")),d.a.createElement(g.a,{onClick:n,variant:"destructive",iconLeft:d.a.createElement(v.a,{icon:N.J})},r("commonWords:delete")));return d.a.createElement(h.a,{title:r("deleteTransaction"),titleCentered:!0,showModal:t,handleClose:a,footer:s,size:"sm"},r("deleteConfirmation").split("\n").map((function(e,t){return d.a.createElement("p",{className:"mb-0",key:t},e)})))})),A=a(31),S=a.n(A),T=a(115),x=a.n(T),j=a(151),y=a.n(j),R=(a(1758),function(e){var t=e.t,a=e.batchDisbursement,n=e.goBack,r=e.isLoading,s=e.isApproving,i=e.isSubmitIssuesDisabled,o=e.isSubmittingIssues,c=e.isMarkButtonLoading,l=e.canApprove,u=e.onClickApprove,m=e.onClickSubmitIssues,_=e.onClickMarkAsComplete,E=e.showSubmitApproval,b=e.canEdit,f=e.countryOfOperation,p=e.dateFormat.empty_search_result,h={Indonesia:a.approved_at,Philippines:a.approved},I=r?d.a.createElement(x.a,null):d.a.createElement(d.a.Fragment,null,d.a.createElement("span",{className:"color-ash-dark min-width-240 mr-5"},t("reference"),":"," ",d.a.createElement("span",{className:"font-weight-bold color-black"},a.reference)),d.a.createElement("span",{className:"color-ash-dark min-width-240 mr-5"},t("uploadedBy"),":"," ",d.a.createElement("span",{className:"font-weight-bold color-black"},a.uploader_name," ")," ".concat(t("on")," "),d.a.createElement("span",{className:"font-weight-bold color-black"},S()(a.created).format(p))),"NEEDS_APPROVAL"!==a.status&&d.a.createElement("span",{className:"color-ash-dark min-width-240"},t("approvedBy"),":"," ",d.a.createElement("span",{className:"font-weight-bold color-black"},a.approver_name)," ".concat(t("on")," "),d.a.createElement("span",{className:"font-weight-bold color-black"},S()(h[f]).format(p))));return d.a.createElement(d.a.Fragment,null,d.a.createElement(O.o,{title:I,goBack:n},!r&&(E?b?d.a.createElement(g.a,{onClick:m,isLoading:o,isDisabled:i},t("submitForApproval")):void 0:"NEEDS_APPROVAL"===a.status?l?d.a.createElement(g.a,{onClick:u,isLoading:s},t("approve")):d.a.createElement(y.a,{size:"lg",placement:"left",content:t("dontHavePermission")},d.a.createElement(g.a,{variant:"ghost",isDisabled:!0},t("approve"))):"CHECK"===a.status&&b?d.a.createElement(g.a,{size:"sm",isLoading:c,iconLeft:d.a.createElement(v.a,{icon:N.i}),onClick:_}," ".concat(t("markAsComplete"))):void 0)))});R.defaultProps={batchDisbursement:{reference:"",uploader_name:"",approver_name:"",created:"",approved_at:"",status:""},dateFormat:{date_time_picker:"",empty_search_result:""}};var w=Object(_.a)("batchDisbursementsDetails")(R),L=a(284),M=a(205),k=a(231),B=a(514),P=a(1573),F=Object(_.a)("batchDisbursementsDetails")((function(e){var t=e.t,a=e.totalUploaded,n=e.totalUploadedAmount,r=e.totalSuccess,s=e.totalSuccessAmount,i=e.totalFailed,o=e.totalFailedAmount,c=e.isLoading,l=e.status,u=e.currency,m="/images/icons/icon_black_".concat(u.toLowerCase(),".svg"),_="/images/icons/icon_green_".concat(u.toLowerCase(),".svg"),b="/images/icons/icon_red_".concat(u.toLowerCase(),".svg"),f=function(e,a,n){return d.a.createElement(L.a,{className:"details-batch-summary"},d.a.createElement(M.a,{xs:"3"},d.a.createElement(k.a,{src:e,width:"35"})),d.a.createElement(M.a,{xs:"9"},d.a.createElement("p",{className:"mb-0 font-weight-bold text-lg"},Object(E.isUndefined)(a)?"":Object(P.b)(a,u,"transactions"!==n)),d.a.createElement("p",{className:"mb-0 color-ash-dark"},t("transactions"===n?"totalTransactions":"totalAmount"))))};return d.a.createElement(O.z,{title:"Batch Summary",isLoading:c},"PENDING"===l&&function(){var e=r/a*100,n=Math.round(e);return d.a.createElement("div",{className:"mb-3"},d.a.createElement("p",{className:"color-ash-dark"},d.a.createElement("strong",null,r)," ".concat(t("of")," ").concat(a," ").concat(t("transactionsDisbursed"))),d.a.createElement(B.a,{animated:!0,now:n,label:"".concat(n,"%"),className:"bd-approved-progress-bar"}))}(),d.a.createElement(L.a,null,d.a.createElement(M.a,{lg:"4",className:"batch-summary-col"},d.a.createElement("div",{className:"batch-summary-context"},d.a.createElement("p",{className:"font-weight-bold mb-0"},t("uploaded")),d.a.createElement("p",{className:"color-ash-dark"},t("willBeProcessed"))),f("/images/icons/icon-swap.svg",a,"transactions"),f(m,n,"amount")),d.a.createElement(M.a,{lg:"4",className:"batch-summary-col"},d.a.createElement("div",{className:"batch-summary-context"},d.a.createElement("p",{className:"font-weight-bold mb-0"},t("disbursedSuccessfully")),d.a.createElement("p",{className:"color-ash-dark"},t("transactionsSuccess"))),f("/images/icons/icon-success.svg",r,"transactions"),f(_,s,"amount")),d.a.createElement(M.a,{lg:"4"},d.a.createElement("div",{className:"batch-summary-context"},d.a.createElement("p",{className:"font-weight-bold mb-0"},t("transactionIssues")),d.a.createElement("p",{className:"color-ash-dark"},t("transactionsWithIssues"))),f("/images/icons/icon-x.svg",i,"transactions"),f(b,o,"amount"))))})),V=a(714),U=a.n(V),W=a(290),G=a.n(W),H=a(224),K=a.n(H),Y=a(48),z=a(300),Q=a(1575),J=a.n(Q),X=a(288),q=a.n(X),Z=function(e){var t=q()(null===e||void 0===e?void 0:e.toLowerCase());switch(e){case"COMPLETED":return d.a.createElement(J.a,{text:t,variant:"success"});case"CHECK":case"PENDING":return d.a.createElement(J.a,{text:t,variant:"warning"});case"FAILED":return d.a.createElement(J.a,{text:t,variant:"danger"});case"NEEDS_APPROVAL":return d.a.createElement(J.a,{text:"Needs approval",variant:"warning"});case"VALIDATING":default:return d.a.createElement(J.a,{text:t})}},$=a(252),ee=a.n($),te=a(149),ae=a.n(te),ne=a(1943),re=a(150),se={IDR:re.NON_INTEGER,PHP:re.NON_INTEGER_DECIMAL},ie=function(e,t){var a=Object(E.find)(e,{field_name:t});if(a)return{message:a.failure_message,value:a.field_value}},oe=function(e,t,a,n){var r=n.formatAmountByCurrency,s=n.currency,i=t.need_attention_fields,o=ie(i,ne.BD_ITEM_FIELD_NAMES.amount),c=function(e,t){return e?r(e,t,!1):""};return t.isEditing?d.a.createElement(ae.a,{useDefaultValue:!0,defaultValue:e||(null===o||void 0===o?void 0:o.value),onChange:function(e){e.preventDefault(),e.target.value=e.target.value.replace(se[s],""),t.amount=e.target.value},errorMessage:null===o||void 0===o?void 0:o.message}):function(e){if(e&&Object(E.isEmpty)(o))return d.a.createElement("span",null,c(e,s));var t=d.a.createElement("div",{className:"d-flex align-items-center"},d.a.createElement(k.a,{height:12,src:"/images/icons/ic-error.svg",alt:"warning_icon",className:"mr-1"}),isNaN(e)?d.a.createElement("span",{className:"bd-field-error"},null===o||void 0===o?void 0:o.value):d.a.createElement("span",{className:"bd-field-error"},c(e||(null===o||void 0===o?void 0:o.value),s)));return d.a.createElement(y.a,{content:null===o||void 0===o?void 0:o.message,placement:"bottom"},t)}(e)},ce=function(e,t,a,n){var r=n.availableBanks,s=n.handleIssueOnChange,i=t.need_attention_fields,o=r.map((function(e){return{label:e.code,value:e.code}})),c=ie(i,ne.BD_ITEM_FIELD_NAMES.bank_code);return t.isEditing?d.a.createElement(ee.a,{options:o,defaultValue:t.bank_code||(null===c||void 0===c?void 0:c.value),onChange:function(e){var a=e.value;s(t,"bank_code",a)},errorMessage:null===c||void 0===c?void 0:c.message,isError:c,searchConfig:{enabled:o.length>4}}):function(e){if(e&&Object(E.isEmpty)(c))return d.a.createElement("span",null,e);var t=d.a.createElement("div",{className:"d-flex align-items-center"},d.a.createElement(k.a,{height:12,src:"/images/icons/ic-error.svg",alt:"warning_icon",className:"mr-1"}),d.a.createElement("span",{className:"bd-field-error"},e||(null===c||void 0===c?void 0:c.value)));return d.a.createElement(y.a,{content:null===c||void 0===c?void 0:c.message,placement:"bottom"},t)}(e)},le=function(e,t,a,n){var r=t.need_attention_fields,s=n.t,i=ie(r,ne.BD_ITEM_FIELD_NAMES.account_holder_name);return t.isEditing?d.a.createElement(ae.a,{useDefaultValue:!0,defaultValue:e||(null===i||void 0===i?void 0:i.value),onChange:function(e){e.preventDefault(),t.account_holder_name=e.target.value},errorMessage:null===i||void 0===i?void 0:i.message}):function(e){if(e&&Object(E.isEmpty)(i))return d.a.createElement("span",null,e);var t=d.a.createElement("div",{className:"d-flex align-items-center"},d.a.createElement(k.a,{height:12,src:"/images/icons/ic-warning-yellow.svg",alt:"warning_icon",className:"mr-1"}),d.a.createElement("span",{className:"bd-field-warning"},e||(null===i||void 0===i?void 0:i.value))),a=s(e?"accountNameNotMatch":"accountNameInvalid");return d.a.createElement(y.a,{content:a,placement:"bottom"},t)}(e)},ue=function(e,t,a,n){var r=t.need_attention_fields,s=n.t,i=ie(r,ne.BD_ITEM_FIELD_NAMES.account_number);return t.isEditing?d.a.createElement(ae.a,{useDefaultValue:!0,defaultValue:e||(null===i||void 0===i?void 0:i.value),onChange:function(e){e.preventDefault(),e.target.value=e.target.value.replace(re.NON_INTEGER,""),t.account_number=e.target.value},errorMessage:null===i||void 0===i?void 0:i.message}):function(e){if(e&&Object(E.isEmpty)(i))return d.a.createElement("span",null,e);var t=d.a.createElement("div",{className:"d-flex align-items-center"},d.a.createElement(k.a,{height:12,src:"/images/icons/ic-error.svg",alt:"warning_icon",className:"mr-1"}),d.a.createElement("span",{className:"bd-field-error"},e||(null===i||void 0===i?void 0:i.value))),a=s("accountNumberInvalid");return d.a.createElement(y.a,{content:a,placement:"bottom"},t)}(e)},de=function(e,t,a,n){var r=t.need_attention_fields,s=n.t,i=ie(r,ne.BD_ITEM_FIELD_NAMES.description);return t.isEditing?d.a.createElement(ae.a,{useDefaultValue:!0,defaultValue:e||(null===i||void 0===i?void 0:i.value),onChange:function(e){e.preventDefault(),t.description=e.target.value},errorMessage:null===i||void 0===i?void 0:i.message}):function(e){if(e&&Object(E.isEmpty)(i))return d.a.createElement("span",null,e);var t=d.a.createElement("div",{className:"d-flex align-items-center"},d.a.createElement(k.a,{height:12,src:"/images/icons/ic-error.svg",alt:"warning_icon",className:"mr-1"}),e&&d.a.createElement("span",{className:"bd-field-error"},e)),a=s("descriptionInvalid");return d.a.createElement(y.a,{content:a,placement:"bottom"},t)}(e)},me=function(e,t,a,n){var r=t.need_attention_fields,s=n.t,i={email:ie(r,ne.BD_ITEM_FIELD_NAMES.email),email_cc:ie(r,ne.BD_ITEM_FIELD_NAMES.email_cc),email_bcc:ie(r,ne.BD_ITEM_FIELD_NAMES.email_bcc)},o=function(e){e.preventDefault(),t[e.target.name]=e.target.value};return t.isEditing?d.a.createElement(d.a.Fragment,null,d.a.createElement(ae.a,{name:"email",customCss:"mb-2",useDefaultValue:!0,defaultValue:t.email,onChange:o,errorMessage:i.email&&i.email.message,label:s("to")}),d.a.createElement(ae.a,{name:"email_cc",customCss:"mb-2",useDefaultValue:!0,defaultValue:t.email_cc,onChange:o,errorMessage:i.email_cc&&i.email_cc.message,label:"Cc:"}),d.a.createElement(ae.a,{name:"email_bcc",customCss:"mb-2",useDefaultValue:!0,defaultValue:t.email_bcc,onChange:o,errorMessage:i.email_bcc&&i.email_bcc.message,label:"Bcc:"})):d.a.createElement(d.a.Fragment,null,t.email&&d.a.createElement("div",null,d.a.createElement("span",{className:i.email&&"color-primary"},s("to"))," ",d.a.createElement("span",null,t.email||i.email.value)),t.email_cc&&d.a.createElement("div",null,d.a.createElement("span",{className:i.email_cc&&"color-primary"},"Cc:")," ",d.a.createElement("span",null,t.email_cc||i.email_cc.value)),t.email_bcc&&d.a.createElement("div",null,d.a.createElement("span",{className:i.email_cc&&"color-primary"},"Bcc:")," ",d.a.createElement("span",null,t.email_bcc||i.email_bcc.value)))},_e=function(e,t,a,n){var r,s,i=n.t;switch(e){case"VALID":r=d.a.createElement(k.a,{height:16,src:"/images/icons/ic-success.svg",alt:"success_icon"}),s=i("youCanSubmit");break;case"PENDING":r=d.a.createElement(k.a,{height:16,src:"/images/icons/stopwatch-icon.svg",alt:"timer_icon"}),s=i("validating");break;default:r=d.a.createElement(k.a,{height:16,src:"/images/icons/ic-error.svg",alt:"failed_icon"}),s=i("transactionWillFailed")}return d.a.createElement(y.a,{content:s,placement:"right"},r)},Ee=function(e,t,a,n){var r=t.need_attention_fields,s=n.t,i=ie(r,ne.BD_ITEM_FIELD_NAMES.reference_id);return t.isEditing?d.a.createElement(ae.a,{useDefaultValue:!0,defaultValue:e||(null===i||void 0===i?void 0:i.value),onChange:function(e){e.preventDefault(),t.reference_id=e.target.value},errorMessage:null===i||void 0===i?void 0:i.message}):function(e){if(Object(E.isEmpty)(i))return d.a.createElement("span",null,e);var t=d.a.createElement("div",{className:"d-flex align-items-center"},d.a.createElement(k.a,{height:12,src:"/images/icons/ic-error.svg",alt:"warning_icon",className:"mr-1"}),e&&d.a.createElement("span",{className:"bd-field-error"},e)),a=s("referenceInvalid");return d.a.createElement(y.a,{content:a,placement:"bottom"},t)}(e)},be=function(e,t,a,n){var r=n.availableChannels,s=n.handleIssueOnChange,i=t.need_attention_fields,o=r.map((function(e){return{label:e.channel_code,value:e.channel_code}})),c=ie(i,ne.BD_ITEM_FIELD_NAMES.channel_code);return t.isEditing?d.a.createElement(ee.a,{options:o,defaultValue:t.channel_code||(null===c||void 0===c?void 0:c.value),onChange:function(e){var a=e.value;s(t,"channel_code",a)},errorMessage:null===c||void 0===c?void 0:c.message,isError:c,searchConfig:{enabled:o.length>4}}):function(e){if(e&&Object(E.isEmpty)(c))return d.a.createElement("span",null,e);var t=d.a.createElement("div",{className:"d-flex align-items-center"},d.a.createElement(k.a,{height:12,src:"/images/icons/ic-error.svg",alt:"warning_icon",className:"mr-1"}),d.a.createElement("span",{className:"bd-field-error"},e||(null===c||void 0===c?void 0:c.value)));return d.a.createElement(y.a,{content:null===c||void 0===c?void 0:c.message,placement:"bottom"},t)}(e)},fe=function(e,t,a,n){var r=n.onEditIssue,s=n.onDeleteIssue,i=n.onValidateIssue,o=n.onCancelEdit,c=n.isValidatingAll,l=n.t;return t.isValidating||c?d.a.createElement(O.X,{size:"lg"}):d.a.createElement(d.a.Fragment,null,t.isEditing&&d.a.createElement(O.h,{icon:d.a.createElement(v.a,{size:"md",icon:N.H}),withTooltip:!0,tooltipText:l("commonWords:cancel"),customCss:"mr-3",onClick:function(){return o(t)}}),!t.isEditing&&d.a.createElement(O.h,{icon:d.a.createElement(v.a,{size:"md",icon:N.B}),withTooltip:!0,tooltipText:l("commonWords:edit"),customCss:"mr-3",onClick:function(){return r(t)}}),d.a.createElement(O.h,{icon:d.a.createElement(v.a,{size:"md",icon:N.D}),withTooltip:!0,tooltipText:l("validate"),customCss:"mr-3",onClick:function(){return i(t)}}),!t.isEditing&&d.a.createElement(O.h,{icon:d.a.createElement(v.a,{size:"md",icon:N.K}),withTooltip:!0,tooltipText:l("commonWords:delete"),customCss:"mr-3",onClick:function(){return s(t)}}))},pe=function(e){var t=e.t,a=e.isValidatingAll,n=e.onEditIssue,r=e.onValidateIssue,s=e.onDeleteIssue,i=e.onCancelEdit,o=e.availableBanks,c=e.availableChannels,l=e.handleIssueOnChange,u=e.currency,m=e.country,_=e.type,E=e.canEdit,f=m===b.a.Philippines,p=[{dataField:"user_validation_status",text:t("status"),formatter:_e,formatExtraData:{t:t},headerStyle:{width:"72px"}},{text:t("actions"),formatter:fe,formatExtraData:{onEditIssue:n,onDeleteIssue:s,onValidateIssue:r,onCancelEdit:i,isValidatingAll:a,t:t},headerStyle:{width:"115px"}},{dataField:"currency",text:t("currency"),formatter:function(){return function(e){return d.a.createElement("span",null,e)}(u)},headerStyle:{width:"90px"}},{dataField:"amount",text:t("amount"),formatter:oe,formatExtraData:{formatAmountByCurrency:P.b,currency:u},headerStyle:{width:"170px"}},{dataField:"bank_code",text:t("bankCode"),formatter:ce,formatExtraData:{availableBanks:o,handleIssueOnChange:l},headerStyle:{width:"125px"}},{dataField:"account_number",text:t("accountNumber"),formatter:ue,formatExtraData:{t:t},headerStyle:{width:"150px"}},{dataField:"account_holder_name",text:t("accountName"),formatter:le,formatExtraData:{t:t},headerStyle:{width:"195px"}},{dataField:"description",text:t("description"),formatter:de,headerStyle:{width:"350px"},formatExtraData:{t:t}},{dataField:"email",text:t("emails"),formatter:me,headerStyle:{width:"350px"},formatExtraData:{t:t}}];return f&&(p.splice(2,0,{dataField:"reference_id",formatExtraData:{t:t},text:t("referenceId"),type:"text",headerStyle:{width:"160px"},formatter:Ee}),p.splice(5,1,{dataField:"channel_code",text:t("channelCode"),formatter:be,formatExtraData:{availableChannels:c,handleIssueOnChange:l},headerStyle:{width:"125px"}})),"validated"!==_&&E||p.splice(1,1),p},he=function(e,t,a,n){var r={email:"",email_cc:"",email_bcc:""};if(n.countryOfOperation!==b.a.Philippines||Object(E.isEmpty)(t.receipt_notification))r=Object(s.a)(Object(s.a)({},r),{},{email:t.email,email_cc:t.email_cc,email_bcc:t.email_bcc});else{var i=t.receipt_notification;r=Object(s.a)(Object(s.a)({},r),{},{email:i.email_to&&i.email_to.join(", "),email_cc:i.email_cc&&i.email_cc.join(", "),email_bcc:i.email_bcc&&i.email_bcc.join(", ")})}var o=function(e,t){return d.a.createElement("div",null,e,d.a.createElement("span",{className:"font-weight-normal"},t))};return d.a.createElement("div",null,r.email&&o("to: ",r.email),r.email_cc&&o("cc: ",r.email_cc),r.email_bcc&&o("bcc: ",r.email_bcc))},Oe=function(e){var t=e.need_attention_fields,a=[{field_name:"ACCOUNT_NAME",failure_codes:["ACCOUNT_NAME_MISMATCH_ERROR"]}];return t.some((function(e){return a.reduce((function(t,a){return function(e,t,a){var n=a.field_name,r=a.failure_code,s=t.field_name,i=t.failure_codes;return n===s&&i.includes(r)?e+1:e}(t,a,e)}),0)>0}))},ve=a(1882),Ne=function(e,t,a,n){var r=n.t;return"FAILED"===t.status&&e?d.a.createElement("a",{href:"https://docs.xendit.co/xendisburse/disbursement-errors/index.html",target:"_blank",rel:"noopener noreferrer",className:"failure-reason-item-color"},r(Object(ve.e)(e))):d.a.createElement("span",null,"-")},Ie=function(e,t){return Object(E.isUndefined)(e)?"":Object(P.b)(e,t,!1)},ge=function(e,t,a,n,r,s,i,o,c,l){return[{show:c?!o:l.finished_transactions_file_url,action:i,text:e("allTransactions")},{show:c?!o&&t:l.completed_transactions_file_url,action:n,text:e("allCompleted")},{show:c?!o&&a:l.failed_transactions_file_url,action:r,text:e("allIssues")},{show:!!c||l.uploaded_transactions_file_url,action:s,text:e("original")}].reduce((function(t,a){var n=function(e,t,a){var n=t.show,r=t.action,s=t.text,i={element:d.a.createElement("span",{className:"font-weight-bold"},s),action:r},o={element:d.a.createElement(y.a,{placement:"left",content:a("linkNotAvailable")},d.a.createElement("span",{className:"font-weight-bold".concat(n?"":" color-black-300")},s)),disabled:!n};return e?n&&i:n?i:o}(c,a,e);return n&&t.push(n),t}),[])},De=function(e){return!e.some((function(e){return"PENDING"===e.user_validation_status}))},Ce=function(e,t){var a=Object(E.omit)(e,["batch_disbursement_items_need_confirmation"]);if(!t)return a;var n=e.transaction_summary,r={total_disbursed_amount:n.total_completed_transaction_amount,total_disbursed_count:n.total_completed_transaction_count,total_error_amount:n.total_failed_transaction_amount,total_error_count:n.total_failed_transaction_count,total_uploaded_amount:n.total_uploaded_transaction_amount,total_uploaded_count:n.total_uploaded_transaction_count,total_needs_user_validation_amount:n.total_issue_transaction_amount,total_needs_user_validation_count:n.total_issue_transaction_count},i=Object(E.omit)(a,["transaction_summary"]);return Object(s.a)(Object(s.a)({},i),r)},Ae=function(){return S()().format("dddd[,] D MMMM YYYY, HH:mm:ss [WIB]")},Se=function(e){var t=e.t,a=e.isLoading,n=e.transactionsData,i=e.setSelectedItems,o=e.selectedItems,c=e.isLoadingMore,l=e.onClickLoadMore,u=e.hasNext,m=e.searchQuery,_=e.setSearchQuery,f=e.onExportSelected,p=e.onExportAllCompleted,h=e.downloadAllCompleted,v=e.downloadAllIssues,N=e.downloadOriginal,I=e.downloadAllTransactions,g=e.status,D=e.countryOfOperation,C=e.currency,A=e.phReportURL,T="PENDING"===g,x=D===b.a.Indonesia,j=n.map((function(e){return e.status})).indexOf("COMPLETED"),y=n.map((function(e){return e.status})).indexOf("FAILED"),R=n.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{currency:e.currency||z.b.IDR,failure_message:e.failure_message||"-"})})),w=function(e,t,a){return{Indonesia:[{dataField:"status",text:e("status"),formatter:Z},{dataField:"currency",text:e("currency"),headerStyle:{width:"8%"}},{dataField:"amount",text:e("amount"),formatter:function(e){return Ie(e,a)}},{dataField:"bank_code",text:e("bankCode"),type:"text"},{dataField:"account_holder_name",text:e("accountName"),type:"text"},{dataField:"account_number",text:e("accountNumber")},{dataField:"external_id",text:e("externalId")},{dataField:"bank_reference",text:e("reference")},{dataField:"failure_code",text:e("failureReason"),formatter:Ne,formatExtraData:{t:e}}],Philippines:[{dataField:"status",text:e("status"),formatter:Z},{dataField:"currency",text:e("currency"),headerStyle:{width:"8%"}},{dataField:"amount",text:e("amount"),formatter:function(e){return Ie(e,a)}},{dataField:"channel_code",text:e("channelCode"),type:"text"},{dataField:"account_name",text:e("accountName"),type:"text"},{dataField:"account_number",text:e("accountNumber")},{dataField:"reference_id",text:e("referenceId")}]}[t]}(t,D,C),k=function(e,t,a,n,r){return[{element:d.a.createElement("span",{className:"font-weight-bold"},e("allCompleted")),action:n},{element:d.a.createElement("span",{className:"".concat(0===r?"color-inherit ":"","font-weight-bold")},"".concat(e("selected")," (").concat(r,")")),action:a,disabled:!t}]}(t,!Object(E.isEmpty)(o),f,p,o.length),B=ge(t,-1!==j,-1!==y,h,v,N,I,T,x,A),P=S()(new Date).format(Y.a.FULL_DATE),F={Indonesia:t("searchBarTooltip"),Philippines:t("searchBarTooltipPh")},V=d.a.createElement("div",{className:"table-top-section"},d.a.createElement(O.z,null,d.a.createElement("p",{className:"font-weight-bold text-fair mb-0"},t("listOfTransactions")),d.a.createElement("p",{className:"color-ash-dark"},t("asAt",{lastBDItemsFetchTime:P})),d.a.createElement("div",{className:"common-divider"}),d.a.createElement(L.a,null,d.a.createElement(M.a,{lg:7,className:"d-flex align-items-center pr-0"},d.a.createElement(U.a,{placeholder:t("search"),name:"search",value:m,onChange:_,tooltipText:F[D]})),d.a.createElement(M.a,{lg:5,className:"pl-0"},d.a.createElement("div",{className:"d-flex align-items-center float-right"},x&&d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"vertical-divider ml-3"}),d.a.createElement("div",{className:"ml-3 selected-items-text"},d.a.createElement("span",{className:"selected-items-text ".concat(o.length>0?"color-primary":"")},"".concat(o.length," ")),t("selected")),d.a.createElement(K.a,{dropdownItems:k,size:"sm",customCss:"button-dropdown-export"},t("exportReceipt"))),d.a.createElement(K.a,{dropdownItems:B,size:"sm",customCss:"button-dropdown-download"},t("downloadReport"))))))),W=d.a.createElement("div",{className:"table-bottom-section"},d.a.createElement(O.z,{isLoading:a,isEmpty:Object(E.isEmpty)(n),emptyIcon:"/images/icons/icon-batch-disbursements-empty.svg",emptyCaption:t("noTransactions"),emptySubtitle:t("tryChangeSearch")},d.a.createElement(G.a,{noBorder:!0,tableHeaderColumns:w,tableContentRows:R,selectRowMode:"checkbox",onSelectRow:function(e,t){var a=Object(r.a)(o);t&&"COMPLETED"===e.status?a.push(e.id):a=a.filter((function(t){return t!==e.id})),i(a)},onSelectAllRow:function(e){if(e){var t=Object(r.a)(o);n.forEach((function(e){"COMPLETED"===e.status&&t.push(e.id)})),i(t)}else i([])},isLoadingMore:c,onClickLoadMore:l,withLoadMore:u,loadMoreText:t("commonComponents:tableMore"),rowClasses:function(e){return"COMPLETED"!==e.status?"bd-approved-uncheck xendit-table-row xendit-table-row-vertical-align-middle not-clickable":"xendit-table-row xendit-table-row-vertical-align-middle not-clickable"},verticalAlign:"middle"})));return d.a.createElement(d.a.Fragment,null,V,W)};Se.defaultProps={phReportURL:{}};var Te=Object(_.a)(["batchDisbursementsDetails","commonComponents"])(Se),xe=a(1583),je=a.n(xe),ye=Object(_.a)(["batchDisbursementsDetails","commonComponents"])((function(e){var t=e.t,a=e.bdItemsData,n=e.totalUploadedCount,r=e.totalUploadedAmount,s=e.updateSearchQuery,i=e.searchQuery,o=e.isFetchingBDItems,c=e.hasNext,l=e.onClickLoadMore,u=e.isFetchBDItemsError,m=e.fetchBDItemsErrorMessage,_=e.isLoadingMoreBDItems,b=e.countryOfOperation,f=e.defaultCurrency,p=function(e,t,a){return{Indonesia:[{dataField:"status",text:e("status"),formatter:Z,headerStyle:{width:"17.5%"}},{text:e("currency"),type:"text",formatter:function(){return a},headerStyle:{width:"8%"}},{dataField:"amount",text:e("amount"),formatter:function(e,t){return t.amount?Object(P.b)(t.amount,a,!1):""},headerStyle:{width:"10%"}},{dataField:"bank_code",text:e("bankCode"),headerStyle:{width:"8%"}},{dataField:"account_holder_name",text:e("accountName"),type:"text"},{dataField:"account_number",text:e("accountNumber"),type:"text"},{dataField:"description",text:e("description"),type:"text"},{text:e("emails"),formatter:he,formatExtraData:{countryOfOperation:t}},{dataField:"external_id",text:e("externalId")}],Philippines:[{text:e("currency"),type:"text",formatter:function(){return a},headerStyle:{width:"8%"}},{dataField:"amount",text:e("amount"),formatter:function(e,t){return t.amount?Object(P.b)(t.amount,a,!1):""},headerStyle:{width:"10%"}},{dataField:"channel_code",text:e("channelCode"),headerStyle:{width:"8%"}},{dataField:"account_name",text:e("accountName"),type:"text"},{dataField:"account_number",text:e("accountNumber"),type:"text"},{dataField:"description",text:e("description"),type:"text"},{text:e("emails"),formatter:he,formatExtraData:{countryOfOperation:t}},{dataField:"reference_id",text:e("referenceId")}]}[t]}(t,b,f),h={tooltip:{Indonesia:t("searchBarTooltip"),Philippines:t("searchBarTooltipPh")}[b],placeholder:t("searchBarPlaceholder"),position:"inline",value:i,onChange:s},v={tableHeaderColumns:p,tableContentRows:a,isLoading:o&&!_,isError:u,isEmpty:Object(E.isEmpty)(a),loadingText:t("loadingBDItems"),errorContent:d.a.createElement(O.t,{text:m}),emptyContent:d.a.createElement(O.r,{caption:t("emptyCaption"),subtitle:t("emptySubtitle")}),withLoadMore:c,loadMoreText:t("commonComponents:tableMore"),isLoadingMore:_,onClickLoadMore:l};return d.a.createElement(d.a.Fragment,null,d.a.createElement(O.z,{customCss:"mb-0 bd-needs-approval-summary"},d.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},d.a.createElement("p",{className:"font-weight-bold mb-0"},t("submittedTransactions",{count:n})),d.a.createElement("div",null,d.a.createElement("span",{className:"font-weight-bold color-ash-dark"},t("totalAmountSentence")),d.a.createElement("span",{className:"font-weight-bold"},Object(P.b)(r,f))))),d.a.createElement("div",{className:"bd-needs-approval-card-table"},d.a.createElement(je.a,{stickyHeader:!0,searchBarConfig:h,tableConfig:v})))})),Re=function(e){var t=e.t,a=e.issueData,n=e.availableBanks,i=e.availableChannels,o=e.onValidateBulkIssues,c=e.onValidateIssue,l=e.onDeleteIssue,u=e.onCancelEdit,m=e.onEditIssue,_=e.isValidatingAll,b=e.handleIssueOnChange,f=e.onCheckSelected,p=e.onAllCheckSelected,h=e.onDeleteBulkIssues,v=e.isValidatingBulk,N=e.type,I=e.currency,D=e.country,C=e.onLoadMore,A=e.canEdit,S=a.bdItems,T=a.hasNext,x=a.isFetching,j=a.isLoadingMore,y=a.errorMessage,R=a.selectedItems,w=a.nonEditedItems,L="validated"===N,M=Object(E.isEmpty)(R),k=[d.a.createElement("div",{className:"selected-items-text"},d.a.createElement("span",{className:"".concat(R.length>0?"color-primary":"")},"".concat(R.length," ")),t("selected")),d.a.createElement(g.a,{isLoading:v,isDisabled:M||_,onClick:o,customCss:"mr-2",id:"validate_batch"},t("validate")),d.a.createElement(g.a,{isDisabled:M||v||_,onClick:h,id:"delete"},t("commonWords:delete"))],B={isClickable:!1,tableHeaderColumns:pe({t:t,isValidatingAll:_,onEditIssue:m,onCancelEdit:u,onValidateIssue:c,onDeleteIssue:l,availableBanks:n,availableChannels:i,handleIssueOnChange:b,currency:I,country:D,type:N,canEdit:A}),tableContentRows:L?[].concat(Object(r.a)(S),Object(r.a)(w)):S,isLoading:x&&!j,isError:!Object(E.isEmpty)(y),loadingText:t("loadingIssues"),errorContent:d.a.createElement(O.t,{text:y}),onClickLoadMore:C,withLoadMore:T,loadMoreText:t("commonComponents:tableMore"),isLoadingMore:j,rowClasses:function(e){return e.isEditing?"":"table-row-vertical-align-middle"}};return!L&&A&&(B=Object(s.a)(Object(s.a)({},B),{},{selectRowMode:"checkbox",onSelectRow:f,onSelectAllRow:p})),d.a.createElement(je.a,{stickyHeader:!0,rightButtons:L||!A?[]:k,tableConfig:B})};Re.defaultProps={t:function(){},issueData:{bdItems:[],hasNext:!0,isFetching:!1,isLoadingMore:!1,errorMessage:"",selectedItems:[],nonEditedItems:[]},availableBanks:[],availableChannels:[],handleIssueOnChange:function(){},onValidateBulkIssues:function(){},onValidateIssue:function(){},onDeleteIssue:function(){},onCancelEdit:function(){},onEditIssue:function(){},isValidatingAll:!1,selectedIssuesList:[]};var we=Object(_.a)(["batchDisbursementsDetails","commonWords","commonComponents"])(Re),Le=function(e){var t=e.t,a=e.needsValidationData,n=e.needsValidationSummary,r=e.validatedData,s=e.availableBanks,i=e.availableChannels,o=e.onEditIssue,c=e.onValidateIssue,m=e.onValidateBulkIssues,_=e.onDeleteIssue,E=e.isValidatingAllIssues,b=e.handleIssueOnChange,f=e.onCheckSelected,p=e.onAllCheckSelected,h=e.onDeleteBulkIssues,v=e.isValidatingBulkIssues,N=e.currency,I=e.country,g=e.getNeedsValidationDetailItems,D=e.canEdit,C=Object(u.useState)(!0),A=Object(l.a)(C,2),S=A[0],T=A[1],x=Object(u.useState)(!1),j=Object(l.a)(x,2),y=j[0],R=j[1],w=n.totalNeedsValidationAmount,L=n.totalNeedsValidationCount,M=n.totalValidatedAmount,B=n.totalValidatedCount,F=d.a.createElement(we,{issueData:a,availableBanks:s,availableChannels:i,onValidateBulkIssues:m,onValidateIssue:c,onDeleteIssue:_,onCancelEdit:function(e){o(e,!0,"cancel")},onEditIssue:function(e){o(e,!0,"edit")},isValidatingAll:E,handleIssueOnChange:b,onCheckSelected:f,onAllCheckSelected:p,onDeleteBulkIssues:h,isValidatingBulk:v,type:"nv",currency:N,country:I,onLoadMore:function(){g("nv",!0)},canEdit:D}),V=d.a.createElement(we,{issueData:r,availableBanks:s,type:"validated",currency:N,country:I,onLoadMore:function(){g("validated",!0)}}),U=d.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},d.a.createElement(k.a,{src:"/images/icons/ic-".concat(L>0?"error":"warning-grey",".svg"),className:"mr-2",height:16,alt:"error_icon"}),d.a.createElement("span",{className:"font-weight-600"},t("transactionsWithIssue",{count:L}))),W=d.a.createElement("p",{className:"color-ash-dark mb-0 font-weight-600"},t("totalAmountSentence"),d.a.createElement("span",{className:"font-weight-600 mr-2"}," ".concat(Object(P.b)(w,N)))),G=d.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},d.a.createElement(k.a,{src:"/images/icons/ic-success.svg",className:"mr-2",height:16,alt:"error_icon"}),d.a.createElement("span",{className:"font-weight-600"},t("validatedTransactions",{count:B}))),H=d.a.createElement("p",{className:"color-ash-dark mb-0 font-weight-600"},t("totalAmountSentence"),d.a.createElement("span",{className:"font-weight-600 mr-2"}," ".concat(Object(P.b)(M,N))));return d.a.createElement("div",{className:"bd-needs-validation-details-container"},d.a.createElement(O.i,{isCollapsibleContentOpen:y,headerContentLeft:G,headerContentRight:H,onClick:function(e){R(e),T(!1)},customCss:"bd-validated-items-collapsible",isDisabled:0===B},V),d.a.createElement(O.i,{isCollapsibleContentOpen:S,headerContentLeft:U,headerContentRight:W,onClick:function(e){T(e),R(!1)},isDisabled:0===L},F))};Le.defaultProps={needsValidationData:{bdItems:[]},validatedData:{bdItems:[]},needsValidationSummary:{totalValidatedAmount:0,totalValidatedCount:0,totalNeedsValidationAmount:0,totalNeedsValidationCount:0}};var Me=Object(_.a)("batchDisbursementsDetails")(Le),ke=Object(_.a)(["batchDisbursementsDetails","commonWords"])((function(e){var t=e.t,a=e.showModal,n=e.handleClose,r=e.handleConfirm,s=e.defaultCurrency,i=(0,e.summaryData)(),o=i.total_uploaded_count,c=i.total_uploaded_amount,l=s===z.b.IDR,u=[{field:t("totalTransactionsSubtitle"),value:o},{field:t("totalAmountSentence"),value:Object(P.b)(c,s,!0)}];return d.a.createElement(O.j,{showModal:a,handleClose:n,title:t("commonWords:wait"),subtitle:t("approveConfirmation"),type:"info",additionalContent:d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"confirmation-modal-additional-content"},u.map((function(e,t){var a=t===u.length;return d.a.createElement(L.a,{key:t},d.a.createElement(M.a,null,d.a.createElement("p",{className:"mb-1 font-weight-bold color-charcoal"},e.field)),d.a.createElement(M.a,null,d.a.createElement("p",{className:"".concat(a?"mb-0":"mb-1"," text-fair font-weight-bold")},e.value)))}))),l&&d.a.createElement(O.E,{infoPanel:!0,icon:N.e,customCss:"my-4"},d.a.createElement("p",{className:"mb-0 text-sm text-left info-panel-text"},t("announcementBDApproval")))),withCancel:!0,buttonText:t("approve"),handleConfirm:r})})),Be=Object(_.a)(["batchDisbursementsDetails","commonWords"])((function(e){var t=e.t,a=e.showModal,n=e.handleClose,r=e.defaultCurrency,s=(0,e.summaryData)(),i=s.total_uploaded_count,o=s.total_uploaded_amount,c=[{field:t("totalTransactionsSubtitle"),value:i},{field:t("totalAmountSentence"),value:Object(P.b)(o,r,!0)}];return d.a.createElement(O.j,{showModal:a,handleClose:n,title:t("batchApproved"),type:"success",additionalContent:d.a.createElement("div",{className:"confirmation-modal-additional-content"},c.map((function(e,t){var a=t===c.length;return d.a.createElement(L.a,{key:t},d.a.createElement(M.a,null,d.a.createElement("p",{className:"mb-1 font-weight-bold color-charcoal"},e.field)),d.a.createElement(M.a,null,d.a.createElement("p",{className:"".concat(a?"mb-0":"mb-1"," text-fair font-weight-bold")},e.value)))}))),handleConfirm:n})})),Pe=Object(_.a)(["batchDisbursementsDetails","commonWords"])((function(e){var t=e.showModal,a=e.handleClose,n=e.onConfirmClick,r=e.t,s=d.a.createElement(d.a.Fragment,null,d.a.createElement(g.a,{onClick:a,iconLeft:d.a.createElement(v.a,{icon:N.H}),variant:"secondary"},r("commonWords:cancel")),d.a.createElement(g.a,{onClick:n},r("commonWords:leave")));return d.a.createElement(h.a,{title:r("leaveThisPage"),titleCentered:!0,showModal:t,handleClose:a,footer:s,size:"sm"},r("changesWillDiscarded"))})),Fe=function(e,t){return t?e.map((function(e){var t=e.receipt_notification,a="PENDING"===e.status?"VALID":"INVALID";return Object(s.a)(Object(s.a)({},e),{},{account_holder_name:e.account_name,email:t&&t.email_to.join(", "),email_cc:t&&t.email_cc.join(", "),email_bcc:t&&t.email_bcc.join(", "),user_validation_status:a})})):e},Ve=function(e,t){return t?e.map((function(e){var t=Object(s.a)(Object(s.a)({},e),{},{account_name:e.account_holder_name,receipt_notification:{email_to:Object(E.isEmpty)(e.email)?[]:e.email.split(","),email_cc:Object(E.isEmpty)(e.email_cc)?[]:e.email_cc.split(","),email_bcc:Object(E.isEmpty)(e.email_bcc)?[]:e.email_bcc.split(",")}});return delete t.account_holder_name,delete t.email,delete t.email_cc,delete t.email_bcc,delete t.user_validation_status,t})):e},Ue=a(50),We={approved_at:"",approver_name:"",completed_transactions_file_id:"",created:"",finished_transactions_file_id:"",id:"",reference:"",status:"",total_disbursed_amount:0,total_disbursed_count:0,total_error_amount:0,total_error_count:0,total_needs_user_validation_amount:0,total_needs_user_validation_count:0,total_uploaded_amount:0,total_uploaded_count:0,updated:"",uploaded_file_id:"",uploader_name:"",validation_status:""},Ge={data:[],hasNext:!1,isLoading:!1,isLoadingMore:!1,lastId:void 0,errorMessage:""},He={bdItems:[],hasNext:!0,lastId:"",isFetching:!1,errorMessage:"",isLoadingMore:!1,selectedItems:[],nonEditedItems:[],issuesBeforeEdit:{}},Ke={bdItems:[],hasNext:!0,lastId:"",isFetching:!1,errorMessage:"",isLoadingMore:!1,selectedItems:[],nonEditedItems:[]};t.default=Object(m.o)(Object(_.a)(["batchDisbursementsDetails","batchDisbursements","disbursementErrorCodes","errorMessages","commonComponents","commonWords"])((function(e){var t=e.t,a=e.apiCall,i=e.match,m=e.user,_=e.business,p=e.history,v=e.environment,N=e.defaultCurrency,I=e.isMobileView,g=e.notify,A=e.dateFormat,S=e.entity,T=m.email,x=m.can_edit,j=m.can_approve,y=m.user_id,R=_.country_of_operation,L=_.id,M=_.environment,k=Object(u.useState)(We),B=Object(l.a)(k,2),P=B[0],V=B[1],U=Object(u.useState)(!1),W=Object(l.a)(U,2),G=W[0],H=W[1],K=Object(u.useState)(!1),Y=Object(l.a)(K,2),z=Y[0],Q=Y[1],J=Object(u.useState)(null),X=Object(l.a)(J,2),q=X[0],Z=X[1],$=Object(u.useState)(null),ee=Object(l.a)($,2),te=ee[0],ae=ee[1],re=Object(u.useState)(!1),se=Object(l.a)(re,2),ie=se[0],oe=se[1],ce=Object(u.useState)(!1),le=Object(l.a)(ce,2),ue=le[0],de=le[1],me=Object(u.useState)(!1),_e=Object(l.a)(me,2),Ee=_e[0],be=_e[1],fe=Object(u.useState)({}),pe=Object(l.a)(fe,2),he=pe[0],ve=pe[1],Ne=Object(u.useState)(Ge),Ie=Object(l.a)(Ne,2),ge=Ie[0],Se=Ie[1],xe=Object(u.useState)([]),je=Object(l.a)(xe,2),Re=je[0],we=je[1],Le=Object(u.useState)(!1),Ye=Object(l.a)(Le,2),ze=Ye[0],Qe=Ye[1],Je=Object(u.useState)(!1),Xe=Object(l.a)(Je,2),qe=Xe[0],Ze=Xe[1],$e=Object(u.useState)(!1),et=Object(l.a)($e,2),tt=et[0],at=et[1],nt=Object(u.useState)(""),rt=Object(l.a)(nt,2),st=rt[0],it=rt[1],ot=Object(u.useState)(!1),ct=Object(l.a)(ot,2),lt=ct[0],ut=ct[1],dt=Object(u.useState)([]),mt=Object(l.a)(dt,2),_t=mt[0],Et=mt[1],bt=Object(u.useState)(""),ft=Object(l.a)(bt,2),pt=ft[0],ht=ft[1],Ot=Object(u.useState)(""),vt=Object(l.a)(Ot,2),Nt=vt[0],It=vt[1],gt=Object(u.useState)(!1),Dt=Object(l.a)(gt,2),Ct=Dt[0],At=Dt[1],St=Object(u.useState)(!1),Tt=Object(l.a)(St,2),xt=Tt[0],jt=Tt[1],yt=Object(u.useState)(""),Rt=Object(l.a)(yt,2),wt=Rt[0],Lt=Rt[1],Mt=Object(u.useState)(!1),kt=Object(l.a)(Mt,2),Bt=kt[0],Pt=kt[1],Ft=Object(u.useState)(!1),Vt=Object(l.a)(Ft,2),Ut=Vt[0],Wt=Vt[1],Gt=Object(u.useState)(!1),Ht=Object(l.a)(Gt,2),Kt=Ht[0],Yt=Ht[1],zt=Object(u.useState)(!1),Qt=Object(l.a)(zt,2),Jt=Qt[0],Xt=Qt[1],qt=Object(u.useState)(!1),Zt=Object(l.a)(qt,2),$t=Zt[0],ea=Zt[1],ta=Object(u.useState)(""),aa=Object(l.a)(ta,2),na=aa[0],ra=aa[1],sa=Object(u.useState)(),ia=Object(l.a)(sa,2),oa=ia[0],ca=ia[1],la=Object(u.useState)(""),ua=Object(l.a)(la,2),da=ua[0],ma=ua[1],_a=Object(u.useState)(""),Ea=Object(l.a)(_a,2),ba=Ea[0],fa=Ea[1],pa=Object(u.useState)([]),ha=Object(l.a)(pa,2),Oa=ha[0],va=ha[1],Na=Object(u.useState)([]),Ia=Object(l.a)(Na,2),ga=Ia[0],Da=Ia[1],Ca=Object(u.useState)(!1),Aa=Object(l.a)(Ca,2),Sa=Aa[0],Ta=Aa[1],xa=Object(u.useState)(!1),ja=Object(l.a)(xa,2),ya=ja[0],Ra=ja[1],wa=Object(u.useState)(!1),La=Object(l.a)(wa,2),Ma=La[0],ka=La[1],Ba=Object(u.useState)(!1),Pa=Object(l.a)(Ba,2),Fa=Pa[0],Va=Pa[1],Ua=Object(u.useState)(!1),Wa=Object(l.a)(Ua,2),Ga=Wa[0],Ha=Wa[1],Ka=Object(u.useState)(!1),Ya=Object(l.a)(Ka,2),za=Ya[0],Qa=Ya[1],Ja=Object(u.useState)(!1),Xa=Object(l.a)(Ja,2),qa=Xa[0],Za=Xa[1],$a=Object(u.useState)(He),en=Object(l.a)($a,2),tn=en[0],an=en[1],nn=Object(u.useState)(Ke),rn=Object(l.a)(nn,2),sn=rn[0],on=rn[1],cn=Object(u.useState)([]),ln=Object(l.a)(cn,2),un=ln[0],dn=ln[1],mn=Object(u.useState)({}),_n=Object(l.a)(mn,2),En=_n[0],bn=_n[1],fn=Object(u.useState)({title:"",subtitle:"",type:"",showModal:!1}),pn=Object(l.a)(fn,2),hn=pn[0],On=pn[1],vn=Object(u.useState)(ne.BD_ITEMS_DEFAULT_PAGINATION.offset),Nn=Object(l.a)(vn,2),In=Nn[0],gn=Nn[1],Dn=Object(u.useState)(!1),Cn=Object(l.a)(Dn,2),An=Cn[0],Sn=Cn[1],Tn=Object(u.useState)([]),xn=Object(l.a)(Tn,2),jn=xn[0],yn=xn[1],Rn=Object(u.useState)([]),wn=Object(l.a)(Rn,2),Ln=wn[0],Mn=wn[1],kn=jn.includes(y),Bn=Ln.includes(y),Pn=P.approval_level_status===f.a.NEEDS_FIRST_LEVEL,Fn=P.approval_level_status===f.a.NEEDS_SECOND_LEVEL,Vn=An?kn&&Pn||Bn&&Fn:j,Un=R===b.a.Philippines,Wn="NEEDS_USER_VALIDATION"===P.validation_status||"NEEDS_VALIDATION"===P.status;Object(u.useEffect)((function(){de(!0),Yn(),Un?Xn():Jn()}),[]),Object(u.useEffect)((function(){clearTimeout(te),ae(setTimeout((function(){(!Object(E.isNull)(q)||""===q)&&("NEEDS_APPROVAL"===P.status?Or():dr())}),400))}),[q]),Object(u.useEffect)((function(){Zn();var e=tn.lastId,t=tn.hasNext,a=tn.bdItems;!Object(E.isEmpty)(e)&&t&&Object(E.isEmpty)(a)&&vr("nv",!0)}),[tn.bdItems,sn.bdItems]),Object(u.useEffect)((function(){ue&&Gn()}),[v]),Object(u.useEffect)((function(){Un&&P.id&&fr()}),[P.id]);var Gn=function(){var e,t;p.location.state&&p.location.state.isFromTransactions?(e=ne.PATH.TRANSACTIONS_NEW,t={isFromDetailsPage:!0}):(e=ne.PATH.BATCH_DISBURSEMENTS,t={isFromDetailsPage:!0,activeTab:p.location.state.activeTab}),p.push({pathname:e,state:t})},Hn=function(e,t,a,n,r){On({title:e,subtitle:t,type:a,showModal:!0,additionalContent:n,handleConfirm:r})},Kn=function(){var e=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Yt(!1),p.push({pathname:ne.PATH.BATCH_DISBURSEMENTS,state:{activeTab:1,isFromDetailsPage:!0,refetch:!0,afterApprove:!0}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Yn=function(){var e=Object(c.a)(o.a.mark((function e(){var n,r,c,l,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.params.id,H(!0),be(""),e.next=5,a.axiosGet(ne.ENDPOINTS.BATCH_DISBURSEMENTS(n)[R]);case 5:if(r=e.sent,c=r.error_code,l=[],Un||(l=r.batch_disbursement_items_need_confirmation),!c){e.next=13;break}return H(!1),be(t("errorMessages:unexpectedError")),e.abrupt("return");case 13:u=Ce(r,Un),V(Object(s.a)(Object(s.a)({},P),u)),dn(l),H(!1),zn(u,Un);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),zn=function(e,t){var a="NEEDS_APPROVAL"===e.status,n=t&&"NEEDS_VALIDATION"===e.status,r=a&&"NEEDS_USER_VALIDATION"===e.validation_status;n||r?Qn():a?(Or(),jr()):dr()},Qn=function(){vr("nv"),vr("validated")},Jn=function(){var e=Object(c.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.axiosGet(ne.ENDPOINTS.AVAILABLE_DISBURSEMENTS_BANKS);case 2:if(!(t=e.sent).error_code){e.next=5;break}return e.abrupt("return");case 5:n=Object(E.sortBy)(t,(function(e){return e.code})),va(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xn=function(){var e=Object(c.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.axiosGet(ne.ENDPOINTS.DISBURSEMENT_CHANNELS);case 2:if(!(t=e.sent).error_code){e.next=5;break}return e.abrupt("return");case 5:n=Object(E.sortBy)(t,(function(e){return e.channel_code})),Da(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qn=function(e,t,a){return Object(r.a)(e).map((function(e){return e.id===t.id?Object(s.a)(Object(s.a)({},e),a):e}))},Zn=function(){var e=P.total_uploaded_amount,t=P.total_uploaded_count,a=P.total_needs_user_validation_amount,n=P.total_needs_user_validation_count,r=e-a,s=t-n,i=tn.bdItems,o=tn.lastId,c=tn.nonEditedItems,l=sn.bdItems,u=function(e,t){var a=e.findIndex((function(e){return e.id===t}));return a>-1?e.slice(a+1):e}(un,o),d=a-Object(E.sumBy)(c,(function(e){return parseFloat(e.amount||0)})),m=n-c.length,_=Object(E.sumBy)(i,(function(e){return parseFloat(e.amount||0)})),b=i.length+m,f=_+d,p=s+l.length,h=r+Object(E.sumBy)(l,(function(e){return parseFloat(e.amount)}));dn(u),bn({totalNeedsValidationAmount:f,totalNeedsValidationCount:b,totalValidatedAmount:h,totalValidatedCount:p})},$n=function(e,t){return Object(r.a)(e).map((function(e){return Object(s.a)(Object(s.a)({},e),t)}))},er=function(e,t){switch(e){case"validated":on((function(e){return Object(s.a)(Object(s.a)({},e),t)}));break;case"nv":an((function(e){return Object(s.a)(Object(s.a)({},e),t)}))}},tr=function(e){var t,a=function(e,t){var a=e.need_attention_fields,n={},r=[{name:"amount",errorField:"AMOUNT"},{name:"account_holder_name",errorField:"ACCOUNT_NAME"},{name:"account_number",errorField:"ACCOUNT_NUMBER"},{name:"description",errorField:"DESCRIPTION"}];t?r.push({name:"channel_code",errorField:"CHANNEL_CODE"}):r.push({name:"bank_code",errorField:"BANK_CODE"}),a.forEach((function(e){n[e.field_name]=e}));for(var s=0,i=0;i<r.length;i++){var o=r[i],c=o.name,l=o.errorField;(Object(E.isUndefined)(e[c])||""===e[c])&&(n[l]=ne.EMPTY_FIELDS_ERROR[l],s++)}return{emptyCount:s,need_attention_fields:Object.values(n)}}(e,Un),n=a.emptyCount,r=a.need_attention_fields,s=tn.bdItems;if(n>0)return t=qn(s,e,{need_attention_fields:r}),void er("nv",{bdItems:t});e.user_validation_status="PENDING",t=qn(s,e,{isEditing:!1,isValidating:!0,need_attention_fields:[]}),er("nv",{bdItems:t}),nr(e)},ar=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,r,s,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.params.id,r=Object(E.omit)(t,["isValidating","isEditing"]),!Un){e.next=10;break}return c={batch_disbursement_items:Ve([r],Un)},e.next=6,a.axiosPost(ne.ENDPOINTS.VALIDATE_ALL_BD_ITEMS(n)[R],c);case 6:l=e.sent,s=Fe(l,R)[0],e.next=13;break;case 10:return e.next=12,a.axiosPost(ne.ENDPOINTS.VALIDATE_BD_ITEM(n,t.id),r);case 12:s=e.sent;case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nr=function(){var e=Object(c.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=setInterval(Object(c.a)(o.a.mark((function e(){var n,r,i,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ar(t);case 2:n=e.sent,r=n.user_validation_status,i="PENDING"===r,c=tn.bdItems,l=qn(c,n,Object(s.a)(Object(s.a)({},n),{},{isEditing:!1,isValidating:i})),i||(clearInterval(a),er("nv",{bdItems:l}),rr([n]));case 8:case"end":return e.stop()}}),e)}))),5e3);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rr=function(e){for(var a=e.length>1,n=tn.bdItems,i=sn.bdItems,o=[],c=[],l=0;l<e.length;l++){var u=e[l],d=u.user_validation_status,m=u.status;if("VALID"===d||"PENDING"===m)Oe(e[l])?c.push(e[l]):o.push(e[l]);else c.push(e[l])}var _,E=[].concat(o).map((function(e){return e.id})),b=Object(r.a)(n).filter((function(e){return!E.includes(e.id)})),f=[].concat(o).map((function(e){return Object(s.a)(Object(s.a)({},e),{},{isValidating:!1,isEditing:!1})}));a?_=c:_=tn.selectedItems.filter((function(e){return!E.includes(e.id)}));b.length<n.length&&(er("nv",{bdItems:b,selectedItems:_}),er("validated",{bdItems:[].concat(Object(r.a)(f),Object(r.a)(i))}),g({type:"success",message:t("successfullyValidated",{count:f.length})}))},sr=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,r,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.params.id,r={batch_disbursement_items:t},e.next=4,a.axiosPost(ne.ENDPOINTS.VALIDATE_ALL_BD_ITEMS(n)[R],r);case 4:return s=e.sent,c=Fe(s,Un),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ir=function(){var e=Object(c.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ta(!0),a=Ve(a),n=setInterval(Object(c.a)(o.a.mark((function e(){var r,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sr(a);case 2:if(!(r=e.sent).error_code){e.next=7;break}return Hn(t("batchDisbursementsDetails:validateAllIssuesError"),t("errorMessages:unexpectedError"),"danger"),clearInterval(n),e.abrupt("return");case 7:s=De(r),i=$n(r,{isValidating:!s,isEditing:!1}),er("nv",{bdItems:i}),s&&(clearInterval(n),rr(i),Ta(!1));case 11:case"end":return e.stop()}}),e)}))),5e3);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),or=function(){var e=Object(c.a)(o.a.mark((function e(){var n,s,c,l,u,d,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ra(!0),n=i.params.id,s=sn.bdItems,c=tn.bdItems,l=[].concat(Object(r.a)(s),Object(r.a)(c),Object(r.a)(un)),u=Ve(l,Un),d={batch_disbursement_items:u.map((function(e){return Object(E.omit)(e,["isValidating","isEditing"])}))},e.next=9,a.axiosPost(ne.ENDPOINTS.CONFIRM_VALIDATE_BATCH_DISBURSEMENT_ITEMS(n)[R],d);case 9:if(m=e.sent,Ra(!1),Ha(!1),!m.error_code){e.next=15;break}return Hn(t("batchDisbursementsDetails:submitIssuesError"),Object(Ue.f)(m.error_code,t),"danger"),e.abrupt("return");case 15:p.push(ne.PATH.BATCH_DISBURSEMENTS);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),cr=function(e,t,a){var r=tn.bdItems,i=tn.issuesBeforeEdit,o=e.id,c=r.map((function(r){if(r.id===o)switch(a){case"edit":return er("nv",{issuesBeforeEdit:Object(s.a)(Object(s.a)({},i),{},Object(n.a)({},o,e))}),Object(s.a)(Object(s.a)({},r),{},{isEditing:t});case"cancel":return Object(s.a)(Object(s.a)({},i[o]),{},{isEditing:!1});default:return}return r}));er("nv",{bdItems:c})},lr=function(e,t,a){var i=tn.bdItems,o=Object(r.a)(i).map((function(r){return r.id===e.id?Object(s.a)(Object(s.a)({},r),{},Object(n.a)({},t,a)):r}));er("nv",{bdItems:o})},ur=function(e){Va(!0),fa(e.id)},dr=function(){var e=Object(c.a)(o.a.mark((function e(n){var c,l,u,d,m,_,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return be(""),c=i.params.id,(l=Object(s.a)({},ge)).errorMessage="",l.isLoading=!0,u=In,ie?(l.data=[],u=ne.BD_ITEMS_DEFAULT_PAGINATION.offset):n&&(l.isLoading=!1,l.isLoadingMore=!0,u+=ne.BD_ITEMS_DEFAULT_PAGINATION.limit),gn(u),Se(l),d={limit:ne.BD_ITEMS_DEFAULT_PAGINATION.limit},!ie&&ge.lastId&&(d.last_id=ge.lastId),q&&(d.search_query=q),Un&&(d.statuses=ne.STATUSES.BD_ITEMS,d.offset=u,delete d.last_id),e.next=15,a.axiosGet(ne.ENDPOINTS.BD_ITEMS(c)[R],d);case 15:if(!(m=e.sent).error_code){e.next=20;break}return oe(!1),be(t("errorMessages:unexpectedError")),e.abrupt("return");case 20:_=m.has_next,b=m.docs,(l=Object(s.a)({},ge)).data=ie?Object(r.a)(b):[].concat(Object(r.a)(l.data),Object(r.a)(b)),l.isLoading=!1,l.isLoadingMore=!1,l.hasNext=_,l.lastId=b.length>0&&Object(E.last)(b).id,Se(l),oe(!1);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mr=function(e){e.preventDefault(),oe(!0),Z(e.target.value)},_r=function(){var e=Object(c.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q(!0),e.next=3,a.axiosPost(ne.ENDPOINTS.MARK_COMPLETE_BD(P.id));case 3:if(n=e.sent,Q(!1),!n.error_code){e.next=8;break}return Hn(t("markAsCompleteError"),t("errorMessages:unexpectedError"),"danger"),e.abrupt("return");case 8:Hn(t("congrats"),t("yourBdHasBeenMarked"),"success"),Yn();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Er=function(){var e=Object(c.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qe(!0),Ze(!0),it(t("preparingExportReceipt")),e.next=5,a.axiosPost(ne.ENDPOINTS.EXPORT_BD_PAYMENT_PROOF_BY_ID(P.id,JSON.stringify(Re)));case 5:n=e.sent,Ze(!1),it(""),n.error_code?Hn(t("exportFailed"),"","danger"):Hn(t("receiptExported"),"","success",wr),Qe(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),br=function(){var e=Object(c.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qe(!0),Ze(!0),it(t("preparingExportReceipt")),e.next=5,a.axiosPost(ne.ENDPOINTS.EXPORT_BD_PAYMENT_PROOF(P.id));case 5:n=e.sent,Ze(!1),it(""),n.error_code?Hn(t("exportFailed"),"","danger"):Hn(t("receiptExported"),"","success",wr),Qe(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fr=function(){var e=Object(c.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.axiosGet(ne.ENDPOINTS.DOWNLOAD_PH_BD(P.id));case 2:(n=e.sent).error_code?g({type:"error",message:t("GET_PH_REPORT_ERROR")}):ve(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pr=function(){var e=Object(c.a)(o.a.mark((function e(n){var r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Un){e.next=4;break}return Hn(t("reportDownloaded"),"","success"),window.location=he[ne.PH_DOWNLOAD_REPORT_FIELD[n]],e.abrupt("return");case 4:at(!0),Ze(!0),it(t("preparingReportDownload")),e.t0=n,e.next="ORIGINAL"===e.t0?10:"ALL_TRANSACTIONS"===e.t0?12:"COMPLETED"===e.t0?14:"ISSUES"===e.t0?16:18;break;case 10:return r=ne.ENDPOINTS.DOWNLOAD_BD_ORIGINAL(P.id),e.abrupt("break",19);case 12:return r=ne.ENDPOINTS.DOWNLOAD_BD_ALL_TRANSACTIONS(P.id),e.abrupt("break",19);case 14:return r=ne.ENDPOINTS.DOWNLOAD_BD_ALL_COMPLETED(P.id),e.abrupt("break",19);case 16:return r=ne.ENDPOINTS.DOWNLOAD_BD_ALL_ISSUES(P.id),e.abrupt("break",19);case 18:return e.abrupt("break",19);case 19:return e.next=21,a.axiosGet(r);case 21:s=e.sent,Ze(!1),it(""),s.error_code?Hn(t("downloadFailed"),"","danger"):(Hn(t("reportDownloaded"),"","success"),window.location=s.url),at(!1);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),hr=function(e){e.preventDefault(),ut(!0),At(!1),It(void 0),jt(!1),Et([]),Z(e.target.value),gn(0)},Or=function(){var e=Object(c.a)(o.a.mark((function e(){var n,s,c,l,u,d,m,_,b=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.length>0&&void 0!==b[0]&&b[0],s=i.params.id,ut(!0),jt(!1),Lt(""),c={search_query:q&&q.trim()||void 0,last_id:Nt||void 0},l=In,Un&&(c.statuses=["PENDING"],c.limit=ne.BD_ITEMS_DEFAULT_PAGINATION.limit,delete c.last_id,n&&(l+=ne.BD_ITEMS_DEFAULT_PAGINATION.limit,gn(l),c.offset=l)),e.prev=8,e.next=11,a.axiosGet(ne.ENDPOINTS.BD_ITEMS(s)[R],c);case 11:if(!(u=e.sent).error_code){e.next=14;break}throw u;case 14:ht(Ae()),m=(d=u).docs,_=d.has_next,Et([].concat(Object(r.a)(_t),Object(r.a)(m))),At(_),It(m.length>0&&Object(E.last)(m).id),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(8),jt(!0),Lt(Object(Ue.f)(e.t0.error_code,t));case 25:ut(!1),Pt(!1);case 27:case"end":return e.stop()}}),e,null,[[8,21]])})));return function(){return e.apply(this,arguments)}}(),vr=function(){var e=Object(c.a)(o.a.mark((function e(c){var l,u,d,m,_,b,f,p,h,O,v,N,I,g,D,C,A,S,T=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=T.length>1&&void 0!==T[1]&&T[1],u=i.params.id,_=(m=(d="validated"===c)?sn:tn).lastId,b=m.bdItems,f=m.nonEditedItems,er(c,{isFetching:!l,isLoadingMore:l,errorMessage:""}),e.prev=5,h={Indonesia:{status:d?["PENDING"]:["NEEDS_NAME_CONFIRMATION"]},Philippines:{statuses:d?["PENDING"]:["NEEDS_VALIDATION"]}},O=In[c]||0,v={limit:ne.BD_ITEMS_DEFAULT_PAGINATION.limit,last_id:_||void 0},v=Object(s.a)(Object(s.a)({},v),h[R]),Un&&(delete v.last_id,l&&(O+=ne.BD_ITEMS_DEFAULT_PAGINATION.limit,gn(Object(s.a)(Object(s.a)({},In),{},Object(n.a)({},c,O))),v.offset=O)),e.next=13,a.axiosGet(ne.ENDPOINTS.BD_ITEMS(u)[R],v);case 13:if(!(p=e.sent).error_code){e.next=16;break}throw p;case 16:I=(N=p).docs,g=N.has_next,I=Fe(I,Un),D=d?b:[].concat(Object(r.a)(b),Object(r.a)(I)),C=[].concat(Object(r.a)(f),Object(r.a)(I)),A=g,S=I.length>0&&Object(E.last)(I).id,er(c,{bdItems:D,hasNext:A,lastId:S,isFetching:!1,isLoadingMore:!1,nonEditedItems:C}),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(5),er(c,{errorMessage:Object(Ue.f)(e.t0.error_code,t),isFetching:!1,isLoadingMore:!1});case 28:case"end":return e.stop()}}),e,null,[[5,25]])})));return function(t){return e.apply(this,arguments)}}(),Nr=function(){Pt(!0),Or(!0)},Ir=function(e,t){var a=tn.selectedItems,n=Object(r.a)(a);t?n.push(e):n=n.filter((function(t){return t.id!==e.id})),er("nv",{selectedItems:n})},gr=function(e){var t=tn.bdItems;er("nv",{selectedItems:e?t:[]})},Dr=function(){var e=tn.selectedItems,t=tn.bdItems;e.length===t.length?function(){var e=tn.bdItems,t=$n(e,{isValidating:!0,isEditing:!1,user_validation_status:"PENDING",need_attention_fields:[]});er("nv",{bdItems:t}),ir(t)}():Cr(e,t)},Cr=function(e,t){var a=Object(r.a)(e),n=Object(r.a)(t);ka(!0);for(var i={},o=0;o<n.length;o++){var c=n[o];c.index=o,i[c.id]=c}for(var l=0;l<a.length;l++){var u=i[a[l].id],d=Object(s.a)(Object(s.a)({},u),{},{user_validation_status:"PENDING",isEditing:!1,isValidating:!0,need_attention_fields:[]});n.splice(u.index,1,d),a.splice(l,1,d)}er("nv",{bdItems:n,selectedItems:a}),Ar(a,n,a)},Ar=function(){var e=Object(c.a)(o.a.mark((function e(t,n,r){var c,l,u,d,m,_,b,f,p,h,O,v,N,I,g;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=i.params.id,!Un){e.next=8;break}return u={batch_disbursement_items:t},e.next=5,a.axiosPost(ne.ENDPOINTS.VALIDATE_ALL_BD_ITEMS(c)[R],u);case 5:l=e.sent,e.next=12;break;case 8:return d=t.map((function(e){return ar(e)})),e.next=11,Promise.all(d);case 11:l=e.sent;case 12:for(m=Fe(l,Un),_={},b=0;b<n.length;b++)f=tn.bdItems,(p=f[b]).index=b,_[p.id]=p;for(h=0;h<m.length;h++)O=m[h],v="PENDING"===O.user_validation_status,N=_[O.id],I=Object(s.a)(Object(s.a)(Object(s.a)({},N),O),{},{isEditing:!1,isValidating:v}),n.splice(N.index,1,I),t.splice(h,1,I);er("nv",{bdItems:n,selectedItems:t}),g=t.filter((function(e){return"PENDING"===e.user_validation_status})),Object(E.isEmpty)(g)||(er("nv",{selectedItems:g}),Ar(g,n,r)),rr(r),ka(!1);case 21:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Sr=function(){var e=Object(c.a)(o.a.mark((function e(){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ca(!0),e.prev=1,e.next=4,a.axiosPost(ne.ENDPOINTS.PIN_TOKEN,{pin:na});case 4:if(!(n=e.sent).error_code){e.next=7;break}throw n;case 7:Tr(n.pin_authorization_token),e.next=16;break;case 10:e.prev=10,e.t0=e.catch(1),r=Object(Ue.f)(e.t0.error_code,t,{action:t("commonWords:submitPin")}),ma(r),ra(""),ca(!1);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Tr=function(){var e=Object(c.a)(o.a.mark((function e(n){var r,s,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xt(!0),r=i.params.id,e.prev=2,c={batch_disbursement_ids:[r]},l={"X-PIN-AUTHORIZATION-TOKEN":n},e.next=7,a.axiosPost(ne.ENDPOINTS.APPROVE_BATCH_DISBURSEMENTS[R],c,{},l);case 7:if(s=e.sent,ea(!1),ca(!1),ra(""),ma(""),!s.error_code){e.next=14;break}throw s;case 14:e.next=21;break;case 16:return e.prev=16,e.t0=e.catch(2),Xt(!1),"BATCH_DISBURSEMENT_UNVALIDATED_ERROR"===e.t0.error_code?Hn(t("commonWords:failed"),yr,"danger"):Hn(t("commonWords:failed"),Object(Ue.f)(e.t0.error_code,t),"danger"),e.abrupt("return");case 21:Xt(!1),Yt(!0);case 23:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}(),xr=function(){var e=Object(c.a)(o.a.mark((function e(){var n,r,s,i,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.axiosGet(ne.ENDPOINTS.BD_CONFIGURATION);case 2:if(n=e.sent,!(r=n.error_code)){e.next=7;break}return"BATCH_DISBURSEMENT_CONFIGURATION_NOT_FOUND_ERROR"!==r&&g({type:"error",message:t("loadMultiLevelApprovalError")}),e.abrupt("return");case 7:for(s=n.approval_configurations,i=0;i<s.length;i++)c=s[i],l=c.user_ids,0===c.approval_index?yn(l):Mn(l);Sn(!Object(E.isEmpty)(s));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),jr=function(){var e={environment:M,name:"showMultiLevelApproval"},t={key:L,country:R,custom:{user_email:m.email,entity:S}};Object(Ue.h)(e,t,(function(e){e&&xr()}))},yr=d.a.createElement("p",null,t("batchDisbursements:approveFail")," (",d.a.createElement("img",{class:"w-18",src:"/images/icons/ic-success.svg",alt:"success_icon"}),")"),Rr=function(e){return d.a.createElement("div",{className:"confirmation-modal-additional-content"},d.a.createElement("p",{className:"font-weight-bold text-fair mb-0"},e,":"," ",d.a.createElement("span",{className:"font-weight-bold text-fair color-danger"},tn.selectedItems.length)))},wr=d.a.createElement("div",{className:"export-bd-success-box"},d.a.createElement("p",{className:"font-weight-bold mb-0"},t("receiptSentTo")),d.a.createElement("p",{className:"mb-0"},T)),Lr=function(){var e=Object(s.a)({},P),t=tn.bdItems,a=P.total_needs_user_validation_amount,n=P.total_needs_user_validation_count,i=P.total_uploaded_amount,o=P.total_uploaded_count,c=0,l=t.length;return Object(r.a)(t).forEach((function(e){e.isValidating?c=0:e.amount&&(c+=e.amount)})),e.total_uploaded_amount=i+(c-a),e.total_uploaded_count=o+(l-n),e.total_needs_user_validation_amount=a+(c-a),e.total_needs_user_validation_count=n+(l-n),e},Mr=d.a.createElement(d.a.Fragment,null,function(){var e=Lr(),t=e.total_uploaded_count,a=e.total_uploaded_amount,n=d.a.createElement(Me,{needsValidationData:tn,needsValidationSummary:En,validatedData:sn,availableBanks:Oa,availableChannels:ga,onEditIssue:cr,onValidateIssue:tr,onValidateBulkIssues:Dr,onDeleteIssue:ur,isValidatingAllIssues:Sa,handleIssueOnChange:lr,onCheckSelected:Ir,onAllCheckSelected:gr,onDeleteBulkIssues:function(){return Za(!0)},isValidatingBulkIssues:Ma,currency:N,country:R,getNeedsValidationDetailItems:vr,canEdit:x}),r=d.a.createElement(ye,{bdItemsData:_t,totalUploadedCount:t,totalUploadedAmount:a,isLoading:G&&lt,isFetchingBDItems:lt,lastBDItemsFetchTime:pt,updateSearchQuery:hr,searchQuery:q,hasNext:Ct,onClickLoadMore:Nr,isFetchBDItemsError:xt,fetchBDItemsErrorMessage:wt,isLoadingMoreBDItems:Bt,defaultCurrency:N,countryOfOperation:R}),s=d.a.createElement(F,{totalUploaded:P.total_uploaded_count,totalUploadedAmount:P.total_uploaded_amount,totalSuccess:P.total_disbursed_count,totalSuccessAmount:P.total_disbursed_amount,totalFailed:P.total_error_count,totalFailedAmount:P.total_error_amount,isLoading:G,status:P.status,currency:N});return Un&&"NEEDS_VALIDATION"===P.status||"NEEDS_APPROVAL"===P.status&&"NEEDS_USER_VALIDATION"===P.validation_status?n:"NEEDS_APPROVAL"===P.status?r:s}(),!ne.STATUSES.NEEDS_VALIDATION.includes(P.status)&&d.a.createElement(Te,{transactionsData:ge.data,isLoading:ge.isLoading,selectedItems:Re,setSelectedItems:we,isLoadingMore:ge.isLoadingMore,onClickLoadMore:function(){return dr(!0)},hasNext:ge.hasNext,searchQuery:q,setSearchQuery:mr,onExportSelected:Er,onExportAllCompleted:br,isExportLoading:ze,downloadAllCompleted:function(){return pr("COMPLETED")},downloadAllIssues:function(){return pr("ISSUES")},downloadOriginal:function(){return pr("ORIGINAL")},downloadAllTransactions:function(){return pr("ALL_TRANSACTIONS")},phReportURL:he,isDownloading:tt,status:P.status,countryOfOperation:R,currency:N})),kr=d.a.createElement(h.a,{showModal:qe,handleClose:function(){Ze(!1)}},d.a.createElement("p",{className:"my-5 font-weight-bold"},st));return d.a.createElement(d.a.Fragment,null,d.a.createElement(w,{batchDisbursement:P,goBack:function(){Wn?Qa(!0):Gn()},isLoading:G,isApproving:Jt,isSubmitIssuesDisabled:Ma,isSubmittingIssues:ya,isMarkButtonLoading:z,canApprove:!lt&&Vn,onClickApprove:function(){return Wt(!0)},onClickSubmitIssues:function(){return Ha(!0)},onClickMarkAsComplete:_r,showSubmitApproval:Wn,canEdit:x,countryOfOperation:R,dateFormat:A}),G||Ee?d.a.createElement(O.z,{isLoading:G,loadingText:t("loadingBDItems"),isError:!Object(E.isEmpty)(Ee),errorText:Ee}):Mr,d.a.createElement(C,{showModal:Fa,onDeleteClick:function(){var e=tn.bdItems,t=tn.selectedItems,a=e.filter((function(e){return e.id!==ba})),n=t.filter((function(e){return e.id!==ba}));er("nv",{bdItems:a,selectedItems:n}),Va(!1)},handleClose:function(){return Va(!1)}}),d.a.createElement(D,{showModal:Ga,handleClose:function(){return Ha(!1)},isSubmitting:ya,onSubmitClick:or,isAllValidated:Object(E.isEmpty)(tn.bdItems)}),d.a.createElement(Pe,{showModal:za,handleClose:function(){return Qa(!1)},onConfirmClick:Gn}),d.a.createElement(O.j,Object.assign({},hn,{handleClose:function(){On({title:"",subtitle:"",type:"",showModal:!1,additionalContent:"",handleConfirm:null})}})),kr,d.a.createElement(O.j,{showModal:qa,handleClose:function(){return Za(!1)},title:t("commonWords:wait"),subtitle:t("bulkDeleteConfirmation"),type:"info",additionalContent:Rr(t("selectedTransactions")),withCancel:!0,buttonText:t("commonWords:delete"),handleConfirm:function(){var e=tn.selectedItems,a=tn.bdItems,n=e.map((function(e){return e.id})),r=a.filter((function(e){return!n.includes(e.id)}));er("nv",{bdItems:r,selectedItems:[]}),Za(!1),Hn(t("transactionsDeleted"),null,"success",Rr(t("deletedTransactions")))}}),d.a.createElement(ke,{showModal:Ut,handleClose:function(){return Wt(!1)},handleConfirm:function(){Wt(!1),ea(!0)},summaryData:Lr,defaultCurrency:N}),d.a.createElement(Be,{showModal:Kt,handleClose:Kn,summaryData:Lr,defaultCurrency:N}),d.a.createElement(O.e,{history:p,isPinModalOpen:$t,isMobileView:I,isPinSet:m.is_pin_set,onSubmit:Sr,handleClose:function(){ea(!1),ra(""),ma("")},onChangeMobile:function(e){ma(""),ra(e.target.value)},errorMessage:da,isLoading:oa,pin:na,setPin:function(e){ma(""),ra(e)}}))})))},1573:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"e",(function(){return c}));var n=function(e,t){return"IDR"!==t&&t?e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"):e.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")},r=function(e){return e.toLocaleString("en-US").replace(/,/g,".")},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.toLocaleString("en-US",{minimumFractionDigits:t?2:0})},i=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=s(e,n),i="IDR"===t?r.replace(/,/g,"."):r,o=a?"".concat(t," "):"",c="".concat(o).concat(i);return c},o=function(e,t,a){var n=t?i(e,t):s(e),r=n.split("-").join(""),o="".concat((null!=a?a:e>0)?"+ ":"- "," ").concat(r);return 0===e&&(o=n),o},c=function(e){return"".concat((100*e).toFixed(2),"%")}},1575:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(a(0)),r=o(a(2)),s=o(a(6)),i=o(a(1576));function o(e){return e&&e.__esModule?e:{default:e}}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(1577);var l=function(e){var t,a=e.text,r=e.iconLeft,o=e.customCss,l=e.variant,u=(0,s.default)((c(t={"status-pill":!0},"status-pill-".concat(l),l),c(t,o,o),t));return n.default.createElement(i.default,{text:a,iconLeft:r,customCss:u})};l.propTypes={text:r.default.string,iconLeft:r.default.any,variant:r.default.oneOf(["success","danger","warning","first-level","second-level"]),customCss:r.default.string};var u=l;t.default=u},1576:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),e.exports=a(467)},1577:function(e,t,a){},1758:function(e,t,a){},1881:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={NEEDS_FIRST_LEVEL:"NEEDS_FIRST_LEVEL",NEEDS_SECOND_LEVEL:"NEEDS_SECOND_LEVEL",NEEDS_APPROVAL:"NEEDS_APPROVAL"}},1882:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"e",(function(){return r})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return o}));var n={INSUFFICIENT_BALANCE:"disbursementErrorCodes:titleInsufficientBalance",UNKNOWN_BANK_NETWORK_ERROR:"disbursementErrorCodes:titleUnknownBankError",TEMPORARY_BANK_NETWORK_ERROR:"disbursementErrorCodes:titleTemporaryBankNetworkError",SWITCHING_NETWORK_ERROR:"disbursementErrorCodes:titleSwitchingNetworkError",INVALID_DESTINATION:"disbursementErrorCodes:titleInvalidDestination",REJECTED_BY_BANK:"disbursementErrorCodes:titleRejectedByBank",TRANSFER_ERROR:"disbursementErrorCodes:titleTransferError",TEMPORARY_TRANSFER_ERROR:"disbursementErrorCodes:titleTemporaryTransferError",ACCOUNT_BLACKLISTED_ERROR:"disbursementErrorCodes:titleInvalidDestination",EMPTY_ACCOUNT_NAME_ERROR:"disbursementErrorCodes:titleEmptyAccountNameError",DEFAULT:"disbursementErrorCodes:titleDefaultError"};function r(e){return n[e in n?e:"DEFAULT"]}var s={INSUFFICIENT_BALANCE:"disbursementErrorCodes:expInsufficientBalance",UNKNOWN_BANK_NETWORK_ERROR:"disbursementErrorCodes:expUnknownBankError",TEMPORARY_BANK_NETWORK_ERROR:"disbursementErrorCodes:expTemporaryBankNetworkError",SWITCHING_NETWORK_ERROR:"disbursementErrorCodes:expSwitchingNetworkError",INVALID_DESTINATION:"disbursementErrorCodes:expInvalidDestination",REJECTED_BY_BANK:"disbursementErrorCodes:expRejectedByBank",TRANSFER_ERROR:"disbursementErrorCodes:expTransferError",TEMPORARY_TRANSFER_ERROR:"disbursementErrorCodes:expTemporaryTransferError",EMPTY_ACCOUNT_NAME_ERROR:"disbursementErrorCodes:expEmptyAccountNameError",DEFAULT:"disbursementErrorCodes:expDefaultError"},i={INSUFFICIENT_BALANCE:"disbursementErrorCodes:retryInsufficientBalance",UNKNOWN_BANK_NETWORK_ERROR:"disbursementErrorCodes:retryUnknownBankError",TEMPORARY_BANK_NETWORK_ERROR:"disbursementErrorCodes:retryTemporaryBankNetworkError",SWITCHING_NETWORK_ERROR:"disbursementErrorCodes:retrySwitchingNetworkError",INVALID_DESTINATION:"disbursementErrorCodes:retryInvalidDestination",REJECTED_BY_BANK:"disbursementErrorCodes:retryRejectedByBank",TRANSFER_ERROR:"disbursementErrorCodes:retryTransferError",TEMPORARY_TRANSFER_ERROR:"disbursementErrorCodes:retryTemporaryTransferError",DEFAULT:"disbursementErrorCodes:retryDefaultError"},o={1:"callbackErrors:errorCode100",3:"callbackErrors:errorCode300",4:"callbackErrors:errorCode400",5:"callbackErrors:errorCode500"}},1943:function(e,t){e.exports={PATH:{BATCH_DISBURSEMENTS:"/batch_disbursements",TRANSACTIONS_NEW:"/transactions-new"},ENDPOINTS:{BD_ITEMS:function(e){return{Indonesia:"/api/batch_disbursements/".concat(e,"/batch_disbursement_items"),Philippines:"/api/batch_disbursements_new/".concat(e,"/batch_disbursement_items")}},BATCH_DISBURSEMENTS:function(e){return{Indonesia:"/api/batch_disbursements/".concat(e),Philippines:"/api/batch_disbursements_new/".concat(e)}},APPROVE_BATCH_DISBURSEMENTS:{Indonesia:"/api/batch_disbursements/approve!",Philippines:"/api/batch_disbursements_new/approve"},VALIDATE_BD_ITEM:function(e,t){return"/api/batch_disbursements/".concat(e,"/batch_disbursement_items/").concat(t,"/validate!")},VALIDATE_ALL_BD_ITEMS:function(e){return{Indonesia:"/api/batch_disbursements/".concat(e,"/batch_disbursement_items/validate!"),Philippines:"/api/batch_disbursements_new/".concat(e,"/batch_disbursement_items/validate!")}},CONFIRM_VALIDATE_BATCH_DISBURSEMENT_ITEMS:function(e){return{Indonesia:"/api/batch_disbursements/".concat(e,"/batch_disbursement_items/confirm_validation!"),Philippines:"/api/batch_disbursements_new/".concat(e,"/batch_disbursement_items/confirm_validation!")}},AVAILABLE_DISBURSEMENTS_BANKS:"/api/available_disbursements_banks",MARK_COMPLETE_BD:function(e){return"/api/batch_disbursements/".concat(e,"/manually_complete!")},EXPORT_BD_PAYMENT_PROOF_BY_ID:function(e,t){return"/api/batch_disbursements/".concat(e,"/payment_proofs_request?batch_disbursement_item_ids=").concat(t)},EXPORT_BD_PAYMENT_PROOF:function(e){return"/api/batch_disbursements/".concat(e,"/payment_proofs_request/completed_batch_disbursement_items")},DOWNLOAD_BD_ORIGINAL:function(e){return"/api/batch_disbursements/".concat(e,"/uploaded_file")},DOWNLOAD_BD_ALL_TRANSACTIONS:function(e){return"/api/batch_disbursements/".concat(e,"/finished_transactions_file")},DOWNLOAD_BD_ALL_COMPLETED:function(e){return"/api/batch_disbursements/".concat(e,"/completed_transactions_file")},DOWNLOAD_BD_ALL_ISSUES:function(e){return"/api/batch_disbursements/".concat(e,"/failed_transactions_file")},DOWNLOAD_PH_BD:function(e){return"/api/batch_disbursements_new/".concat(e,"/reports")},PIN_TOKEN:"/api/pin_authorization_tokens",DISBURSEMENT_CHANNELS:"/api/disbursement_channels",BD_CONFIGURATION:"/api/batch_disbursements_configuration"},BD_ITEM_FIELD_NAMES:{amount:"AMOUNT",bank_code:"BANK_CODE",account_holder_name:"ACCOUNT_NAME",account_number:"ACCOUNT_NUMBER",description:"DESCRIPTION",email:"EMAIL",email_cc:"EMAIL_CC",email_bcc:"EMAIL_BCC",reference_id:"REFERENCE_ID",channel_code:"CHANNEL_CODE"},EMPTY_FIELDS_ERROR:{AMOUNT:{field_name:"AMOUNT",failure_code:"EMPTY_AMOUNT_ERROR",failure_message:"Amount cannot be empty",message_type:"ISSUE"},BANK_CODE:{field_name:"BANK_CODE",failure_code:"EMPTY_BANK_CODE_ERROR",failure_message:"Bank code cannot be empty",message_type:"ISSUE"},ACCOUNT_NAME:{field_name:"ACCOUNT_NAME",failure_code:"EMPTY_ACCOUNT_NAME_ERROR",failure_message:"Account name cannot be empty",message_type:"ISSUE"},ACCOUNT_NUMBER:{field_name:"ACCOUNT_NUMBER",failure_code:"EMPTY_ACCOUNT_NUMBER_ERROR",failure_message:"Account number cannot be empty",message_type:"ISSUE"},DESCRIPTION:{field_name:"DESCRIPTION",failure_code:"EMPTY_DESCRIPTION_ERROR",failure_message:"Description cannot be empty",message_type:"ISSUE"}},STATUSES:{NEEDS_VALIDATION:["NEEDS_APPROVAL","NEEDS_VALIDATION"],BD_ITEMS:["VERIFYING","PENDING","NEEDS_VALIDATION","DISBURSING","FAILED","COMPLETED"]},BD_ITEMS_DEFAULT_PAGINATION:{limit:10,offset:0},PH_DOWNLOAD_REPORT_FIELD:{ORIGINAL:"uploaded_transactions_file_url",ALL_TRANSACTIONS:"finished_transactions_file_url",COMPLETED:"completed_transactions_file_url",ISSUES:"failed_transactions_file_url"}}}}]);