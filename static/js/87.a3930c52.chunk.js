(this["webpackJsonpxendit-dashboard-ui"]=this["webpackJsonpxendit-dashboard-ui"]||[]).push([[87],{1533:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(9),c=a.n(r),o=a(24),s=a(19),i=a(12),u=a(0),l=a.n(u),d=a(380),m=a(31),b=a.n(m),f=a(289),h=a.n(f),p=a(1643),O=a.n(p),v=a(1585),j=a.n(v),g=a(1583),C=a.n(g),_=a(1730),k=a.n(_),x=a(49),E=a.n(x),w=a(20),y=a.n(w),S=a(252),M=a.n(S),F=a(149),T=a.n(F),N=a(291),A=a.n(N),D=a(80),Y=["ACTIVE","INACTIVE"],I=["OPEN","CLOSED"],B=function(e){return[{title:e("status"),children:[{type:"ACTIVE",label:e("active")},{type:"INACTIVE",label:e("inactive")}]},{title:e("type"),children:[{type:"OPEN",label:e("open")},{type:"CLOSED",label:e("closed")}]}]},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[{children:e.map((function(e){return{type:e,label:e}}))}]},V="/api/virtual_account_list",W="/api/cva_settings",z="/api/resolution-center/tickets",P="/virtual_accounts/payments",H="/resolution-center",R=function(e){return[{title:e("payments")},{title:e("virtualAccounts")}]},G={issue:{value:"",label:""},amount:"",date:null,additional_information:""},U={title:"",subtitle:"",type:"",showModal:!1},Z=function(e){var t=e.t,a=e.showModal,n=e.handleClose,r=e.handleSubmit,c=e.isLoadingSubmit,o=e.accountNumber,s=e.onChangeIssue,i=e.onChangeAmount,u=e.onChangeDate,d=e.onChangeInfo,m=e.errorMessageAmount,b=e.vaIssueForm,f=b.issue,h=b.amount,p=b.date,O=b.additional_information,v=function(e){return[{value:e("wrongAmountOfMoney"),label:e("wrongAmountOfMoney")},{value:e("paidMoreThanOnce"),label:e("paidMoreThanOnce")},{value:e("statusNotChanged"),label:e("statusNotChanged")},{value:e("others"),label:e("others")}]}(t),j=k()(f,v[v.length-1]),g=!f||!h||!p||c||m,C=l.a.createElement("div",{className:"mt-24 d-flex w-100"},l.a.createElement(y.a,{onClick:n,variant:"ghost",customCss:"w-50 mr-16"},t("commonWords:no")),l.a.createElement(y.a,{onClick:r,disabled:g,isLoading:c,customCss:"w-50"},t("commonWords:yes"))),_=l.a.createElement("div",{className:"zendesk-modal-title"},t("zendeskModalTitle"));return l.a.createElement(E.a,{showModal:a,size:"sm",handleClose:n,closeButton:!0,preserveMobileView:!0,title:_,footer:C},l.a.createElement("div",{className:"text-left"},l.a.createElement("div",{className:"zendesk-detail-box mb-11"},l.a.createElement("p",{className:"text-body-2 mb-04"},t("vaNumber")),l.a.createElement("p",{className:"color-black-400 mb-0"},o)),l.a.createElement(M.a,{value:f,label:t("transactionIssue"),options:v,onChange:s,searchConfig:{enabled:!1},customCss:"mb-11"}),l.a.createElement(T.a,{label:t("transferAmount"),customCss:"mb-11",value:h,helperText:t("transferedFromCust"),onChange:i,errorMessage:h&&m}),l.a.createElement("div",{className:"w-50"},l.a.createElement("div",{className:"input-text-label"},l.a.createElement("span",null,t("dateOfTransfer"))),l.a.createElement(D.m,{defaultValue:p,max:new Date,placeholder:"10/08/2020",date:!0,inputFormat:"DD/MM/YYYY",outputFormat:"YYYY-MM-DD",onChange:u,noShadow:!0})),j&&l.a.createElement(A.a,{label:t("additionalInfo"),value:O,onChange:d,customCss:"mt-11",showCharacterCount:!0,maxLength:400})))},q=a(479),J=a.n(q),Q=a(231),K=a(151),X=a.n(K),$=a(48),ee=function(e){return l.a.createElement(Q.a,{src:"/images/".concat(e.toLowerCase(),"-logo.svg"),width:"65"})},te=function(e){return l.a.createElement("div",{className:"d-flex"},l.a.createElement("p",{className:"mr-2 mb-0 font-weight-700"},e("status")),l.a.createElement(X.a,{size:"sm",content:e("ifInactive")}))},ae=function(e,t){return e.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{reusable:e.is_single_use?t("commonWords:no"):t("commonWords:yes"),type:e.is_closed?t("closed"):t("open"),created:b()(e.created).format($.a.DD_MMM_YYYY),updated:b()(e.updated).format($.a.DD_MMM_YYYY),expiration_date:b()(e.expiration_date).format($.a.DD_MMM_YYYY)})}))},ne=function(e,t){return e.map((function(e){var a=e.is_single_use?t("singleUse"):t("reusable"),r=e.is_closed?t("closed"):t("open");return Object(n.a)(Object(n.a)({},e),{},{status:l.a.createElement("p",{className:"mb-0 mr-24 text-sm color-charcoal font-weight-bold"},e.status),additionalData:l.a.createElement("p",{className:"mb-0 color-ash-dark"},r,", ",a),secondRowContent:l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("p",{className:"mb-0 mr-6 text-sm color-charcoal font-weight-bold"},e.account_number),l.a.createElement(Q.a,{src:"/images/".concat(e.bank_code.toLowerCase(),"-logo.svg"),width:"40",height:"12.51"})),dateContent:{date:b()(e.expiration_date).format($.a.DD_MMM_YYYY),prefix:t("expiresOn")}})}))},re=function(e){return[{dataField:"status",text:te(e),headerStyle:{width:"10%"}},{dataField:"bank_code",text:e("bank"),formatter:ee,headerStyle:{width:"8%"}},{dataField:"account_number",text:e("vaNumber"),headerStyle:{width:"15%"}},{dataField:"external_id",text:e("referenceID"),headerStyle:{width:"15%"}},{dataField:"type",text:e("type"),headerStyle:{width:"7%"}},{dataField:"reusable",text:e("reusable"),headerStyle:{width:"9%"}},{dataField:"created",text:e("dateCreated"),headerStyle:{width:"11%"}},{dataField:"updated",text:e("dateUpdated"),headerStyle:{width:"10%"}},{dataField:"expiration_date",text:e("expires"),headerStyle:{width:"10%"}}]},ce=function(e,t,a){var n=[{field:"external_id",text:e("commonWords:copyReferenceID"),textPressed:e("commonWords:valueCopied"),action:"copy"}];return t&&(n=[].concat(Object(o.a)(n),[{text:e("needHelp"),onClickHandler:function(e){return a(e)}}])),{width:"5%",items:n}},oe=a(189),se=a(468),ie=a(50),ue=a(473),le=a(150),de=(a(2082),$.c.LAST_1_MONTH),me=$.c.TODAY;t.default=Object(d.a)(["fixedVirtualAccountsList","errorMessages","commonWords"])((function(e){var t=e.apiCall,a=t.axiosGet,r=t.axiosPost,d=e.dateFormat,m=e.t,f=e.history,p=e.environment,v=e.business,g=v.environment,_=v.id,k=e.user.email,x=Object(u.useState)(Y),E=Object(i.a)(x,2),w=E[0],y=E[1],S=Object(u.useState)(I),M=Object(i.a)(S,2),F=M[0],T=M[1],N=Object(u.useState)([]),A=Object(i.a)(N,2),q=A[0],Q=A[1],K=Object(u.useState)([]),X=Object(i.a)(K,2),ee=X[0],te=X[1],be=Object(u.useState)(!1),fe=Object(i.a)(be,2),he=fe[0],pe=fe[1],Oe=Object(u.useState)(!1),ve=Object(i.a)(Oe,2),je=ve[0],ge=ve[1],Ce=Object(u.useState)(new Date(de)),_e=Object(i.a)(Ce,2),ke=_e[0],xe=_e[1],Ee=Object(u.useState)(new Date(me)),we=Object(i.a)(Ee,2),ye=we[0],Se=we[1],Me=Object(u.useState)(!1),Fe=Object(i.a)(Me,2),Te=(Fe[0],Fe[1],Object(u.useState)("")),Ne=Object(i.a)(Te,2),Ae=Ne[0],De=Ne[1],Ye=Object(u.useState)(null),Ie=Object(i.a)(Ye,2),Be=Ie[0],Le=Ie[1],Ve=Object(u.useState)(void 0),We=Object(i.a)(Ve,2),ze=We[0],Pe=We[1],He=Object(u.useState)(""),Re=Object(i.a)(He,2),Ge=Re[0],Ue=Re[1],Ze=Object(u.useState)(!1),qe=Object(i.a)(Ze,2),Je=qe[0],Qe=qe[1],Ke=Object(u.useState)(!1),Xe=Object(i.a)(Ke,2),$e=Xe[0],et=Xe[1],tt=Object(u.useState)(!1),at=Object(i.a)(tt,2),nt=at[0],rt=at[1],ct=Object(u.useState)(!1),ot=Object(i.a)(ct,2),st=ot[0],it=ot[1],ut=Object(u.useState)([]),lt=Object(i.a)(ut,2),dt=lt[0],mt=lt[1],bt=Object(u.useState)(!1),ft=Object(i.a)(bt,2),ht=ft[0],pt=ft[1],Ot=Object(u.useState)(!1),vt=Object(i.a)(Ot,2),jt=vt[0],gt=vt[1],Ct=Object(u.useState)({}),_t=Object(i.a)(Ct,2),kt=_t[0],xt=_t[1],Et=Object(u.useState)(G),wt=Object(i.a)(Et,2),yt=wt[0],St=wt[1],Mt=Object(u.useState)(""),Ft=Object(i.a)(Mt,2),Tt=Ft[0],Nt=Ft[1],At=Object(u.useState)(U),Dt=Object(i.a)(At,2),Yt=Dt[0],It=Dt[1],Bt=Object(u.useState)(!1),Lt=Object(i.a)(Bt,2),Vt=Lt[0],Wt=Lt[1],zt=Object(u.useState)(!1),Pt=Object(i.a)(zt,2),Ht=Pt[0],Rt=Pt[1],Gt=Object(u.useState)(""),Ut=Object(i.a)(Gt,2),Zt=Ut[0],qt=Ut[1],Jt="PRODUCTION"===p;Object(u.useEffect)((function(){clearTimeout(Be),Le(setTimeout((function(){(0===Ae.length||Ae.length>2)&&Kt()}),500))}),[Ae]),Object(u.useEffect)((function(){Kt()}),[ke,ye,F,w,q]),Object(u.useEffect)((function(){Xt(),Jt&&Qt()}),[]);var Qt=function(){var e={environment:g,name:"showZendeskVAPayment"},t={key:_,email:k};Object(ie.h)(e,t,(function(e){return pt(e)}))},Kt=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,s,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return et(!0),rt(!1),Ue(""),it(t||!1),n={from:Object(oe.c)(ke,"start"),to:Object(oe.c)(ye,"end"),statuses:w,bank_codes:q,environment:p},1===F.length&&(n.is_closed="CLOSED"===F[0]),Ae&&(n.search_query=Ae.trim(),delete n.from,delete n.to),t&&(n.last_id=ze||void 0),e.prev=8,e.next=11,a(V,n);case 11:if(!(r=e.sent).error_code){e.next=14;break}throw r;case 14:e.next=24;break;case 16:if(e.prev=16,e.t0=e.catch(8),e.t0.error_code!==ue.a.REQUEST_ABORTED){e.next=21;break}return e.abrupt("return");case 21:return Ue(Object(se.a)(e.t0.error_code,m)),et(!1),e.abrupt("return");case 24:if(!h()(r.docs)){e.next=28;break}return rt(!0),et(!1),e.abrupt("return");case 28:i=(s=r).docs,u=s.has_next,mt(t?[].concat(Object(o.a)(dt),Object(o.a)(i)):i),Qe(u),Pe(O()(i).id),et(!1),it(!1);case 34:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(t){return e.apply(this,arguments)}}(),Xt=function(){var e=Object(s.a)(c.a.mark((function e(){var t,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe(!0),ge(!1),e.next=4,a(W);case 4:if(t=e.sent,pe(!1),!t.error_code){e.next=9;break}return ge(!0),e.abrupt("return");case 9:n=t.callback_virtual_account_banks,r=n.filter((function(e){return e.account_block_start&&e.account_block_end})).map((function(e){return e.bank_code})).sort(),te(r),Q(r);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$t=function(e,t){var a=Object(o.a)(e);return e.includes(t)?a=a.filter((function(e){return e!==t})):a.push(t),a},ea=function(e,t,a){It({title:e,subtitle:t,type:a,showModal:!0})},ta=function(e){St((function(t){return Object(n.a)(Object(n.a)({},t),e)}))},aa=function(){var e=Object(s.a)(c.a.mark((function e(){var t,a,n,o,s,i,u,l,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wt(!0),t=yt.issue,a=yt.amount,n=yt.date,o=yt.additional_information,s=kt.id,i=kt.account_number,u={subject:t.value,ticket_type:"issue_virtual_account",snapshot:{transaction_id:s,amount:a,va_number:i,date_of_transfer:n}},o&&(u.snapshot.additional_information=o),e.next=7,r(z,u);case 7:if(l=e.sent,Wt(!1),na(),!l.error_code){e.next=14;break}return d=Object(se.a)(l.error_code,m,{action:j()(m("commonWords:submit"))}),ea(m("commonWords:failed"),d,"danger"),e.abrupt("return");case 14:qt(l.ticket_id),Rt(!0);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),na=function(){St(G),xt({}),gt(!1)},ra=function(e){var t=e.fvaStatuses,a=e.fvaTypes,n=e.fvaBanks,r=e.defaultFVABanks,c=e.isFetchingFVABanks,s=e.isErrorFetchingBanks,i=e.updateFilters,u=e.onCheckAllFilters,d=e.t,m=l.a.createElement(D.w,{selectedFilters:[].concat(Object(o.a)(t),Object(o.a)(a)),onChecked:function(e){return i(e)},filterGroups:B(d),withGrouping:!0,withCheckAll:!0,onCheckAll:u}),b=l.a.createElement(D.w,{selectedFilters:n,onChecked:function(e){return i(e)},filterGroups:L(r),onCheckAll:u,withCheckAll:!0}),f=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return l.a.createElement("div",{className:"bg-white p-2 min-width-100"},d(e?"fetchBanksError":"fetchingBanks"))},h=t.length+a.length;return[l.a.createElement(D.q,{displayText:"".concat(d("statusAndType")," (").concat(h,")"),children:[m]}),l.a.createElement(D.q,{displayText:d("bank"),children:c?[f()]:s?[f(s)]:[b]})]}({fvaStatuses:w,fvaTypes:F,fvaBanks:q,defaultFVABanks:ee,isFetchingFVABanks:he,isErrorFetchingBanks:je,updateFilters:function(e){return function(e){if(Y.includes(e)){var t=$t(w,e);y(t)}else if(I.includes(e)){var a=$t(F,e);T(a)}else{var n=$t(q,e);Q(n)}}(e)},onCheckAllFilters:function(){var e=[].concat(Object(o.a)(w),Object(o.a)(F)),t=h()(e)?Y:[],a=h()(e)?I:[],n=h()(q)?ee:[];y(t),T(a),Q(n)},t:m}),ca={value:Ae,onChange:function(e){e.preventDefault(),De(e.target.value)},tooltip:m("searchPlaceHolder"),placeholder:m("search"),position:"inline",customCss:"filter-item"},oa={start:ke,end:ye,inputFormat:d.date_time_picker,outputFormat:$.a.GMT_MS_Z,onChange:function(e,t){var a=new Date(b()(t).tz(b.a.tz.guess()).format());switch(e){case"start":xe(a);break;case"end":Se(a);break;default:return}}},sa={isClickable:!1,tableHeaderColumns:re(m),tableContentRows:ae(dt,m),mobileTableContent:ne(dt,m),onClickLoadMore:function(){return Kt(!0)},withLoadMore:Je,loadMoreText:m("more"),isLoadingMore:st,isLoading:$e&&!st,isError:!h()(Ge),isEmpty:nt,loadingText:m("loadingVA"),errorContent:l.a.createElement(D.t,{text:Ge}),emptyContent:l.a.createElement(D.r,{caption:m("emptyCaption"),subtitle:m("emptySubtitle")}),actionButtonConfig:ce(m,ht,(function(e){gt(!0),xt(e)}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(J.a,{tabs:R(m),activeTab:1,changeActiveTab:function(e){0===e&&f.push(P)},customCss:"page-tab-container"}),l.a.createElement(C.a,{filters:ra,stickyHeader:!0,searchBarConfig:ca,dateFilterConfig:oa,tableConfig:sa}),l.a.createElement(Z,{t:m,showModal:jt,handleClose:na,handleSubmit:aa,accountNumber:null===kt||void 0===kt?void 0:kt.account_number,onChangeIssue:function(e){ta({issue:e})},onChangeAmount:function(e){e.preventDefault(),Nt("");var t=e.target.value;le.numeric.test(t)&&Number(t)||Nt(m("amountMustBeNumeric")),ta({amount:t})},onChangeDate:function(e){ta({date:e})},onChangeInfo:function(e){ta({additional_information:e.target.value})},errorMessageAmount:Tt,isLoadingSubmit:Vt,vaIssueForm:yt}),l.a.createElement(D.j,{showModal:Ht,type:"success",title:m("commonWords:thankYou"),subtitle:l.a.createElement("p",{className:"text-body-2"},m("successZendeskDesc")," ",l.a.createElement("br",null),m("successZendeskTicket"),l.a.createElement("span",{className:"zendesk-ticket-number"},Zt,".")),buttonText:m("seeStatus"),buttonType:"ghost",withCancel:!0,cancelButtonText:m("commonWords:okay"),cancelButtonVariant:"primary",customCss:"zendesk-modal-result",handleConfirm:function(){Rt(!1),f.push(H)},handleClose:function(){return Rt(!1)}}),l.a.createElement(D.j,Object.assign({},Yt,{handleClose:function(){return It(U)},buttonText:m("commonWords:okay"),useSuspense:!1})))}))},1585:function(e,t,a){var n=a(470);e.exports=function(e){return n(e).toLowerCase()}},1643:function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},1730:function(e,t,a){var n=a(1627);e.exports=function(e,t){return n(e,t)}},2082:function(e,t,a){}}]);